<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Net System Service Configuration" />
<meta name="DC.relation" scheme="URI" content="GUID-F15AF9B8-740F-41C4-BFC2-850D793F858B.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="net-system-service-configuration" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Net System Service Configuration</title>
<meta name="Microsoft.Help.Id" content="GUID-2B8E373F-A339-4F88-A864-07460CC2D917-net-system-service-configuration" />
<meta name="Microsoft.Help.TocParent" content="GUID-2B8E373F-A339-4F88-A864-07460CC2D917" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony PIC32MZW1/WFI32 wireless system services Reference A 01/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-B8C3059F-624D-4C22-93D5-33243DA6CB4F"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="net-system-service-configuration">
<h1 class="title topictitle1" id="ariaid-title1">Net System Service Configuration</h1><div class="body"><p class="p">The NET System Service library should be configured through the MHC. When user selects the NET System Service library, all the required dependencies components are added automatically in the MHC configuration. In the NET System Service library, user can select the mode as Client or Server and make required changes for the selected mode.</p>
<p class="p">The following figure shows the MHC configuration window for configuring the NET System Service and a brief description of various configuration options.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Open the MHC 3</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Drag the Net Service Module into the Active components from the Available components</p>
<br /><img class="image" src="GUID-80068CA6-6BCE-4DB2-9BED-31120784FB1A-low.png" alt="Net_service_MHC" /><br /></li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Configure the various parameters</p>
<br /><img class="image" src="GUID-2D87B6CF-03F0-4C4F-9010-731C798C8358-low.png" alt="resized_Net_service_config" /><br /></li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Configure the Supported Interface - 'WIFI_ONLY' (Wifi Only), or 'WIFI_ETHERNET' (Wifi and Ethernet Both) or 'ETHERNET_ONLY (Ethernet Only)'. On choosing WIFI_ETHERNET or ETHERNET_ONLY, the MHC will add EthMAC, MIIM, and LAM8740 Components.</p>
<br /><img class="image" src="GUID-8D27479B-1D41-471C-8E2C-EAB0B96A54C7-low.png" alt="Net_service_SuppIntf" /><br /><p class="p">The User needs to attach the EthMAC to the NetConfig (in System Component Window) via the MAC parameter in Instance 1 like below:</p>
<br /><img class="image" src="GUID-D354720E-5711-40CE-9389-5B2A0FF60A70-low.png" alt="Net_service_netconfig" /><br /></li>
<li class="li"><span class="indent-level-default">5.</span><p class="p">Configure the Number of Sockets Supported - 2 to 8, default sockets being 2.</p>
<br /><img class="image" src="GUID-494F720D-E59B-45ED-915F-D071654BCA99-low.png" alt="Net_service_SuppSocks" /><br /></li>
<li class="li"><span class="indent-level-default">6.</span><p class="p">Debug - Enabled by default - has 'CLI Commands' and 'Debug Logs' as sub parameters</p>
<br /><img class="image" src="GUID-CED64BC1-A10A-4A5B-8132-B8A5703AA62A-low.png" alt="Net_service_config_debug" /><br /><p class="p">a. Enable CLI Commands - This is enabled by default. This can be used by the user to give commands on the CLI to open/ close/ send message on a socket.
b. Enable Debug Logs in case more prints are required for debugging. By Default, the parameter value is 'False'.
Note: In case the user enables debug logs, user needs to manually add the 'App Debug Service' component from Wireless-&gt; System Service-&gt; App Debug Service.</p>
</li>
<li class="li"><span class="indent-level-default">7.</span><p class="p">User can configure 2 instances of a Net Socket. By default, only the first one is enabled.</p>
</li>
<li class="li"><span class="indent-level-default">8.</span><p class="p">Instance 0:</p>
<ol class="ol" type="a"><li class="li"><span class="indent-level-default">a.</span><p class="p">Configure the Network Interface as Wifi or Ethernet. Note that Ethernet as an interface can only be chosen if the 'Supported Intefaces' parameter is WIFI_ETHERNET.</p>
<br /><img class="image" src="GUID-3875D135-08B0-490E-88D4-6AE697F83A8B-low.png" alt="Net_service_Inst0_Intf" /><br /></li>
<li class="li"><span class="indent-level-default">b.</span><p class="p">Configure the IP Protocol as either TCP or UDP</p>
<br /><img class="image" src="GUID-B4CA811C-C83B-4D2D-8C87-A345433AD5D8-low.png" alt="Net_service_config_ipprot" /><br /></li>
<li class="li"><span class="indent-level-default">c.</span><p class="p">Configure the Mode as either Client or Server</p>
<br /><img class="image" src="GUID-BBC9052D-2144-4DB8-9A51-99478D1046BD-low.png" alt="Net_service_config_mode" /><br /></li>
<li class="li"><span class="indent-level-default">d.</span><p class="p">Enable/ Disable "Auto Connect" as per your requirement. This parameter when enabled ensures that if the NET Connection disconnects, the service internally tries to reconnect. By Default, the parameter value is 'True'.</p>
</li>
<li class="li"><span class="indent-level-default">e.</span><p class="p">Enable/ Disable "Enable TLS" in case the connection needs to be secured. This parameter is valid only in case of 'Client' mode. Please note that in case this parameter is Enabled, users need to configure the WolfSSL related configuration on their own. Also, this parameter is valid only for TCP Connections. By Default, the parameter value is 'False'.Note: In case the TLS is enabled, the User needs to update the component 'Presentation Layer' with the CA Certificate format, location, name, and size. Other parameters can be updated as per the User's requirements.</p>
<ul class="ul"><li class="li"><p class="p">"Enable SNI" - Server Name Indication if TRUE, enables a client device to specify the domain name it is trying to reach in the first step of the TLS handshake. By Default, the parameter value is 'False'.Note: In case the SNI is enabled, the Server Name is taken as the Domain Name.</p>
</li>
<li class="li with-image"><p class="p">"Enable ALPN" - Application-Layer Protocol Negotiation (ALPN) is a TLS extension that allows the application layer to negotiate which protocol should be performed over a secure connection in a manner that avoids additional round trips and which is independent of the application-layer protocols. By Default, the parameter value is 'False'.</p>
<br /><img class="image" src="GUID-06A634B9-AC8C-4FB9-BDC2-486F55A70A9C-low.png" alt="Net_service_tls_details" /><br /></li>
<li class="li with-image"><p class="p">Configure the various parameters of Presentation Layer if TLS enabled</p>
<br /><img class="image" src="GUID-C06B4495-1DC7-411A-A989-D8694A06CF67-low.png" alt="presentation_layer" /><br /></li>
</ul>
</li>
<li class="li"><span class="indent-level-default">f.</span><p class="p">Server Port - 1-65535. This is a mandatory parameter. In case Mode is selected as Client, Server port should be set to the port number of the server with which the device will connect. In case mode is selected as Server, Server port should be set to the port number at which the server will start</p>
</li>
<li class="li"><span class="indent-level-default">g.</span><p class="p">Host Name/ IP Address: Can be a Host Name or an IP Address. By Default, the parameter value is '192.168.1.1'.</p>
</li>
</ol>
</li>
<li class="li"><span class="indent-level-default">9.</span><p class="p">Instance 1 - User can enable this to give a configuration for another socket. Also, once the user gives this config, SYS_NET_Open() API will return error if it is passed NULL as config since now more than one instance is defined in the MHC.</p>
</li>
<li class="li"><span class="indent-level-default">10.</span><p class="p">To use the device certificates stored in <a class="xref" href="https://www.microchip.com/wwwproducts/en/ATECC608A-TNGTLS" target="_blank">ATECC608A-TNGTLS</a>, enable the "Trust&amp;Go client certificate" option under the net configurations.</p>
<br /><img class="image" src="GUID-75DBBA2F-522A-4928-8935-D7C5236811BE-low.png" alt="TNGTLS_ClientCert" /><br /></li>
</ol>
<p class="p">All of the required files are automatically added into the MPLAB X IDE project by the MHC when the Net Service is selected for use.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-F15AF9B8-740F-41C4-BFC2-850D793F858B.html">Net System Service</a></div>
</div>
</div></body>
</html>