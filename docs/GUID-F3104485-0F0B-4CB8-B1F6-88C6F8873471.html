<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Web Socket Server (WSS) System Service Configuration" />
<meta name="DC.relation" scheme="URI" content="GUID-097A4209-8474-480E-A141-6C8FC60A7671.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="web-socket-server-wss-system-service-configuration" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Web Socket Server (WSS) System Service Configuration</title>
<meta name="Microsoft.Help.Id" content="GUID-2B8E373F-A339-4F88-A864-07460CC2D917-web-socket-server-wss-system-service-configuration" />
<meta name="Microsoft.Help.TocParent" content="GUID-2B8E373F-A339-4F88-A864-07460CC2D917" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony PIC32MZW1/WFI32 wireless system services Reference A 01/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-F3104485-0F0B-4CB8-B1F6-88C6F8873471"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="web-socket-server-wss-system-service-configuration">
<h1 class="title topictitle1" id="ariaid-title1">Web Socket Server (WSS) System Service Configuration</h1><div class="body"><p class="p">The WSS System Service library should be configured through MHC. When user adds the WSS System Service into a project, all the required dependencies and components are added automatically into the the projects MHC configuration. The user can make changes according to the application requirement in the WSS System Service configuration menu.</p>
<p class="p">The following figure shows the MHC configuration window for configuring the WSS System Service and a brief description of various configuration options.</p>
<p class="p">1.Open the MHC 32.Drag the WSS Service Module into from the Available components into the Project Graph. This will trigger the auto activation of the dependent modules.Click on 'Yes' in the confirmation window popped up for component auto activation.</p>
<br /><img class="image" src="GUID-F6E1FAA3-8E0B-4818-8E5B-9BD56B0C2142-low.png" alt="resized_Activate_WSS" /><br /><p class="p">3.Configure the various parameters</p>
<br /><img class="image" src="GUID-1DB0A496-C953-48D0-ADCE-AB51521BBDAF-low.png" alt="resized_ConfigWSS" /><br />
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e32"><span>Parameter</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e34"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e32 "><span>Port</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e34 "><span>port used by the WSS service. Default is 8000</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e32 "><span>Debug</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e34 "><span>Control debug prints. Disabled by default</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e32 "><span>Secure Socket</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e34 "><span>Enable/Disable secure web socket. Make sure that you configure the required server certificate and keys in the underlying layers.</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e32 "><span>Application template Generation</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e34 "><span>Control the generation of an application template with all the available callbacks.</span></td>
</tr>
</tbody>
</table>
</div>
<br /><img class="image" src="GUID-7F9FE90D-AB5C-48C2-9271-AC919BD9C062-low.png" alt="ConfWSS_PortDebugTLSAppTemplate" /><br /><p class="p">4.Enabling secure websocket
To enable the secure web socket support user need to enable the below configuration options.</p>
<pre class="pre codeblock"><code id="d33336e62" content="1.Enable the highlighted option in the Web Socket Server Service MHC configuration.&#xD;">1.Enable the highlighted option in the Web Socket Server Service MHC configuration.&#xD;</code></pre><br /><img class="image" src="GUID-15F59568-F491-4602-B2A7-C1AFFB592EBB-low.png" alt="wss_tls_enable" /><br /><pre class="pre codeblock"><code id="d33336e68" content="2.Enable the highlighted options in the Presentation layer net_pres component. The server certificate used by default will be the one provided by the wolfssl module. The user need to provide the required modifications in the highlighted parameters incase of application specific certificate and keys.&#xD;">2.Enable the highlighted options in the Presentation layer net_pres component. The server certificate used by default will be the one provided by the wolfssl module. The user need to provide the required modifications in the highlighted parameters incase of application specific certificate and keys.&#xD;</code></pre><br /><img class="image" src="GUID-E91B9AB2-57D9-4BA5-82D9-C2A0C30C8DC0-low.png" alt="wss_tls_netpress" /><br /><p class="p">5.Advanced Configuration with RX buffer size, maximum number of supported clients, client timeout and start at boot features.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e81"><span>Parameter</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e83"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e81 "><span>Max Rx buffer length</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e83 "><span>Max length of the buffer used to receive and process messages. Default is 1400</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e81 "><span>Max number of clients</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e83 "><span>Max number of clients allowed to connect to teh WSS. Default is 2</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e81 "><span>Client timeout in ms</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e83 "><span>Timeout after which the client is disconnected in case of no data transfer or ping after connection. Default is 30000</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e81 "><span>Start at boot</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e83 "><span>Control when the WSS is enabled. Enabled at boot by default.</span></td>
</tr>
</tbody>
</table>
</div>
<br /><img class="image" src="GUID-B61E1EAD-6442-406F-8D16-20A712795AC5-low.png" alt="AdvancedConf_WSS" /><br /><p class="p">6.FreeRTOS configuration enabled by default</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e117"><span>Parameter</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d33336e119"><span>Description</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e117 "><span>RTOS Task Delay(ms)</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e119 "><span>WSS RTOS task delay. Default is 1 ms</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e117 "><span>RTOS Task Stack Size</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e119 "><span>WSS RTOS task stack size. Default is 4096</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e117 "><span>RTOS Task priority</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d33336e119 "><span>WSS RTOS task priority. Default is 1</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p">All of the required files are automatically genarted and added into the MPLAB X IDE project by the MHC when the code generation
completes successfully.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-097A4209-8474-480E-A141-6C8FC60A7671.html">Web Socket Server (WSS) System Service</a></div>
</div>
</div></body>
</html>