<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>OTA System Developer’s guide | Microchip MPLAB Harmony PIC32MZW1 wireless system services help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="OTA System Developer’s guide" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 PIC32MZW1/WFI32 wireless system services" /> <meta property="og:description" content="Harmony 3 PIC32MZW1/WFI32 wireless system services" /> <link rel="canonical" href="../../../system/ota/docs/developer_guide.html" /> <meta property="og:url" content="../../../system/ota/docs/developer_guide.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony PIC32MZW1 wireless system services help" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="OTA System Developer’s guide" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"../../../system/ota/docs/developer_guide.html","headline":"OTA System Developer’s guide","description":"Harmony 3 PIC32MZW1/WFI32 wireless system services","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../" class="nav-list-link">Harmony 3 PIC32MZW1 wireless system services package</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wifi/docs/readme.html" class="nav-list-link">Wi-Fi Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wifi/docs/configuration.html" class="nav-list-link">Wi-Fi System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/developer_guide.html" class="nav-list-link">Wi-Fi System Service developer guide</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/usage.html" class="nav-list-link">Wi-Fi System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/interface.html" class="nav-list-link">Wi-Fi System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wss/docs/readme.html" class="nav-list-link">Web Socket Server System Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wss/docs/developer.html" class="nav-list-link">Web Socket System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/wss/docs/usage.html" class="nav-list-link">Web Socket Server System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/wss/docs/interface.html" class="nav-list-link">Web Socket Server System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/appdebug/docs/readme.html" class="nav-list-link">App Debug Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/appdebug/docs/configuration.html" class="nav-list-link">App Debug System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/appdebug/docs/usage.html" class="nav-list-link">App Debug System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/appdebug/docs/interface.html" class="nav-list-link">App Debug System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/mqtt/docs/readme.html" class="nav-list-link">MQTT Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/mqtt/docs/configuration.html" class="nav-list-link">MQTT System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/usage.html" class="nav-list-link">MQTT System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/developer.html" class="nav-list-link">MQTT System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/interface.html" class="nav-list-link">MQTT System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/net/docs/readme.html" class="nav-list-link">Net Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/net/docs/configuration.html" class="nav-list-link">Net System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/developer.html" class="nav-list-link">Net System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/usage.html" class="nav-list-link">Net System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/interface.html" class="nav-list-link">Net System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wifiprov/docs/readme.html" class="nav-list-link">Wi-Fi provisioning Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/configuration.html" class="nav-list-link">Wi-Fi provisioning System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/developer_guide.html" class="nav-list-link">Wi-Fi provisioning System Service developer guide</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/usage.html" class="nav-list-link">Wi-Fi provisioning System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/interface.html" class="nav-list-link">Wi-Fi provisioning System Service Interface</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/ota/docs/readme.html" class="nav-list-link">OTA Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/ota/docs/configuration.html" class="nav-list-link">OTA System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/ota/docs/usage.html" class="nav-list-link">OTA System Service Usage</a> </li><li class="nav-list-item active"> <a href="../../../system/ota/docs/developer_guide.html" class="nav-list-link active">OTA System Developer's guide</a> </li><li class="nav-list-item "> <a href="../../../system/ota/docs/interface.html" class="nav-list-link">OTA System Service Interface</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony PIC32MZW1 wireless system services help" aria-label="Search Microchip MPLAB Harmony PIC32MZW1 wireless system services help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../">Harmony 3 PIC32MZW1 wireless system services package</a></li> <li class="breadcrumb-nav-list-item"><a href="../../../system/ota/docs/readme.html">OTA Service</a></li> <li class="breadcrumb-nav-list-item"><span>OTA System Developer's guide</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="ota-system-service-developers-guide"> <a href="#ota-system-service-developers-guide" aria-labelledby="ota-system-service-developers-guide" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OTA System Service Developer’s Guide </h1> <h2 id="ota-service-architecture-overview"> <a href="#ota-service-architecture-overview" aria-labelledby="ota-service-architecture-overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>OTA Service Architecture Overview</strong> </h2> <p>Over the Air (OTA) firmware upgrade feature is designed with a two step process, Image Downloading and Image Programming process.</p> <ol> <li>Image Downloading is processed by the OTA service that is integrated with your application code.</li> <li>Image Programming is processed by the OTA bootloader.</li> </ol> <p>For detailed information about OTA service architecture, please refer to the <code class="language-plaintext highlighter-rouge">Architecture Overview</code> section in <a href="../../../system/ota/docs/usage.html#using-the-library">Using the library</a> of the OTA documentation.</p> <h2 id="code-modificationimplementation-guide-for-common-use-cases"> <a href="#code-modificationimplementation-guide-for-common-use-cases" aria-labelledby="code-modificationimplementation-guide-for-common-use-cases" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Code modification/implementation guide for common use cases</strong> </h2> <h3 id="registering-a-user-defined-callback-for-ota-system-service"> <a href="#registering-a-user-defined-callback-for-ota-system-service" aria-labelledby="registering-a-user-defined-callback-for-ota-system-service" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Registering a user defined callback for OTA system service</strong> </h3> <p>Developer may register a callback function to receive callback from the OTA system service for pre-defined scenarios.</p> <p>For registering callback developer may follow any one of below mentioned methods.</p> <p>a. Using the built-in function <code class="language-plaintext highlighter-rouge">ota_app_reg_cb()</code> wrapper, defined in <code class="language-plaintext highlighter-rouge">app_ota.c</code> . Please see the code snippet below for reference:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="cm">/* Check the application's current state. */</span>
    <span class="k">switch</span> <span class="p">(</span> <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* Application's initial state. */</span>
        <span class="k">case</span> <span class="n">APP_STATE_INIT</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">true</span> <span class="o">==</span> <span class="n">ota_app_reg_cb</span><span class="p">())</span>
                <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">APP_STATE_SERVICE_TASKS</span><span class="p">;</span>

            <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">APP_STATE_SERVICE_TASKS</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">APP_STATE_SERVICE_TASKS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="cm">/* TODO: implement your application state machine.*/</span>
        <span class="nl">default:</span>
        <span class="p">{</span>
            <span class="cm">/* TODO: Handle error in application's state machine. */</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div> <p>The template of a callback handler function, <code class="language-plaintext highlighter-rouge">sys_ota_cb()</code> is implemented in <code class="language-plaintext highlighter-rouge">app_ota.c</code> with all the potential events from the OTA system service. Developer can modify this template to build their own custom logic as per system/application requirements.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">void</span> <span class="nf">sys_ota_cb</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">event</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cookie</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="k">case</span> <span class="n">SYS_OTA_UPDATE_CHECK_START</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA update check start . Customer can build their own custom logic */</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_UPDATE_CHECK_START</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_UPDATE_CHECK_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA update check failed . Customer can build their own custom logic */</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_UPDATE_CHECK_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_UPDATE_AVAILABLE</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA update available . Customer can build their own custom logic */</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_UPDATE_AVAILABLE</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_UPDATE_NOTAVAILABLE</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA update not available. Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_UPDATE_NOTAVAILABLE</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_TRIGGER_OTA_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA trigger failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_TRIGGER_OTA_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_FACTORY_RESET_SUCCESS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA Factory reset success . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_FACTORY_RESET_SUCCESS</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_FACTORY_RESET_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA Factory reset failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_FACTORY_RESET_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_ROLLBACK_SUCCESS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA rollback success . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_ROLLBACK_SUCCESS</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_ROLLBACK_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA rollback failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_ROLLBACK_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_DOWNLOAD_START</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image download start . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_DOWNLOAD_START</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_DOWNLOAD_SUCCESS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image download success . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_DOWNLOAD_SUCCESS</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_DOWNLOAD_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image download failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_DOWNLOAD_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_DIGEST_VERIFY_START</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image digest verify start . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_DIGEST_VERIFY_START</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_DIGEST_VERIFY_SUCCESS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image digest verify success . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_DIGEST_VERIFY_SUCCESS</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_DIGEST_VERIFY_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image digest verify failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_VERIFICATION_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_DB_ENTRY_SUCCESS</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA database entry successful . Customer can build their own custom logic*/</span>
            <span class="cm">/*For Manual reset, user must trigger system reset, after system reach this state only*/</span>
            <span class="cm">/*Do not use API call from here. Use variables to get the status*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_DB_ENTRY_SUCCESS</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="n">ota_complete</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_ERASE_FAILED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image erase failed . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_ERASE_FAILED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_ERASED</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image erase success . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_ERASED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">case</span> <span class="n">SYS_OTA_IMAGE_DATABASE_FULL</span><span class="p">:</span>
        <span class="p">{</span>
            <span class="cm">/*OTA image database full . Customer can build their own custom logic*/</span>
            <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"SYS_OTA_IMAGE_DATABASE_FULL</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nl">default:</span>
        <span class="p">{</span>
            <span class="cm">/*unknown state*/</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div> <p>b. Alternately developers may use <code class="language-plaintext highlighter-rouge">SYS_OTA_CtrlMsg()</code> API to register their own callback function. Please follow below code snippet for reference :</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="k">if</span> <span class="p">(</span><span class="n">SYS_OTA_SUCCESS</span> <span class="o">==</span> <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_REGCALLBACK</span><span class="p">,</span> <span class="n">sys_ota_cb</span><span class="p">,</span> <span class="k">sizeof</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)))</span>
     <span class="p">{</span>
        <span class="cm">/*Callback register request success*/</span>
     <span class="p">}</span> 
     <span class="k">else</span> 
     <span class="p">{</span>
        <span class="cm">/*Callback register request fail*/</span>
     <span class="p">}</span>

</code></pre></div></div> <h3 id="check-for-updates-on-a-custom-trigger-trigger-"> <a href="#check-for-updates-on-a-custom-trigger-trigger-" aria-labelledby="check-for-updates-on-a-custom-trigger-trigger-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong><em>Check</em> for updates on a custom trigger trigger :</strong> </h3> <p>Your system design may have requirements to check, update image availability, in OTA server only during specific particular conditions (e.g : Switch pressed or when a MQTT message received on a specific topic). System should then initiate an OTA check in the image server.</p> <p>Under such condition to initiate update check on user trigger , user may follow below steps:</p> <ol> <li> <p>Disable <code class="language-plaintext highlighter-rouge">Periodic OTA check</code> option, in MHC configuration. <img src="../../../system/ota/docs/images/disable_periodic_ota.png" alt="" /></p> </li> <li> <p>Generate code.</p> </li> <li> <p>Modify application code to initiate update check using control API <code class="language-plaintext highlighter-rouge">SYS_OTA_CtrlMsg(uint32_t event, void *buffer, uint32_t length) </code>, when trigger condition is fulfilled (e.g. when a switch is pressed ).</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="n">SWITCH1_Get</span><span class="p">()</span> <span class="o">==</span> <span class="n">SWITCH1_STATE_PRESSED</span> <span class="p">)</span>
<span class="p">{</span>          
    <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_UPDATECHCK</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div> </div> </li> </ol> <h3 id="initiate-ota-on-user-trigger-"> <a href="#initiate-ota-on-user-trigger-" aria-labelledby="initiate-ota-on-user-trigger-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Initiate OTA on user trigger :</strong> </h3> <p>System design may have requirements to trigger an OTA <em>update</em> only once a condition only is met. (e.g : Switch pressed or when a MQTT message received from MQTT server).</p> <p>Under such condition to trigger OTA manually, user may follow below steps:</p> <ol> <li> <p>Disable <code class="language-plaintext highlighter-rouge">Auto OTA update</code> and <code class="language-plaintext highlighter-rouge">Periodic OTA check</code> options, in MHC configuration.</p> <p><img src="images/manual_trigger_disable_mhc_option.PNG" alt="" /></p> </li> <li> <p>Generate code.</p> </li> <li> <p>Developer should provide server URL, OTA image version number present in OTA server and digest of OTA image using API <code class="language-plaintext highlighter-rouge">SYS_OTA_SET_PARAMETERS(char *url, uint8_t version, char *digest)</code></p> <ol> <li>The parameters should be sent to the device out of band. E.g: The payload of an MQTT message.</li> <li>It would be user responsibility to provide correct image version number, as OTA service will not be doing any verion check of ota image. It will simply download the image from user defined server and store the parameter details as provided into OTA database.</li> </ol> </li> <li> <p>Modify application code to trigger OTA using control API <code class="language-plaintext highlighter-rouge">SYS_OTA_CtrlMsg(uint32_t event, void *buffer, uint32_t length) </code>, when trigger condition is fulfilled (e.g. when a switch is pressed ).</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cm">/* Check the application's current state. */</span>
 <span class="k">switch</span> <span class="p">(</span> <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="p">)</span>
 <span class="p">{</span>
     <span class="cm">/* Application's initial state. */</span>
     <span class="k">case</span> <span class="n">APP_STATE_INIT</span><span class="p">:</span>
     <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="n">ota_app_reg_cb</span><span class="p">()</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
         <span class="p">{</span>
             <span class="kt">uint8_t</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
             <span class="kt">char</span> <span class="o">*</span><span class="n">digest</span> <span class="o">=</span> <span class="s">"ef90bf8bf7fd96205c3240c31e1a378430e7a8f053a300e5c91ebe64fefea197"</span><span class="p">;</span>
             <span class="n">SYS_OTA_SET_PARAMETERS</span><span class="p">(</span><span class="s">"http://192.168.43.173:8000/wifi_ota_demo.bin"</span><span class="p">,</span> <span class="n">version</span> <span class="p">,</span> <span class="n">digest</span><span class="p">);</span>
             <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">APP_STATE_SERVICE_TASKS</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">break</span><span class="p">;</span>
     <span class="p">}</span>
     <span class="k">case</span> <span class="n">APP_STATE_SERVICE_TASKS</span><span class="p">:</span>
     <span class="p">{</span>
         <span class="k">if</span><span class="p">((</span><span class="n">SWITCH1_Get</span><span class="p">()</span> <span class="o">==</span> <span class="n">SWITCH1_STATE_PRESSED</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ota_initiated</span> <span class="o">==</span> <span class="nb">false</span><span class="p">))</span>
         <span class="p">{</span>          
             <span class="n">ota_initiated</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
             <span class="k">if</span><span class="p">(</span><span class="n">SYS_OTA_SUCCESS</span> <span class="o">==</span> <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_INITIATE_OTA</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="nb">NULL</span><span class="p">))</span>
                 <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">APP_STATE_OTA_INITIATE_SUCCESS</span><span class="p">;</span>
             <span class="k">else</span>   
                 <span class="n">ota_initiated</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">break</span><span class="p">;</span>
     <span class="p">}</span>
     <span class="k">case</span> <span class="n">APP_STATE_OTA_INITIATE_SUCCESS</span><span class="p">:</span>
     <span class="p">{</span>
         <span class="k">break</span><span class="p">;</span>
     <span class="p">}</span>
     <span class="cm">/* TODO: implement your application state machine.*/</span>
     <span class="nl">default:</span>
     <span class="p">{</span>
         <span class="cm">/* TODO: Handle error in application's state machine. */</span>
         <span class="k">break</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div> </div> </li> </ol> <h3 id="initiate-factory-reset-on-user-trigger-"> <a href="#initiate-factory-reset-on-user-trigger-" aria-labelledby="initiate-factory-reset-on-user-trigger-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Initiate Factory Reset on user trigger :</strong> </h3> <p>Factory Reset is a functionality using which user may get the system back to its original state, meaning, the Factory image will be programmed to internal flash (Program memory) and all other OTA images will be erased from external flash storage along with OTA database if it exist.</p> <p>User may initiate Factory reset using the <code class="language-plaintext highlighter-rouge">SYS_OTA_TRIGGER_FACTORY_RESET</code> control message as shown in the code snippet below.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span><span class="p">(</span><span class="n">SWITCH1_Get</span><span class="p">()</span> <span class="o">==</span> <span class="n">SWITCH1_STATE_PRESSED</span> <span class="p">)</span>
    <span class="p">{</span>          
      <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_TRIGGER_FACTORY_RESET</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <h3 id="how-to-trigger-system-reset-from-application-on-successful-ota-completion-with-autoreset-option-disabled-in-mhc-"> <a href="#how-to-trigger-system-reset-from-application-on-successful-ota-completion-with-autoreset-option-disabled-in-mhc-" aria-labelledby="how-to-trigger-system-reset-from-application-on-successful-ota-completion-with-autoreset-option-disabled-in-mhc-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>How to trigger system reset (from application) on successful OTA completion, with <code class="language-plaintext highlighter-rouge">Autoreset</code> option disabled in MHC :</strong> </h3> <p>Developer may choose to disable <code class="language-plaintext highlighter-rouge">Autoreset</code> option in MHC and may have requirement to build custom logic for application, deciding when to go for system reset after successful OTA download. This will enable the system/application to complete important tasks before triggering a system reset.</p> <p>Developer may easily develop such custom logic using <code class="language-plaintext highlighter-rouge">SYS_OTA_CtrlMsg()</code> API for system reset.</p> <p>Please follow below code snippet for reference :</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">SYS_OTA_SUCCESS</span> <span class="o">==</span> <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_TRIGGER_SYSTEM_RESET</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">))</span>
     <span class="p">{</span>
        <span class="cm">/*System reset request success.*/</span>
     <span class="p">}</span> 
     <span class="k">else</span> 
     <span class="p">{</span>
        <span class="cm">/*System reset request fail*/</span>
     <span class="p">}</span>
</code></pre></div></div> <p>Please note that <code class="language-plaintext highlighter-rouge">SYS_OTA_CtrlMsg()</code> will return <code class="language-plaintext highlighter-rouge">SYS_OTA_SUCCESS</code>, if the request is successful. System will reset only if OTA download has completed successfully. User can check for <code class="language-plaintext highlighter-rouge">SYS_OTA_DB_ENTRY_SUCCESS</code> system callback state, to trigger manual reset.</p> <h3 id="how-to-limit-periodic-ota-check-for-a-definite-number-of-times-"> <a href="#how-to-limit-periodic-ota-check-for-a-definite-number-of-times-" aria-labelledby="how-to-limit-periodic-ota-check-for-a-definite-number-of-times-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>How to limit <code class="language-plaintext highlighter-rouge">periodic OTA check</code> for a definite number of times :</strong> </h3> <p>Developer may have requirement to limit <code class="language-plaintext highlighter-rouge">periodic OTA check</code> to a definite number of times.</p> <p>For example, OTA service should go to idle state until next reset after checking update availability for <code class="language-plaintext highlighter-rouge">3</code> times consecutively. For this, developer may add below lines of code in <code class="language-plaintext highlighter-rouge">sys_ota.c</code> file:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">if</span><span class="p">(</span><span class="n">update_check_counter</span><span class="o">++</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// `update_check_counter` is an extern variable, defined by developer</span>
                <span class="p">{</span>
                    <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"Update availability check completed for 3 times, no update found</span><span class="se">\n\r</span><span class="s">"</span><span class="p">);</span>
                    <span class="n">sys_otaData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SYS_OTA_IDLE</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
</code></pre></div></div> <p><img src="images/limit_periodic_check.PNG" alt="" /></p> <h3 id="what-will-happen-if-an-image-is-downloaded-successfully-but-image-digest-verify-fails-"> <a href="#what-will-happen-if-an-image-is-downloaded-successfully-but-image-digest-verify-fails-" aria-labelledby="what-will-happen-if-an-image-is-downloaded-successfully-but-image-digest-verify-fails-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>What will happen if an image is downloaded successfully but image digest verify fails :</strong> </h3> <p>With default logic, the downloaded image will be erased if digest verify fails. OTA system service will disable auto update check, provide user callback and go to IDLE mode.</p> <h3 id="how-developer-can-trigger-periodic-update-check--when-a-user-defined-condition-is-satisfied-eg--switch-pressed-"> <a href="#how-developer-can-trigger-periodic-update-check--when-a-user-defined-condition-is-satisfied-eg--switch-pressed-" aria-labelledby="how-developer-can-trigger-periodic-update-check--when-a-user-defined-condition-is-satisfied-eg--switch-pressed-" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>How developer can trigger periodic update check , when a user defined condition is satisfied (e.g. : switch pressed) :</strong> </h3> <p>Developer may have the requirement to trigger periodic update check, only when a user defined condition is satisfied .</p> <p>Let us assume a scenario , in which application should trigger periodic update check, when user press a switch. To develop this particular requirement user may follow below steps :</p> <ol> <li> <p>Disable <code class="language-plaintext highlighter-rouge">Periodic OTA Check</code> option in MHC.</p> <p><img src="images/disable_periodic_check.PNG" alt="" /></p> </li> <li>Generate code using MHC.</li> <li> <p>Add below lines of code at the beginning of <code class="language-plaintext highlighter-rouge">case SYS_OTA_SERVER_UPDATE_CHECK</code> in <code class="language-plaintext highlighter-rouge">sys_ota.c</code> file.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">g_SysOtaConfig</span><span class="p">.</span><span class="n">ota_periodic_check</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
 <span class="n">sys_otaData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">SYS_OTA_AUTO_CONFIGURATION_CHECK</span><span class="p">;</span>
 <span class="k">break</span><span class="p">;</span>
</code></pre></div> </div> <p><img src="images/periodic_check_on_user_trigger.PNG" alt="" /></p> </li> <li> <p>Write custom logic in application file “app.c”.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">((</span><span class="n">SWITCH1_Get</span><span class="p">()</span> <span class="o">==</span> <span class="n">SWITCH1_STATE_PRESSED</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ota_initiated</span> <span class="o">==</span> <span class="nb">false</span><span class="p">))</span>
        <span class="p">{</span>          
            <span class="n">ota_initiated</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">SYS_OTA_SUCCESS</span> <span class="o">==</span> <span class="n">SYS_OTA_CtrlMsg</span><span class="p">(</span><span class="n">SYS_OTA_UPDATECHCK</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
                <span class="n">appData</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">APP_STATE_OTA_INITIATE_SUCCESS</span><span class="p">;</span>
            <span class="k">else</span>   
                <span class="n">ota_initiated</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div> </div> </li> </ol> <p>### <strong>How to get download status during OTA update :</strong></p> <p>Application Developer may want to get the download status during OTA update, for certain application logic development. They may easily extract download status using below lines of code :</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">{</span>
        <span class="n">OTA_GetDownloadStatus</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ota_params</span><span class="p">);</span><span class="c1">//ota_params should be defined as : OTA_PARAMS ota_params;</span>
        <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"*******************************************</span><span class="se">\n\r</span><span class="s">"</span><span class="p">);</span>
        
        <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"Total data to download : %d bytes</span><span class="se">\n\r</span><span class="s">"</span><span class="p">,</span> <span class="n">ota_params</span><span class="p">.</span><span class="n">server_image_length</span><span class="p">);</span>
        <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"Data downloaded : %d bytes </span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span> <span class="n">ota_params</span><span class="p">.</span><span class="n">total_data_downloaded</span><span class="p">);</span>
        <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"*******************************************</span><span class="se">\n\r</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2021 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
