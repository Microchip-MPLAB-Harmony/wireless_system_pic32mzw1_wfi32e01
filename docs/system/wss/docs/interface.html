<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Web Socket Server System Service Interface | Microchip MPLAB Harmony PIC32MZW1 wireless system services help</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Web Socket Server System Service Interface" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 PIC32MZW1/WFI32 wireless system services" /> <meta property="og:description" content="Harmony 3 PIC32MZW1/WFI32 wireless system services" /> <link rel="canonical" href="../../../system/wss/docs/interface.html" /> <meta property="og:url" content="../../../system/wss/docs/interface.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony PIC32MZW1 wireless system services help" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Web Socket Server System Service Interface" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"../../../system/wss/docs/interface.html","headline":"Web Socket Server System Service Interface","description":"Harmony 3 PIC32MZW1/WFI32 wireless system services","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../index.html" class="nav-list-link">Harmony 3 PIC32MZW1 wireless system services package</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wifi/docs/readme.html" class="nav-list-link">Wi-Fi Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wifi/docs/configuration.html" class="nav-list-link">Wi-Fi System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/developer_guide.html" class="nav-list-link">Wi-Fi System Service developer guide</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/usage.html" class="nav-list-link">Wi-Fi System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/wifi/docs/interface.html" class="nav-list-link">Wi-Fi System Service Interface</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wss/docs/readme.html" class="nav-list-link">Web Socket Server System Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wss/docs/developer.html" class="nav-list-link">Web Socket System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/wss/docs/usage.html" class="nav-list-link">Web Socket Server System Service Usage</a> </li><li class="nav-list-item active"> <a href="../../../system/wss/docs/interface.html" class="nav-list-link active">Web Socket Server System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/appdebug/docs/readme.html" class="nav-list-link">App Debug Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/appdebug/docs/configuration.html" class="nav-list-link">App Debug System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/appdebug/docs/usage.html" class="nav-list-link">App Debug System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/appdebug/docs/interface.html" class="nav-list-link">App Debug System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/mqtt/docs/readme.html" class="nav-list-link">MQTT Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/mqtt/docs/configuration.html" class="nav-list-link">MQTT System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/usage.html" class="nav-list-link">MQTT System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/developer.html" class="nav-list-link">MQTT System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/mqtt/docs/interface.html" class="nav-list-link">MQTT System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/net/docs/readme.html" class="nav-list-link">Net Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/net/docs/configuration.html" class="nav-list-link">Net System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/developer.html" class="nav-list-link">Net System Service Developer's Guide</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/usage.html" class="nav-list-link">Net System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/net/docs/interface.html" class="nav-list-link">Net System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/wifiprov/docs/readme.html" class="nav-list-link">Wi-Fi provisioning Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/configuration.html" class="nav-list-link">Wi-Fi provisioning System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/developer_guide.html" class="nav-list-link">Wi-Fi provisioning System Service developer guide</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/usage.html" class="nav-list-link">Wi-Fi provisioning System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/wifiprov/docs/interface.html" class="nav-list-link">Wi-Fi provisioning System Service Interface</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../system/ota/docs/readme.html" class="nav-list-link">OTA Service</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../system/ota/docs/configuration.html" class="nav-list-link">OTA System Service Configuration</a> </li><li class="nav-list-item "> <a href="../../../system/ota/docs/usage.html" class="nav-list-link">OTA System Service Usage</a> </li><li class="nav-list-item "> <a href="../../../system/ota/docs/developer_guide.html" class="nav-list-link">OTA System Developer's guide</a> </li><li class="nav-list-item "> <a href="../../../system/ota/docs/interface.html" class="nav-list-link">OTA System Service Interface</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony PIC32MZW1 wireless system services help" aria-label="Search Microchip MPLAB Harmony PIC32MZW1 wireless system services help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../index.html">Harmony 3 PIC32MZW1 wireless system services package</a></li> <li class="breadcrumb-nav-list-item"><a href="../../../system/wss/docs/readme.html">Web Socket Server System Service</a></li> <li class="breadcrumb-nav-list-item"><span>Web Socket Server System Service Interface</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="web-socket-server-system-service-interface"> <a href="#web-socket-server-system-service-interface" aria-labelledby="web-socket-server-system-service-interface" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Web Socket Server System Service Interface </h1> <h3 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" aria-labelledby="table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h3> <ol id="markdown-toc"> <li><a href="#data-types-and-constants-summary" id="markdown-toc-data-types-and-constants-summary">Data Types and Constants Summary</a></li> <li><a href="#initialization-functions-summary" id="markdown-toc-initialization-functions-summary">Initialization functions Summary</a></li> <li><a href="#data-exchange-functions-summary" id="markdown-toc-data-exchange-functions-summary">Data Exchange functions Summary</a></li> <li><a href="#data-types-and-constants" id="markdown-toc-data-types-and-constants">Data Types and Constants</a> <ol> <li><a href="#sys_wss_ka_timer_period" id="markdown-toc-sys_wss_ka_timer_period">SYS_WSS_KA_TIMER_PERIOD</a></li> <li><a href="#sys_wss_client_key_size" id="markdown-toc-sys_wss_client_key_size">SYS_WSS_CLIENT_KEY_SIZE</a></li> <li><a href="#sys_wss_client_key_size_decoded" id="markdown-toc-sys_wss_client_key_size_decoded">SYS_WSS_CLIENT_KEY_SIZE_DECODED</a></li> <li><a href="#sys_wss_server_key_size" id="markdown-toc-sys_wss_server_key_size">SYS_WSS_SERVER_KEY_SIZE</a></li> <li><a href="#sys_wss_sha1_digest_size" id="markdown-toc-sys_wss_sha1_digest_size">SYS_WSS_SHA1_DIGEST_SIZE</a></li> <li><a href="#sys_wss_http_version_0_9" id="markdown-toc-sys_wss_http_version_0_9">SYS_WSS_HTTP_VERSION_0_9</a></li> <li><a href="#sys_wss_http_version_1_0" id="markdown-toc-sys_wss_http_version_1_0">SYS_WSS_HTTP_VERSION_1_0</a></li> <li><a href="#sys_wss_http_version_1_1" id="markdown-toc-sys_wss_http_version_1_1">SYS_WSS_HTTP_VERSION_1_1</a></li> <li><a href="#sys_wss_status_code_len" id="markdown-toc-sys_wss_status_code_len">SYS_WSS_STATUS_CODE_LEN</a></li> <li><a href="#sys_wss_guid" id="markdown-toc-sys_wss_guid">SYS_WSS_GUID</a></li> <li><a href="#sys_wss_config" id="markdown-toc-sys_wss_config">SYS_WSS_CONFIG</a></li> <li><a href="#sys_wss_handshake_ctxt" id="markdown-toc-sys_wss_handshake_ctxt">SYS_WSS_HANDSHAKE_CTXT</a></li> <li><a href="#sys_wss_frame_header" id="markdown-toc-sys_wss_frame_header">SYS_WSS_FRAME_HEADER</a></li> <li><a href="#sys_wss_rxdata" id="markdown-toc-sys_wss_rxdata">SYS_WSS_RXDATA</a></li> <li><a href="#sys_wss_result" id="markdown-toc-sys_wss_result">SYS_WSS_RESULT</a></li> <li><a href="#sys_wss_state" id="markdown-toc-sys_wss_state">SYS_WSS_STATE</a></li> <li><a href="#sys_wss_frame" id="markdown-toc-sys_wss_frame">SYS_WSS_FRAME</a></li> <li><a href="#sys_wss_events" id="markdown-toc-sys_wss_events">SYS_WSS_EVENTS</a></li> <li><a href="#sys_wss_status_code" id="markdown-toc-sys_wss_status_code">SYS_WSS_STATUS_CODE</a></li> </ol> </li> <li><a href="#initialization-functions" id="markdown-toc-initialization-functions">Initialization functions</a> <ol> <li><a href="#sys_wss_initialize" id="markdown-toc-sys_wss_initialize">SYS_WSS_Initialize</a></li> <li><a href="#sys_wss_deinitialize" id="markdown-toc-sys_wss_deinitialize">SYS_WSS_Deinitialize</a></li> </ol> </li> <li><a href="#data-exchange-functions" id="markdown-toc-data-exchange-functions">Data Exchange functions</a> <ol> <li><a href="#sys_wss_sendmessage" id="markdown-toc-sys_wss_sendmessage">SYS_WSS_sendMessage</a></li> <li><a href="#sys_wss_register_callback" id="markdown-toc-sys_wss_register_callback">SYS_WSS_register_callback</a></li> <li><a href="#sys_wss_closeconnection" id="markdown-toc-sys_wss_closeconnection">SYS_WSS_CloseConnection</a></li> <li><a href="#sys_wss_pingclient" id="markdown-toc-sys_wss_pingclient">SYS_WSS_PingClient</a></li> </ol> </li> </ol> <hr /> <h2 id="data-types-and-constants-summary"> <a href="#data-types-and-constants-summary" aria-labelledby="data-types-and-constants-summary" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Types and Constants Summary </h2> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="#SYS_WSS_KA_TIMER_PERIOD">SYS_WSS_KA_TIMER_PERIOD</a></td> <td>Decides the accuracy of the client timeout</td> </tr> <tr> <td><a href="#SYS_WSS_CLIENT_KEY_SIZE">SYS_WSS_CLIENT_KEY_SIZE</a></td> <td>Array size for holding the client key</td> </tr> <tr> <td><a href="#SYS_WSS_CLIENT_KEY_SIZE_DECODED">SYS_WSS_CLIENT_KEY_SIZE_DECODED</a></td> <td>Decoded client key size as per the RFC6455</td> </tr> <tr> <td><a href="#SYS_WSS_SERVER_KEY_SIZE">SYS_WSS_SERVER_KEY_SIZE</a></td> <td>Array saze for holding the server key</td> </tr> <tr> <td><a href="#SYS_WSS_SHA1_DIGEST_SIZE">SYS_WSS_SHA1_DIGEST_SIZE</a></td> <td>SHA1 digest size -server key genartion</td> </tr> <tr> <td><a href="#SYS_WSS_HTTP_VERSION_0_9">SYS_WSS_HTTP_VERSION_0_9</a></td> <td>HTTP vesrion 0.9</td> </tr> <tr> <td><a href="#SYS_WSS_HTTP_VERSION_1_0">SYS_WSS_HTTP_VERSION_1_0</a></td> <td>HTTP version 1.0</td> </tr> <tr> <td><a href="#SYS_WSS_HTTP_VERSION_1_1">SYS_WSS_HTTP_VERSION_1_1</a></td> <td>HTTP version 1.1</td> </tr> <tr> <td><a href="#SYS_WSS_STATUS_CODE_LEN">SYS_WSS_STATUS_CODE_LEN</a></td> <td>Closing Status code lenth as per RFC6455</td> </tr> <tr> <td><a href="#SYS_WSS_GUID">SYS_WSS_GUID</a></td> <td>WebSocket GUID as per Section 1.3 of RFC 6455</td> </tr> <tr> <td><a href="#SYS_WSS_CONFIG">SYS_WSS_CONFIG</a></td> <td>Used for passing on the configuration(port and TLS) for socket connection</td> </tr> <tr> <td><a href="#SYS_WSS_HANDSHAKE_CTXT">SYS_WSS_HANDSHAKE_CTXT</a></td> <td>Stores the handshake information of a client.</td> </tr> <tr> <td><a href="#SYS_WSS_FRAME_HEADER">SYS_WSS_FRAME_HEADER</a></td> <td>Identifies the frame format as defined by RFC6455.</td> </tr> <tr> <td><a href="#SYS_WSS_RXDATA">SYS_WSS_RXDATA</a></td> <td>Stores the data received from the client along with the datalength.</td> </tr> <tr> <td><a href="#SYS_WSS_RESULT">SYS_WSS_RESULT</a></td> <td>Identifies the return values for the WSS system service APIs.</td> </tr> <tr> <td><a href="#SYS_WSS_STATE">SYS_WSS_STATE</a></td> <td>Identifies the state machine values of the WSS system service.</td> </tr> <tr> <td><a href="#SYS_WSS_FRAME">SYS_WSS_FRAME</a></td> <td>Identifies the frame types as defined by the RFC6455.</td> </tr> <tr> <td><a href="#SYS_WSS_EVENTS">SYS_WSS_EVENTS</a></td> <td>Identifies the events reported to the application using the call back function.</td> </tr> <tr> <td><a href="#SYS_WSS_STATUS_CODE">SYS_WSS_STATUS_CODE</a></td> <td>Identifies status code to be used in the closing handshake as defined by RF6455.</td> </tr> </tbody> </table></div> <h2 id="initialization-functions-summary"> <a href="#initialization-functions-summary" aria-labelledby="initialization-functions-summary" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initialization functions Summary </h2> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="#SYS_WSS_Initialize">SYS_WSS_Initialize</a></td> <td>Returns wss object handle after initialization of data structures and timers of the WSS system service</td> </tr> <tr> <td><a href="#SYS_WSS_Deinitialize">SYS_WSS_Deinitialize</a></td> <td>Deinitialization of data structures of the WSS system service</td> </tr> </tbody> </table></div> <h2 id="data-exchange-functions-summary"> <a href="#data-exchange-functions-summary" aria-labelledby="data-exchange-functions-summary" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Exchange functions Summary </h2> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="#SYS_WSS_sendMessage">SYS_WSS_sendMessage</a></td> <td>Returns failure or success after sending the data to the client.</td> </tr> <tr> <td><a href="#SYS_WSS_register_callback">SYS_WSS_register_callback</a></td> <td>Returns success after registration of the user call back function.</td> </tr> <tr> <td><a href="#SYS_WSS_CloseConnection">SYS_WSS_CloseConnection</a></td> <td>Returns success after sending a close frame to the client.</td> </tr> <tr> <td><a href="#SYS_WSS_PingClient">SYS_WSS_PingClient</a></td> <td>Returns success after sending a ping frame to the client.</td> </tr> </tbody> </table></div> <h2 id="data-types-and-constants"> <a href="#data-types-and-constants" aria-labelledby="data-types-and-constants" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Types and Constants </h2> <h3 id="sys_wss_ka_timer_period"> <a href="#sys_wss_ka_timer_period" aria-labelledby="sys_wss_ka_timer_period" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_KA_TIMER_PERIOD </h3> <p><strong>Summary</strong></p> <p>WSS system timer period which the accuracy of the client timeout.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_KA_TIMER_PERIOD  100		
</span></code></pre></div></div> <h3 id="sys_wss_client_key_size"> <a href="#sys_wss_client_key_size" aria-labelledby="sys_wss_client_key_size" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_CLIENT_KEY_SIZE </h3> <p><strong>Summary</strong></p> <p>Array size for holding the client key.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_CLIENT_KEY_SIZE 16	
</span></code></pre></div></div> <h3 id="sys_wss_client_key_size_decoded"> <a href="#sys_wss_client_key_size_decoded" aria-labelledby="sys_wss_client_key_size_decoded" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_CLIENT_KEY_SIZE_DECODED </h3> <p><strong>Summary</strong></p> <p>Decoded client key size as per the RFC6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_CLIENT_KEY_SIZE_DECODED 16
</span></code></pre></div></div> <h3 id="sys_wss_server_key_size"> <a href="#sys_wss_server_key_size" aria-labelledby="sys_wss_server_key_size" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_SERVER_KEY_SIZE </h3> <p><strong>Summary</strong></p> <p>Array saze for holding the server key.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_SERVER_KEY_SIZE 50			
</span></code></pre></div></div> <h3 id="sys_wss_sha1_digest_size"> <a href="#sys_wss_sha1_digest_size" aria-labelledby="sys_wss_sha1_digest_size" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_SHA1_DIGEST_SIZE </h3> <p><strong>Summary</strong></p> <p>SHA1 digest size -server key genartion.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_SHA1_DIGEST_SIZE 	20 	
</span></code></pre></div></div> <h3 id="sys_wss_http_version_0_9"> <a href="#sys_wss_http_version_0_9" aria-labelledby="sys_wss_http_version_0_9" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_HTTP_VERSION_0_9 </h3> <p><strong>Summary</strong></p> <p>HTTP vesrion 0.9</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_HTTP_VERSION_0_9 0x0009	
</span></code></pre></div></div> <h3 id="sys_wss_http_version_1_0"> <a href="#sys_wss_http_version_1_0" aria-labelledby="sys_wss_http_version_1_0" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_HTTP_VERSION_1_0 </h3> <p><strong>Summary</strong></p> <p>HTTP version 1.0</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_HTTP_VERSION_1_0 0x0100			
</span></code></pre></div></div> <h3 id="sys_wss_http_version_1_1"> <a href="#sys_wss_http_version_1_1" aria-labelledby="sys_wss_http_version_1_1" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_HTTP_VERSION_1_1 </h3> <p><strong>Summary</strong></p> <p>HTTP version 1.1</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_HTTP_VERSION_1_1 0x0101		
</span></code></pre></div></div> <h3 id="sys_wss_status_code_len"> <a href="#sys_wss_status_code_len" aria-labelledby="sys_wss_status_code_len" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_STATUS_CODE_LEN </h3> <p><strong>Summary</strong></p> <p>Closing Status code lenth as per RFC6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_STATUS_CODE_LEN 2	
</span></code></pre></div></div> <h3 id="sys_wss_guid"> <a href="#sys_wss_guid" aria-labelledby="sys_wss_guid" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_GUID </h3> <p><strong>Summary</strong></p> <p>WebSocket GUID as per Section 1.3 of RFC 6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define SYS_WSS_GUID "258EAFA5-E914-47DA-95CA-C5AB0DC85B11"
</span></code></pre></div></div> <h3 id="sys_wss_config"> <a href="#sys_wss_config" aria-labelledby="sys_wss_config" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_CONFIG </h3> <p><strong>Summary</strong></p> <p>Used for passing on the configuration(port and TLS) for socket connection to be used for Web Socket Server connections.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port</span><span class="p">;</span>             <span class="c1">//port used by the WSS service.</span>
        <span class="n">bool</span> <span class="n">isTLSEnabled</span><span class="p">;</span>             <span class="c1">//TLS enabled?</span>
<span class="p">}</span> <span class="n">SYS_WSS_CONFIG</span><span class="p">;</span>

</code></pre></div></div> <h3 id="sys_wss_handshake_ctxt"> <a href="#sys_wss_handshake_ctxt" aria-labelledby="sys_wss_handshake_ctxt" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_HANDSHAKE_CTXT </h3> <p><strong>Summary</strong></p> <p>Stores the client/server handshake information.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="kt">uint16_t</span> <span class="n">http_version</span><span class="p">;</span>    <span class="c1">//HTTP version specified in the client handshake</span>
        <span class="kt">uint8_t</span> <span class="n">ws_version</span><span class="p">;</span>       <span class="c1">//Web socket version specified in the client handshake</span>
        <span class="n">bool</span> <span class="n">upgradeWebSocket</span><span class="p">;</span>    <span class="c1">//If upgrade websocket field specified in the client handshake</span>
        <span class="n">bool</span> <span class="n">origin</span><span class="p">;</span>              <span class="c1">//If origin field specified in the client handshake</span>
        <span class="n">bool</span> <span class="n">connectionUpgrade</span><span class="p">;</span>   <span class="c1">//If upgrade field present in the client handshake</span>
        <span class="n">bool</span> <span class="n">iskey</span><span class="p">;</span>             <span class="c1">//If websocket key is present in the client handshake</span>
        <span class="kt">char</span> <span class="n">clientKey</span><span class="p">[</span><span class="n">SYS_WSS_CLIENT_KEY_SIZE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span> <span class="c1">//Client key</span>
        <span class="kt">char</span> <span class="n">serverKey</span><span class="p">[</span><span class="n">SYS_WSS_SERVER_KEY_SIZE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span> <span class="c1">// Server key</span>
<span class="p">}</span> <span class="n">SYS_WSS_HANDSHAKE_CTXT</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_frame_header"> <a href="#sys_wss_frame_header" aria-labelledby="sys_wss_frame_header" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_FRAME_HEADER </h3> <p><strong>Summary</strong></p> <p>Identifies the frame format as defined by RFC6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="n">__PACKED_STRUCT</span> <span class="p">{</span>
        <span class="kt">uint8_t</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>      <span class="c1">//byte0, Opcode as defined by RFC6455</span>
        <span class="kt">uint8_t</span> <span class="n">resvd</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>       <span class="c1">//Reserved bits as defined by RFC6455</span>
        <span class="kt">uint8_t</span> <span class="n">fin</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>         <span class="c1">// fin bit as defined by RFC6455.Indicates that this is the final fragment in a message.0=first frame, 1= final frame</span>
        <span class="kt">uint8_t</span> <span class="n">payloadLen</span> <span class="o">:</span> <span class="mi">7</span><span class="p">;</span>  <span class="c1">//byte1, Payload length as defined by the RFC6455.It can be 7 bits, 7+16 bits, or 7+64 bits.</span>
        <span class="kt">uint8_t</span> <span class="n">mask</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>        <span class="c1">//Defines whether the "Payload data" is masked. 1=masked,0=not masked</span>
        <span class="kt">uint8_t</span> <span class="n">extPayloadLen</span><span class="p">[];</span> <span class="c1">//byte2,Extended payload length, I can be 16 or 64 bits based on the payloadLen</span>
<span class="p">}</span> <span class="n">SYS_WSS_FRAME_HEADER</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_rxdata"> <a href="#sys_wss_rxdata" aria-labelledby="sys_wss_rxdata" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_RXDATA </h3> <p><strong>Summary</strong></p> <p>Stores the data received from the client along with the datalength..</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">data</span><span class="p">;</span>               <span class="c1">//Pointer to the rx data buffer</span>
        <span class="kt">int64_t</span> <span class="n">datalen</span><span class="p">;</span>              <span class="c1">//length of the received data</span>
<span class="p">}</span> <span class="n">SYS_WSS_RXDATA</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_result"> <a href="#sys_wss_result" aria-labelledby="sys_wss_result" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_RESULT </h3> <p><strong>Summary</strong></p> <p>Identifies the return values for the WSS system service APIs.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
        <span class="n">SYS_WSS_SUCCESS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>                    <span class="c1">//successful execution</span>
        <span class="n">SYS_WSS_FAILURE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>                    <span class="c1">//Failure in execution</span>
        <span class="n">SYS_WSS_ERROR_INVALID_REQUEST</span><span class="p">,</span>          <span class="c1">//Failure in validation of the client handshake</span>
        <span class="n">SYS_WSS_ERROR_INVALID_KEY</span><span class="p">,</span>              <span class="c1">//Failure in validation of the client handshake</span>
        <span class="n">SYS_WSS_ERROR_INVALID_FRAME</span><span class="p">,</span>            <span class="c1">//Failure in validation of the client request</span>
<span class="p">}</span> <span class="n">SYS_WSS_RESULT</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_state"> <a href="#sys_wss_state" aria-labelledby="sys_wss_state" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_STATE </h3> <p><strong>Summary</strong></p> <p>Identifies the state machine values of the WSS system service.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
        <span class="n">SYS_WSS_STATE_CONNECTING</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>            <span class="c1">//Handles the processing of the client opening handshake</span>
        <span class="n">SYS_WSS_STATE_CONNECTED</span><span class="p">,</span>                 <span class="c1">//State where the data exchanges happen</span>
        <span class="n">SYS_WSS_STATE_CLOSING</span><span class="p">,</span>                   <span class="c1">//Handles the processing of the client closing handshake</span>
        <span class="n">SYS_WSS_STATE_CLOSED</span><span class="p">,</span>                    <span class="c1">//Connection closed, the initial state of the service </span>
<span class="p">}</span> <span class="n">SYS_WSS_STATE</span><span class="p">;</span>
    
</code></pre></div></div> <h3 id="sys_wss_frame"> <a href="#sys_wss_frame" aria-labelledby="sys_wss_frame" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_FRAME </h3> <p><strong>Summary</strong></p> <p>Identifies the frame types as defined by the RFC6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
        <span class="n">SYS_WSS_FRAME_CONTINUATION</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>        <span class="c1">//Continuation frame      - Data frame with opcode 0</span>
        <span class="n">SYS_WSS_FRAME_TEXT</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>                <span class="c1">//Text data frame         - Data frame with opcode 1</span>
        <span class="n">SYS_WSS_FRAME_BINARY</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>              <span class="c1">//Binary data frame       - Data frame with opcode 2</span>
        <span class="n">SYS_WSS_FRAME_CLOSE</span> <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>               <span class="c1">//Connection close frame  - Control frame with opcode 8</span>
        <span class="n">SYS_WSS_FRAME_PING</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>                <span class="c1">//Ping frame              - Ping frame with opcode 9</span>
        <span class="n">SYS_WSS_FRAME_PONG</span> <span class="o">=</span> <span class="mh">0x0A</span>                 <span class="c1">//Pong frame              - Pong frame with opcode 10</span>
<span class="p">}</span> <span class="n">SYS_WSS_FRAME</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_events"> <a href="#sys_wss_events" aria-labelledby="sys_wss_events" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_EVENTS </h3> <p><strong>Summary</strong></p> <p>Identifies the events reported to the application using the call back function.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
        <span class="n">SYS_WSS_EVENT_ERR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>                         <span class="c1">//Reports any error condition</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_CONNECTING</span><span class="p">,</span>             <span class="c1">//Reports the connection request from the client</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_CONNECTED</span><span class="p">,</span>              <span class="c1">//Reports connection completed status </span>
        <span class="n">SYS_WSS_EVENT_CLIENT_BIN_DATA_RX</span><span class="p">,</span>            <span class="c1">//Reports the reception of a binary data</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_TXT_DATA_RX</span><span class="p">,</span>            <span class="c1">//Reports the reception of a text data</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_PING_RX</span><span class="p">,</span>                <span class="c1">//Report the reception of a ping message</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_PONG_RX</span><span class="p">,</span>                <span class="c1">//Reports the reception of a pong message</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_CLOSE_FRAME_RX</span><span class="p">,</span>         <span class="c1">//Reports the reception of a closing handshake</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_CLOSING</span><span class="p">,</span>                <span class="c1">//Reports the connection closing</span>
        <span class="n">SYS_WSS_EVENT_CLIENT_CLOSED</span><span class="p">,</span>                 <span class="c1">//Reports the connection closure completion</span>
        <span class="n">SYS_WSS_EVENT_ERR_INVALID_FRAME</span><span class="p">,</span>             <span class="c1">//Reports the reception of an invalid frame                     </span>
        <span class="n">SYS_WSS_EVENT_CLIENT_TIMEOUT</span><span class="p">,</span>                <span class="c1">//Reports the client connection timeout</span>
<span class="p">}</span> <span class="n">SYS_WSS_EVENTS</span><span class="p">;</span>
</code></pre></div></div> <h3 id="sys_wss_status_code"> <a href="#sys_wss_status_code" aria-labelledby="sys_wss_status_code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_STATUS_CODE </h3> <p><strong>Summary</strong></p> <p>Identifies status code to be used in the closing handshake as defined by RF6455.</p> <p><strong>Remarks</strong></p> <p>None.</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
        <span class="n">SYS_WSS_STATUS_CODE_NORMAL_CLOSURE</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_GOING_AWAY</span> <span class="o">=</span> <span class="mi">1001</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_PROTOCOL_ERROR</span> <span class="o">=</span> <span class="mi">1002</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_UNSUPPORTED_DATA</span> <span class="o">=</span> <span class="mi">1003</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_NO_STATUS_RCVD</span> <span class="o">=</span> <span class="mi">1005</span><span class="p">,</span>   <span class="c1">//reserved code, Not to be used in the close frames</span>
        <span class="n">SYS_WSS_STATUS_CODE_ABNORMAL_CLOSURE</span> <span class="o">=</span> <span class="mi">1006</span><span class="p">,</span> <span class="c1">//reserved, Not to be used in the close frames</span>
        <span class="n">SYS_WSS_STATUS_CODE_INVALID_PAYLOAD_DATA</span> <span class="o">=</span> <span class="mi">1007</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_POLICY_VIOLATION</span> <span class="o">=</span> <span class="mi">1008</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_MESSAGE_TOO_BIG</span> <span class="o">=</span> <span class="mi">1009</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_MANDATORY_EXT</span> <span class="o">=</span> <span class="mi">1010</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_INTERNAL_ERROR</span> <span class="o">=</span> <span class="mi">1011</span><span class="p">,</span>
        <span class="n">SYS_WSS_STATUS_CODE_TLS_HANDSHAKE</span> <span class="o">=</span> <span class="mi">1015</span>    <span class="c1">// reserved code, Not to be used in the close frames</span>
<span class="p">}</span> <span class="n">SYS_WSS_STATUS_CODE</span><span class="p">;</span>
</code></pre></div></div> <h2 id="initialization-functions"> <a href="#initialization-functions" aria-labelledby="initialization-functions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initialization functions </h2> <h3 id="sys_wss_initialize"> <a href="#sys_wss_initialize" aria-labelledby="sys_wss_initialize" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_Initialize </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_MODULE_OBJ</span> <span class="n">SYS_WSS_Initialize</span><span class="p">(</span><span class="n">SYS_WSS_CONFIG</span> <span class="o">*</span><span class="n">config</span><span class="p">,</span> <span class="n">SYS_WSS_CALLBACK</span> <span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cookie</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>Returns SYS_MODULE_OBJ after the successful initialization of data structures of the WSS service.</p> <p><strong>Description</strong></p> <p>This function is used for initializing the data structures of the WSS service and is called from within the System Task.This function can be called by the application with required arguments.</p> <p><strong>Returns</strong></p> <p>Returns the address of an array of SYS_MODULE_OBJ which will have the initialization data for all clients.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sysWSS_obj</span> <span class="o">=</span> <span class="n">SYS_WSS_Initialize</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span> <span class="c1">//Default config, callback and cookie will be taken</span>
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>If the WSS system service is enabled using MHC, then auto generated code will take care of WSS System Service initialization. But the user need to register for the callback function independently.</p> <h3 id="sys_wss_deinitialize"> <a href="#sys_wss_deinitialize" aria-labelledby="sys_wss_deinitialize" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_Deinitialize </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">SYS_WSS_Deinitialize</span><span class="p">()</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>Deinitialization of data structures of the WSS service</p> <p><strong>Description</strong></p> <p>This function is used for freeing the allocated data structures for the WSS service.This function can be called by the application with WSS service object handle.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_Deinitialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sysWSSObj</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>None</p> <h2 id="data-exchange-functions"> <a href="#data-exchange-functions" aria-labelledby="data-exchange-functions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Exchange functions </h2> <h3 id="sys_wss_sendmessage"> <a href="#sys_wss_sendmessage" aria-labelledby="sys_wss_sendmessage" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_sendMessage </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="n">SYS_WSS_sendMessage</span><span class="p">(</span><span class="n">bool</span> <span class="n">fin</span><span class="p">,</span> <span class="n">SYS_WSS_FRAME</span> <span class="n">type</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">dataLen</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">clientIndex</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>Sends a message to the client indicated by the parameter clientIndex. Returns success/failure after sending the message.</p> <p><strong>Description</strong></p> <p>This API sends the data provided in the web socket frame format to the client indicated by the parameter clientIndex.</p> <p><strong>Precondition</strong></p> <p>The connection state of the client indicated by the clientIndex (g_wssSrvcObj[clientIndex].wssState) shall be SYS_WSS_STATE_CONNECTED.</p> <p><strong>Parameters</strong></p> <p>fin - Fin value as defined by RFC6455 to indicate if the frame is final or continuation frame.<br /> 0 = Indicates more messages to follow, the current frame is a continuation frame<br /> 1 = Indicates the final frame of the message.<br /></p> <p>type - The data type of the frame , TEXT or BINARY<br /></p> <p>*data - A pointer to buffer with the data to be sent<br /></p> <p>dataLen - Length of the data.<br /></p> <p>clientIndex - The clientID, for identifying the client which caused the event to occur.<br /></p> <p><strong>Returns</strong></p> <p>SYS_WSS_RESULT.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="n">res</span><span class="p">;</span>      
<span class="n">res</span> <span class="o">=</span>  <span class="n">SYS_WSS_sendMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">SYS_WSS_FRAME_TEXT</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span><span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span> <span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">datalen</span><span class="p">,</span> <span class="n">clientIndex</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>None.</p> <h3 id="sys_wss_register_callback"> <a href="#sys_wss_register_callback" aria-labelledby="sys_wss_register_callback" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_register_callback </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="nf">SYS_WSS_register_callback</span><span class="p">(</span><span class="n">SYS_WSS_CALLBACK</span> <span class="n">userCallback</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">cookie</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>API for registering the application callback function with the WSS service. Returns success after successful registration of the callback function.</p> <p><strong>Description</strong></p> <p>Callback functions may be registered by clients of the WSS service during the initialization using this API.</p> <p><strong>Precondition</strong></p> <p>None.</p> <p><strong>Parameters</strong></p> <p>userCallback - A function pointer to the application call back API.<br /></p> <p>event - Data (if any) related to the Event<br /></p> <p>cookie - A context value, returned untouched to the client when the callback occurs.<br /></p> <p><strong>Returns</strong></p> <p>SYS_WSS_RESULT.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kt">void</span> <span class="nf">wss_user_callback</span><span class="p">(</span><span class="n">SYS_WSS_EVENTS</span> <span class="n">event</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">clientIndex</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cookie</span><span class="p">)</span> <span class="p">{</span>

        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_CONNECTING</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_CONNECTING</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_CONNECTED</span><span class="p">:</span>
            <span class="p">{</span>

                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_CONNECTED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>

                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_BIN_DATA_RX</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_BIN_DATA_RX</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span><span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">datalen</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"%X "</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span><span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
                <span class="c1">//echo server.</span>
                <span class="n">SYS_WSS_sendMessage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">SYS_WSS_FRAME_TEXT</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span><span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span> <span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">datalen</span><span class="p">,</span> <span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_TXT_DATA_RX</span><span class="p">:</span>
            <span class="p">{</span>

                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_TXT_DATA_RX</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span> <span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">datalen</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"%c"</span><span class="p">,</span> <span class="p">((</span><span class="n">SYS_WSS_RXDATA</span><span class="o">*</span><span class="p">)</span> <span class="n">data</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
                <span class="c1">// Enable the below statement for echo server</span>
                <span class="c1">//SYS_WSS_sendMessage(1, SYS_WSS_FRAME_TEXT, ((SYS_WSS_RXDATA*) data)-&gt;data, ((SYS_WSS_RXDATA *) data)-&gt;datalen, clientIndex);</span>

                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_CLOSING</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_CLOSING</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_CLOSED</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_CLOSED</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_ERR_INVALID_FRAME</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_ERR_INVALID_FRAME</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_PING_RX</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_PING_RX</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_PONG_RX</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_PONG_RX</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_CLOSE_FRAME_RX</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_CLOSE_FRAME_RX</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_ERR</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_ERR</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">case</span> <span class="n">SYS_WSS_EVENT_CLIENT_TIMEOUT</span><span class="p">:</span>
            <span class="p">{</span>
                <span class="n">SYS_CONSOLE_PRINT</span><span class="p">(</span><span class="s">"wssSysServCallback(%d): SYS_WSS_EVENT_CLIENT_TIMEOUT</span><span class="se">\r\n</span><span class="s">"</span><span class="p">,</span><span class="n">clientIndex</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>  
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>None.</p> <h3 id="sys_wss_closeconnection"> <a href="#sys_wss_closeconnection" aria-labelledby="sys_wss_closeconnection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_CloseConnection </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="nf">SYS_WSS_CloseConnection</span><span class="p">(</span><span class="n">SYS_WSS_STATUS_CODE</span> <span class="n">code</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">dataLen</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">clientIndex</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>Closes the Web Socket connection to the client indicated by the parameter clientIndex.</p> <p><strong>Description</strong></p> <p>This API initiate the closing handshake with the status code provided and and terminate the Web Socket connection to the client indicated by the parameter clientIndex.</p> <p><strong>Precondition</strong></p> <p>The connection state of the client indicated by the clientIndex (g_wssSrvcObj[clientIndex].wssState) shall be SYS_WSS_STATE_CONNECTED.</p> <p><strong>Parameters</strong></p> <p>code - Status code to be send to the client in the closing handshake(SYS_WSS_STATUS_CODE) .<br /></p> <p>*data - A pointer to buffer with the data (if any) related to the connection closure<br /></p> <p>dataLen - Length of the data <br /></p> <p>clientIndex - The clientID, for identifying the client which caused the event to occur.<br /></p> <p><strong>Returns</strong></p> <p>None.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="n">res</span><span class="p">;</span>
<span class="n">res</span> <span class="o">=</span><span class="n">SYS_WSS_CloseConnection</span><span class="p">(</span><span class="n">SYS_WSS_STATUS_CODE_UNSUPPORTED_DATA</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>None.</p> <h3 id="sys_wss_pingclient"> <a href="#sys_wss_pingclient" aria-labelledby="sys_wss_pingclient" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SYS_WSS_PingClient </h3> <p><strong>Function</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="nf">SYS_WSS_PingClient</span><span class="p">(</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">dataLen</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">clientIndex</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Summary</strong></p> <p>Sends a ping message to the client indicated by the parameter clientIndex.</p> <p><strong>Description</strong></p> <p>This API sends a ping message to the client indicated by the parameter clientIndex.</p> <p><strong>Precondition</strong></p> <p>The connection state of the client indicated by the clientIndex (g_wssSrvcObj[clientIndex].wssState) shall be SYS_WSS_STATE_CONNECTED.</p> <p><strong>Parameters</strong></p> <p>*data - A pointer to buffer with the data (if any).<br /></p> <p>dataLen - Length of the data <br /></p> <p>clientIndex - The clientID, for identifying the client which caused the event to occur.<br /></p> <p><strong>Returns</strong></p> <p>SYS_WSS_RESULT.</p> <p><strong>Example</strong></p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SYS_WSS_RESULT</span> <span class="n">res</span><span class="p">;</span>
<span class="n">res</span> <span class="o">=</span><span class="n">SYS_WSS_PingClient</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span> <span class="n">dataLen</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div></div> <p><strong>Remarks</strong></p> <p>None.</p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
