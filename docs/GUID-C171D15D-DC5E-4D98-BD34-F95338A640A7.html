<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="When user enables the auto connect features using Wi-Fi service system MHC menu, the default auto connect retry count is configured to 5. User can modify the macro MAX_AUTO_CONNECT_RETRY in generated ..."/><meta name="copyright" content="(C) Copyright 2024"/><meta name="generator" content="DITA-OT"/><title>1.4.4 Wi-Fi System Service Developer's Guide</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /D:\InfoShare\Data\Publish\Data\4z4pndcjubb\work\temp?&gt;&lt;?workdir-uri file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/temp/?&gt;&lt;?path2project?&gt;&lt;?path2project-uri ./?&gt;&lt;?path2rootmap-uri ./?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;wi-fi-system-service-developers-guide&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;topic:1;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;title:1;184:15&#34;&gt;Wi-Fi System Service Developer's Guide&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;body:1;184:15&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;GUID-467967A5-7B76-4A1E-A884-DAA8F4B7AA2B&#34; xtrc=&#34;topicref:22;6:3385&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-B32A01DC-88D9-4514-B375-C0723D6C7453.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-6EA44F54-91D8-42F6-A226-793CA7D06695.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;6:99&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-B32A01DC-88D9-4514-B375-C0723D6C7453.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;Wi-Fi System Service&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;code-modificationimplementation-guide-for-common-use-cases&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;topic:2;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;title:2;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;b:1;184:15&#34;&gt;Code modification/implementation guide for common use cases&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;body:2;184:15&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;wi-fi-system-service-auto-connect&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;topic:3;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;title:3;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;b:2;184:15&#34;&gt;Wi-Fi System Service Auto Connect&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;body:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;p:1;184:15&#34;&gt;When user enables the auto connect features using Wi-Fi service system MHC menu, the default auto connect retry count is configured to 5. User can modify the macro MAX_AUTO_CONNECT_RETRY in generated file &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;codeph:1;184:15&#34;&gt;sys_wifi.c&lt;/codeph&gt; as per their choice. PIC32MZW1 device stops the connection request to AP after retry count reaches to zero and successful connections with AP is not established.&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;C&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;codeblock:1;184:15&#34;&gt;/* Wi-Fi STA Mode, maximum auto connect retry */ #define MAX_AUTO_CONNECT_RETRY 5&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;wi-fi-system-service-scan-example&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;topic:4;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;title:4;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;b:3;184:15&#34;&gt;Wi-Fi System Service Scan Example&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;body:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;p:2;184:15&#34;&gt;Wi-Fi System Service support scan functinality both in STA and AP mode. In case, user want to overwrite MHC configuration of the scan parameter,please find the below snippet code that need to be added in the application.&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;C&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;codeblock:2;184:15&#34;&gt;#include &#34;wdrv_pic32mzw_bssfind.h&#34; APP_DATA appData; SYS_WIFI_SCAN_CONFIG scanConfig; /* Wi-Fi driver triggers a callback to update each Scan result one-by-one*/ bool APP_ScanHandler (DRV_HANDLE handle, uint8_t index, uint8_t ofTotal, WDRV_PIC32MZW_BSS_INFO *pBSSInfo) { if (0 == ofTotal) { SYS_CONSOLE_MESSAGE(&#34;No AP Found... Rescan\r\n&#34;); } else { if (index == 1) { SYS_CONSOLE_PRINT(&#34;Scan Results: #%02d\r\n&#34;, ofTotal); } SYS_CONSOLE_PRINT(&#34;[%02d] %s\r\n&#34;, index, pBSSInfo-&amp;gt;ctx.ssid.name); } // return true to receive further results; otherwise return false if desired return true; } void APP_Initialize(void) { appData.state = APP_STATE_INIT; } void APP_Tasks(void) { SYS_WIFI_RESULT res; SYS_WIFI_STATUS wifiStatus; switch (appData.state) { case APP_STATE_INIT: { appData.state = APP_STATE_TRIGGER_SCAN; break; } case APP_STATE_TRIGGER_SCAN: { wifiStatus = SYS_WIFI_GetStatus (sysObj.syswifi); if (wifiStatus &amp;gt; SYS_WIFI_STATUS_WDRV_OPEN_REQ) { memset(&amp;amp;scanConfig, 0, sizeof(scanConfig)); res = SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_GETSCANCONFIG, &amp;amp;scanConfig, sizeof(SYS_WIFI_SCAN_CONFIG)); if(SYS_WIFI_SUCCESS == res) { //Received the wifiSrvcScanConfig data char myAPlist[] = &#34;&#34;; // e.g. &#34;myAP*OPENAP*Hello World!&#34; char delimiter = '*'; scanConfig.channel = 0; scanConfig.mode = SYS_WIFI_SCAN_MODE_ACTIVE; scanConfig.pSsidList = myAPlist; scanConfig.delimChar = delimiter; scanConfig.pNotifyCallback = (void *)APP_ScanHandler; scanConfig.matchMode = WDRV_PIC32MZW_SCAN_MATCH_MODE_FIND_ALL; SYS_CONSOLE_PRINT(&#34;\r\nStarting Custom Scan ...\r\n&#34;); res = SYS_WIFI_CtrlMsg(sysObj.syswifi,SYS_WIFI_SCANREQ,&amp;amp;scanConfig,sizeof(SYS_WIFI_SCAN_CONFIG)); if(SYS_WIFI_SUCCESS != res) { SYS_CONSOLE_PRINT(&#34;Error Starting scan: %d\r\n&#34;, res); appData.state = APP_STATE_ERROR; break; } appData.state = APP_STATE_DONE; } else { SYS_CONSOLE_PRINT(&#34;Error retrieving scan config: %d\r\n&#34;, res); appData.state = APP_STATE_ERROR; } } break; } case APP_STATE_DONE: { // wait for custom scan to complete and do nothing later break; } case APP_STATE_ERROR: { break; } default: { break; } } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;p:3;184:15&#34;&gt;User can initiate the Scan request with default Wi-Fi System service MHC menu configuration with below code snippet. &lt;image class=&#34;- topic/image &#34; href=&#34;GUID-9EA32460-F0D2-41DD-BE01-A04F171A5154-low.png&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;image:1;184:15&#34; dita-ot:image-width=&#34;609&#34; dita-ot:image-height=&#34;467&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;alt:1;184:15&#34;&gt;Wi-Fi_service_SCAN_MHC&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;C&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;codeblock:3;184:15&#34;&gt;SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_SCANREQ, NULL, 0);&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;how-to-disconnect-connected-sta-in-ap-mode-using-wi-fi-system-service&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;topic:5;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;title:5;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;b:4;184:15&#34;&gt;How to Disconnect Connected STA in AP Mode Using Wi-Fi System Service&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;body:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;p:4;184:15&#34;&gt;Please see the code snippet below for reference.&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;C&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md&#34; xtrc=&#34;codeblock:4;184:15&#34;&gt;#include &#34;app.h&#34; #include &#34;definitions.h&#34; APP_DATA appData; static SYS_WIFI_CONFIG wificonfig; void WiFiServCallback(uint32_t event, void * data, void *cookie) { IPV4_ADDR *IPAddr; switch (event) { case SYS_WIFI_CONNECT: { IPAddr = (IPV4_ADDR *) data; if (SYS_WIFI_STA == wificonfig.mode) { SYS_CONSOLE_PRINT(&#34;Connected to AP. Got IP address = %d.%d.%d.%d \r\n&#34;, IPAddr-&amp;gt;v[0], IPAddr-&amp;gt;v[1], IPAddr-&amp;gt;v[2], IPAddr-&amp;gt;v[3]); } else { SYS_WIFI_STA_APP_INFO *psStaConnInfo = (SYS_WIFI_STA_APP_INFO *)data; SYS_CONSOLE_PRINT(&#34;STA Connected to AP. Got IP address = %d.%d.%d.%d \r\n&#34;, psStaConnInfo-&amp;gt;ipAddr.v[0], psStaConnInfo-&amp;gt;ipAddr.v[1], psStaConnInfo-&amp;gt;ipAddr.v[2], psStaConnInfo-&amp;gt;ipAddr.v[3]); SYS_CONSOLE_PRINT(&#34;STA Connected to AP. Got MAC address = %x:%x:%x:%x:%x:%x \r\n&#34;, psStaConnInfo-&amp;gt;macAddr[0], psStaConnInfo-&amp;gt;macAddr[1], psStaConnInfo-&amp;gt;macAddr[2], psStaConnInfo-&amp;gt;macAddr[3], psStaConnInfo-&amp;gt;macAddr[4], psStaConnInfo-&amp;gt;macAddr[5]); SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_DISCONNECT, psStaConnInfo-&amp;gt;macAddr, 6); } break; } case SYS_WIFI_DISCONNECT: { SYS_CONSOLE_PRINT(&#34;Device DISCONNECTED \r\n&#34;); break; } case SYS_WIFI_PROVCONFIG: { memcpy(&amp;amp;wificonfig,data,sizeof(SYS_WIFI_CONFIG)); SYS_CONSOLE_PRINT(&#34;%s:%d Received Provisioning Data : \r\n Device mode=%s \r\n&#34;, __func__, __LINE__, (wificonfig.mode == SYS_WIFI_STA) ? &#34;STA&#34; : &#34;AP&#34;); if (SYS_WIFI_STA == wificonfig.mode) { SYS_CONSOLE_PRINT(&#34; ssid=%s password=%s \r\n&#34;,wificonfig.staConfig.ssid,wificonfig.staConfig.psk); } else if (SYS_WIFI_AP == wificonfig.mode) { SYS_CONSOLE_PRINT(&#34; ssid=%s password=%s \r\n&#34;,wificonfig.apConfig.ssid,wificonfig.apConfig.psk); } break; } } } void APP_Initialize(void) { appData.state = APP_STATE_INIT; } void APP_Tasks(void) { switch (appData.state) { case APP_STATE_INIT: { SYS_CONSOLE_PRINT(&#34;Application: wifi_easy_config \r\n&#34;); SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_REGCALLBACK, WiFiServCallback, sizeof (uint8_t *)); appData.state = APP_STATE_GETCONFIG; break; } case APP_STATE_GETCONFIG: { if(SYS_WIFI_SUCCESS == SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_GETWIFICONFIG, &amp;amp;wificonfig, sizeof(SYS_WIFI_CONFIG))) { SYS_CONSOLE_PRINT(&#34;%s:%d Device mode=%s \r\n&#34;, __func__, __LINE__, (wificonfig.mode == SYS_WIFI_STA) ? &#34;STA&#34; : &#34;AP&#34;); appData.state = APP_STATE_SERVICE_TASKS; } break; } case APP_STATE_SERVICE_TASKS: { break; } default: { break; } } }&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.md"/><meta name="wh-out-relpath" content="GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body id="wi-fi-system-service-developers-guide" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="MPLAB Harmony PIC32MZW1/WFI32 wireless system services &#xA;    "/></a>
                    <div class=" wh_publication_title "><a href="index.html">MPLAB Harmony PIC32MZW1/WFI32 wireless system services 
    </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services"><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div></li><li><div class="topicref" data-id="wi-fi-system-service"><div class="title"><a href="GUID-6EA44F54-91D8-42F6-A226-793CA7D06695.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4</ph>
Wi-Fi System Service</a></div></div></li><li class="active"><div class="topicref" data-id="wi-fi-system-service-developers-guide"><div class="title"><a href="GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4.4</ph>
Wi-Fi System Service Developer's Guide</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            <div class="row" style="margin-top: -1em;"><div class="col-lg-7 col-md-7 col-sm-12 offset-lg-3 offset-md-3 text-right border-bottom mb-1"><h2 class="text-dark header_title">
    </h2></div></div>
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="true"><div data-tocid="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11" class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html" id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="app-debug-system-service-d1416e19" class="topicref" data-id="app-debug-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action app-debug-system-service-d1416e19-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-172B28B0-8A47-4C93-8023-8886A08BCD06.html" id="app-debug-system-service-d1416e19-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
App Debug System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="mqtt-system-service-d1416e204" class="topicref" data-id="mqtt-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action mqtt-system-service-d1416e204-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6D4A7590-A5FE-418D-8A39-4F13DF7618BD.html" id="mqtt-system-service-d1416e204-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
MQTT System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="net-system-service-d1416e413" class="topicref" data-id="net-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action net-system-service-d1416e413-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-F15AF9B8-740F-41C4-BFC2-850D793F858B.html" id="net-system-service-d1416e413-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.3</ph>
Net System Service</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="wi-fi-system-service-d1416e695" class="topicref" data-id="wi-fi-system-service" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action wi-fi-system-service-d1416e695-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6EA44F54-91D8-42F6-A226-793CA7D06695.html" id="wi-fi-system-service-d1416e695-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4</ph>
Wi-Fi System Service</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="wi-fi-system-service-usage-d1416e703" class="topicref" data-id="wi-fi-system-service-usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-81C737BC-9E73-407C-ACAC-5B6795B77394.html" id="wi-fi-system-service-usage-d1416e703-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4.1</ph>
Wi-Fi System Service Usage</a></div></div></li><li role="treeitem"><div data-tocid="wi-fi-system-service-configuration-d1416e711" class="topicref" data-id="wi-fi-system-service-configuration" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-B9CCAC68-A8F4-4EDA-85E0-729986577DA6.html" id="wi-fi-system-service-configuration-d1416e711-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4.2</ph>
Wi-Fi System Service Configuration</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-system-service-interface-d1416e719" class="topicref" data-id="wi-fi-system-service-interface" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-system-service-interface-d1416e719-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-B9C73D51-5039-4573-A452-176603C18703.html" id="wi-fi-system-service-interface-d1416e719-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4.3</ph>
Wi-Fi System Service Interface</a></div></div></li><li role="treeitem" class="active"><div data-tocid="wi-fi-system-service-developers-guide-d1416e864" class="topicref" data-id="wi-fi-system-service-developers-guide" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-C171D15D-DC5E-4D98-BD34-F95338A640A7.html" id="wi-fi-system-service-developers-guide-d1416e864-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4.4</ph>
Wi-Fi System Service Developer's Guide</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-provisioning-system-service-d1416e872" class="topicref" data-id="wi-fi-provisioning-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-provisioning-system-service-d1416e872-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6C1BB28E-7F9B-4582-8E74-E301F89C58AC.html" id="wi-fi-provisioning-system-service-d1416e872-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.5</ph>
Wi-Fi provisioning System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="over-the-air-ota-firmware-update-system-service-d1416e1025" class="topicref" data-id="over-the-air-ota-firmware-update-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action over-the-air-ota-firmware-update-system-service-d1416e1025-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-AF87F0BB-E319-4436-A302-357BFA7E193E.html" id="over-the-air-ota-firmware-update-system-service-d1416e1025-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6</ph>
Over The Air (OTA) firmware update System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="web-socket-server-wss-system-service-d1416e1154" class="topicref" data-id="web-socket-server-wss-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action web-socket-server-wss-system-service-d1416e1154-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-097A4209-8474-480E-A141-6C8FC60A7671.html" id="web-socket-server-wss-system-service-d1416e1154-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.7</ph>
Web Socket Server (WSS) System Service</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388" class="topicref backmatter backmatter_parent" data-id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B.html" id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link">Microchip Information</a></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1" style="">1.4.4 Wi-Fi System Service Developer's Guide</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="code-modificationimplementation-guide-for-common-use-cases"><h2 class="- topic/title title topictitle2" id="ariaid-title2" style=""> <strong class="+ topic/ph hi-d/b ph b">Code modification/implementation guide for common use cases</strong></h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="wi-fi-system-service-auto-connect"><h3 class="- topic/title title topictitle3" id="ariaid-title3" style=""> <strong class="+ topic/ph hi-d/b ph b">Wi-Fi System Service Auto Connect</strong></h3><div class="- topic/body body"><p class="- topic/p p">When user enables the auto connect features using Wi-Fi service system MHC menu, the default auto connect retry count is configured to 5. User can modify the macro MAX_AUTO_CONNECT_RETRY in generated file <code class="+ topic/ph pr-d/codeph ph codeph">sys_wifi.c</code> as per their choice. PIC32MZW1 device stops the connection request to AP after retry count reaches to zero and successful connections with AP is not established.</p><pre class="+ topic/pre pr-d/codeblock pre codeblock C"><code>/* Wi-Fi STA Mode, maximum auto connect retry */
#define MAX_AUTO_CONNECT_RETRY                5</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="wi-fi-system-service-scan-example"><h3 class="- topic/title title topictitle3" id="ariaid-title4" style=""> <strong class="+ topic/ph hi-d/b ph b">Wi-Fi System Service Scan Example</strong></h3><div class="- topic/body body"><p class="- topic/p p">Wi-Fi System Service support scan functinality both in STA and AP mode.
In case, user want to overwrite MHC configuration of the scan parameter,please find the below snippet code that need to be added in the application.</p><pre class="+ topic/pre pr-d/codeblock pre codeblock C"><code>#include "wdrv_pic32mzw_bssfind.h"

APP_DATA             appData;
SYS_WIFI_SCAN_CONFIG scanConfig;

/* Wi-Fi driver triggers a callback to update each Scan result one-by-one*/
bool APP_ScanHandler (DRV_HANDLE handle, uint8_t index, uint8_t ofTotal, WDRV_PIC32MZW_BSS_INFO *pBSSInfo)
{
    if (0 == ofTotal) 
    {
        SYS_CONSOLE_MESSAGE("No AP Found... Rescan\r\n");
    } 
    else 
    {
        if (index == 1)
        {
            SYS_CONSOLE_PRINT("Scan Results: #%02d\r\n", ofTotal);
        }
        SYS_CONSOLE_PRINT("[%02d] %s\r\n", index, pBSSInfo-&gt;ctx.ssid.name);
    }
    // return true to receive further results; otherwise return false if desired
    return true;
}

void APP_Initialize(void) {
    appData.state = APP_STATE_INIT;
}

void APP_Tasks(void) {
    
    SYS_WIFI_RESULT res;
    SYS_WIFI_STATUS wifiStatus;
    
    switch (appData.state) 
    {
        case APP_STATE_INIT:
        {
            appData.state = APP_STATE_TRIGGER_SCAN;
            break;
        }
        
        case APP_STATE_TRIGGER_SCAN:
        {
            wifiStatus = SYS_WIFI_GetStatus (sysObj.syswifi);
            if (wifiStatus &gt; SYS_WIFI_STATUS_WDRV_OPEN_REQ)
            {
                memset(&amp;scanConfig, 0, sizeof(scanConfig));
                res = SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_GETSCANCONFIG, &amp;scanConfig, sizeof(SYS_WIFI_SCAN_CONFIG));
                if(SYS_WIFI_SUCCESS == res)
                {
                    //Received the wifiSrvcScanConfig data
                    char myAPlist[] = ""; // e.g. "myAP*OPENAP*Hello World!"
                    char delimiter  = '*';
                    scanConfig.channel         = 0;
                    scanConfig.mode            = SYS_WIFI_SCAN_MODE_ACTIVE;
                    scanConfig.pSsidList       = myAPlist;
                    scanConfig.delimChar       = delimiter;
                    scanConfig.pNotifyCallback = (void *)APP_ScanHandler;
                    scanConfig.matchMode       = WDRV_PIC32MZW_SCAN_MATCH_MODE_FIND_ALL;
                    
                    SYS_CONSOLE_PRINT("\r\nStarting Custom Scan ...\r\n");
                    
                    res = SYS_WIFI_CtrlMsg(sysObj.syswifi,SYS_WIFI_SCANREQ,&amp;scanConfig,sizeof(SYS_WIFI_SCAN_CONFIG));
                    if(SYS_WIFI_SUCCESS != res)
                    {
                        SYS_CONSOLE_PRINT("Error Starting scan: %d\r\n", res);
                        appData.state = APP_STATE_ERROR;
                        break;
                    }
                    appData.state = APP_STATE_DONE;
                }
                else
                {
                    SYS_CONSOLE_PRINT("Error retrieving scan config: %d\r\n", res);
                    appData.state = APP_STATE_ERROR;
                }
            }
            
            break;
        }
        
        case APP_STATE_DONE:
        {
            // wait for custom scan to complete and do nothing later
            break;
        }
        
        case APP_STATE_ERROR:
        {
            break;
        }
        default:
        {
            break;
        }
    }
}</code></pre><p class="- topic/p p">User can initiate the Scan request with default Wi-Fi System service MHC menu configuration with below code snippet.
<div class=""><img class="- topic/image image" src="GUID-9EA32460-F0D2-41DD-BE01-A04F171A5154-low.png" alt="Wi-Fi_service_SCAN_MHC"/></div></p><pre class="+ topic/pre pr-d/codeblock pre codeblock C"><code>SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_SCANREQ, NULL, 0);</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="how-to-disconnect-connected-sta-in-ap-mode-using-wi-fi-system-service"><h3 class="- topic/title title topictitle3" id="ariaid-title5" style=""> <strong class="+ topic/ph hi-d/b ph b">How to Disconnect Connected STA in AP Mode Using Wi-Fi System Service</strong></h3><div class="- topic/body body"><p class="- topic/p p">Please see the code snippet below for reference.</p><pre class="+ topic/pre pr-d/codeblock pre codeblock C"><code>#include "app.h"
#include "definitions.h"

APP_DATA appData;
static SYS_WIFI_CONFIG wificonfig;

void WiFiServCallback(uint32_t event, void * data, void *cookie) 
{
    IPV4_ADDR *IPAddr;
    switch (event) 
    {
        case SYS_WIFI_CONNECT:
        {
            IPAddr = (IPV4_ADDR *) data;
            if (SYS_WIFI_STA == wificonfig.mode) 
            {
                SYS_CONSOLE_PRINT("Connected to AP. Got IP address = %d.%d.%d.%d \r\n", IPAddr-&gt;v[0], IPAddr-&gt;v[1], IPAddr-&gt;v[2], IPAddr-&gt;v[3]);
            } 
            else 
            {
                SYS_WIFI_STA_APP_INFO    *psStaConnInfo = (SYS_WIFI_STA_APP_INFO *)data;
                SYS_CONSOLE_PRINT("STA Connected to AP. Got IP address = %d.%d.%d.%d \r\n", 
                        psStaConnInfo-&gt;ipAddr.v[0], psStaConnInfo-&gt;ipAddr.v[1], psStaConnInfo-&gt;ipAddr.v[2], psStaConnInfo-&gt;ipAddr.v[3]);                
                SYS_CONSOLE_PRINT("STA Connected to AP. Got MAC address = %x:%x:%x:%x:%x:%x \r\n", 
                        psStaConnInfo-&gt;macAddr[0], psStaConnInfo-&gt;macAddr[1], psStaConnInfo-&gt;macAddr[2],
                        psStaConnInfo-&gt;macAddr[3], psStaConnInfo-&gt;macAddr[4], psStaConnInfo-&gt;macAddr[5]);
                SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_DISCONNECT, psStaConnInfo-&gt;macAddr, 6);
            }
            break;
        }
        case SYS_WIFI_DISCONNECT:
        {
            SYS_CONSOLE_PRINT("Device DISCONNECTED \r\n");
            break;
        }
        case SYS_WIFI_PROVCONFIG:
        {
            memcpy(&amp;wificonfig,data,sizeof(SYS_WIFI_CONFIG));
            SYS_CONSOLE_PRINT("%s:%d Received Provisioning Data : \r\n Device mode=%s \r\n", __func__, __LINE__, (wificonfig.mode == SYS_WIFI_STA) ? "STA" : "AP");
            if (SYS_WIFI_STA == wificonfig.mode) 
            {
                SYS_CONSOLE_PRINT(" ssid=%s password=%s \r\n",wificonfig.staConfig.ssid,wificonfig.staConfig.psk);
            } 
            else if (SYS_WIFI_AP == wificonfig.mode) 
            {
                SYS_CONSOLE_PRINT(" ssid=%s password=%s \r\n",wificonfig.apConfig.ssid,wificonfig.apConfig.psk);
            }            
            break;
        }
    }
}

void APP_Initialize(void) 
{
    appData.state = APP_STATE_INIT;
}

void APP_Tasks(void) 
{

    switch (appData.state) 
    {
        case APP_STATE_INIT:
        {
            SYS_CONSOLE_PRINT("Application: wifi_easy_config \r\n");
            SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_REGCALLBACK, WiFiServCallback, sizeof (uint8_t *));

            appData.state = APP_STATE_GETCONFIG;
            break;
        }
        case APP_STATE_GETCONFIG:
        {
            if(SYS_WIFI_SUCCESS == SYS_WIFI_CtrlMsg(sysObj.syswifi, SYS_WIFI_GETWIFICONFIG, &amp;wificonfig, sizeof(SYS_WIFI_CONFIG)))
            {
                SYS_CONSOLE_PRINT("%s:%d Device mode=%s \r\n", __func__, __LINE__, (wificonfig.mode == SYS_WIFI_STA) ? "STA" : "AP");
                appData.state = APP_STATE_SERVICE_TASKS;

            }            
            break;
        }
        case APP_STATE_SERVICE_TASKS:
        {
            break;
        }
        default:
        {
            break;
        }
    }
}</code></pre></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">On this page</div><ul><li class="topic-item"><a href="#code-modificationimplementation-guide-for-common-use-cases" data-tocid="code-modificationimplementation-guide-for-common-use-cases"> <strong class="+ topic/ph hi-d/b ph b">Code modification/implementation guide for common use cases</strong></a><ul><li class="topic-item"><a href="#wi-fi-system-service-auto-connect" data-tocid="wi-fi-system-service-auto-connect"> <strong class="+ topic/ph hi-d/b ph b">Wi-Fi System Service Auto Connect</strong></a></li><li class="topic-item"><a href="#wi-fi-system-service-scan-example" data-tocid="wi-fi-system-service-scan-example"> <strong class="+ topic/ph hi-d/b ph b">Wi-Fi System Service Scan Example</strong></a></li><li class="topic-item"><a href="#how-to-disconnect-connected-sta-in-ap-mode-using-wi-fi-system-service" data-tocid="how-to-disconnect-connected-sta-in-ap-mode-using-wi-fi-system-service"> <strong class="+ topic/ph hi-d/b ph b">How to Disconnect Connected STA in AP Mode Using Wi-Fi System Service</strong></a></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
  
  <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
  <script type="text/javascript" src="mchp-js/prepend.js"></script><!-- Package for viewing PDFs on mobile devices -->
  
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
       
        </body>
</html>