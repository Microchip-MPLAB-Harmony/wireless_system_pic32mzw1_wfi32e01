<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="The purpose of this document is to explain the MQTT system service design to enable the developer to make changes in the service code as per his/ her requirements if the need be. MQTT system service ..."/><meta name="copyright" content="(C) Copyright 2024"/><meta name="generator" content="DITA-OT"/><title> MQTT System Service Developer's Guide</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /D:\InfoShare\Data\Publish\Data\4z4pndcjubb\work\temp?&gt;&lt;?workdir-uri file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/temp/?&gt;&lt;?path2project?&gt;&lt;?path2project-uri ./?&gt;&lt;?path2rootmap-uri ./?&gt;&lt;dita xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34;&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;mqtt-system-service-developers-guide&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:1;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:1;184:15&#34;&gt;MQTT System Service Developer's Guide&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:1;184:15&#34;&gt;The purpose of this document is to explain the MQTT system service design to enable the developer to make changes in the service code as per his/ her requirements if the need be.&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;GUID-467967A5-7B76-4A1E-A884-DAA8F4B7AA2B&#34; xtrc=&#34;topicref:26;6:4013&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-EEBE80E3-91A8-4343-911B-99DEF57A78D3.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-6D4A7590-A5FE-418D-8A39-4F13DF7618BD.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;6:99&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-EEBE80E3-91A8-4343-911B-99DEF57A78D3.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;MQTT System Service&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;overview&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:2;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:2;184:15&#34;&gt;Overview&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:2;184:15&#34;&gt;MQTT system service Library provides an application programming interface (API) to manage MQTT Protocol functionalities. The MQTT system service uses the third party software Paho APIs for achieving these functionalities. It supports key features like client mode for MQTT connectivity, TLS for MQTT connection, Self-Healing, etc.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-2A1CA2CB-A522-4B65-8F8D-5C462048B748-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:1;184:15&#34; dita-ot:image-width=&#34;325&#34; dita-ot:image-height=&#34;423&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:1;184:15&#34;&gt;Stack&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:3;184:15&#34;&gt;Though the application developer is free to use the third party software directly to manage the MQTT functionalities, the use of MQTT system service eases the work of the developer by reducing the state machine that the application needs to maintain while also reducing the amount of bookkeeping that otherwise is needed.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;detailed-design&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:3;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:3;184:15&#34;&gt;Detailed Design&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:4;184:15&#34;&gt;MQTT system service is a background service that runs in the context of the application task. The idea of the MQTT system service is to reduce the code size for the application and simplifying the state machine that the application may need to maintain by abstracting out the complexity in the system service. The system service achieves this by maintaining a state machine of its own and any bookkeeping that may be needed.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:5;184:15&#34;&gt;The MQTT system service supports only client mode. Also, the service supports secured connections for its MQTT connection with the server.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:6;184:15&#34;&gt;The MQTT system service also supports Self-Healing, or ‘Auto-Reconnect’. In case there is an interruption in the connection due to the underlying lower layer or when the peer disconnects, the service tries to reconnect again without making the application to bother about retriggering the connection.&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;state-machine&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:4;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:4;184:15&#34;&gt;State Machine&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:7;184:15&#34;&gt;The various states of the MQTT system service are of the enum type &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:1;184:15&#34;&gt;SYS_MQTT_STATUS&lt;/b&gt;. The application is expected to call &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:2;184:15&#34;&gt;SYS_MQTT_Task()&lt;/b&gt; periodically from its own task context. This function ensures that the MQTT system service state machine receives sufficient execution cycles to process pending packets in the network stack.&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;mqtt-client-state-machine&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:5;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:5;184:15&#34;&gt;MQTT Client State Machine&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:8;184:15&#34;&gt;The MQTT system service runs a finite state machine with the following states:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;ol:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:9;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:1;184:15&#34;&gt;SYS_MQTT_STATUS_IDLE&lt;/i&gt;: Initial State of the MQTT system service, at the initialization.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:10;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:2;184:15&#34;&gt;SYS_MQTT_STATUS_LOWER_LAYER_DOWN&lt;/i&gt;:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;ol:2;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:11;184:15&#34;&gt;State the MQTT system service enters after initialization.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:12;184:15&#34;&gt;In this state, the MQTT system service opens the TCP socket using NET system service without bothering if the lower layer is UP or DOWN. This offloads the application’s burden to poll the link before communicating over the network.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:13;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:3;184:15&#34;&gt;SYS_MQTT_STATUS_SOCK_CLIENT_CONNECTING&lt;/i&gt;: In this state, the service opens a socket to connect to the MQTT server using NET system service, and waits for the connection to get established.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:14;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:4;184:15&#34;&gt;SYS_MQTT_STATUS_SOCK_CONNECTED&lt;/i&gt;: TCP connection between the client the MQTT server established; client triggers MQTT ‘Connect’ to the server via the Paho APIs.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:7;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:15;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:5;184:15&#34;&gt;SYS_MQTT_STATUS_SOCK_OPEN_FAILED&lt;/i&gt;: Opening the Socket failed. Failure is conveyed to the application via the &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:3;184:15&#34;&gt;callback&lt;/b&gt; registered with the service.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:8;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:16;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:6;184:15&#34;&gt;SYS_MQTT_STATUS_MQTT_CONNECTED&lt;/i&gt;: Client connected to the MQTT server; Connection status is conveyed to the application via the registered callback. In this state, the service is waiting to receive data on topic(s).&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:9;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:17;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:7;184:15&#34;&gt;SYS_MQTT_STATUS_MQTT_DISCONNECTING&lt;/i&gt;: Client comes into this state whenever there is either of the following:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;ol:3;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:10;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:18;184:15&#34;&gt;A failure to connect to the server (tcp or mqtt connection), or&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:11;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:19;184:15&#34;&gt;Timeout occurs on not receiving expected response, or&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:12;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:20;184:15&#34;&gt;Failure in case of publishing a message or subscribing to a topic. In this state, the client reinitializes the data w.r.t subscriptions topics.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:13;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:21;184:15&#34;&gt;Paho API to connect to MQTT server failed.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:14;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:22;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:8;184:15&#34;&gt;SYS_MQTT_STATUS_MQTT_DISCONNECTED&lt;/i&gt;: Client disconnected from the server. ‘Disconnection’ is conveyed to the application via the registered callback.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:15;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:23;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:9;184:15&#34;&gt;SYS_MQTT_STATUS_WAIT_FOR_MQTT_CONACK&lt;/i&gt;: Client waits for the reply ‘CONACK’ from the MQTT server in response to his ‘CONNECT’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:16;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:24;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:10;184:15&#34;&gt;SYS_MQTT_STATUS_WAIT_FOR_MQTT_SUBACK&lt;/i&gt;: Client waits for the reply ‘SUBACK’ from the MQTT server in response to his ‘SUBSCRIBE’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:17;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:25;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:11;184:15&#34;&gt;SYS_MQTT_STATUS_WAIT_FOR_MQTT_PUBACK&lt;/i&gt;: Client waits for the reply ‘PUBACK’ from the MQTT server in response to his ‘PUBLISH’ message in case it was sent with Qos as 1 or 2, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:18;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:26;184:15&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:12;184:15&#34;&gt;SYS_MQTT_STATUS_WAIT_FOR_MQTT_UNSUBACK&lt;/i&gt;: Client waits for the reply ‘UNSUBACK’ from the MQTT server in response to his ‘UNSUBSCRIBE’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-9C789DB1-E2FB-4440-AB9F-8BD124732BFB-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:2;184:15&#34; dita-ot:image-width=&#34;819&#34; dita-ot:image-height=&#34;722&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:2;184:15&#34;&gt;StateMachine&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:27;184:15&#34;&gt;The above state machine has been implemented in the function &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:13;184:15&#34;&gt;SYS_MQTT_Paho_Task().&lt;/i&gt; The statme machine figure has been broken into two, so as to make it simpler to understand, and hence both the above state machine figures should be seen in conjection.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:28;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:4;184:15&#34;&gt;In case the user wants to add or remove a state or modify the action to be done in an existing state (for instance, adding a timer for a time-bound result), one would need to modify the function &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:14;184:15&#34;&gt;SYS_MQTT_Paho_Task()&lt;/i&gt; along with the enum &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:15;184:15&#34;&gt;SYS_MQTT_STATUS&lt;/i&gt;.&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;number-of-subscription-topics-supported&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:6;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:6;184:15&#34;&gt;Number of Subscription Topics Supported&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:29;184:15&#34;&gt;The number of subscription topics supported by MQTT system service currently is 2. **The same can be increased by changing the value of the macro *SYS_MQTT_SUB_MAX_TOPICS. ***Also note, that the underlying third party software Paho supports 5 subscription topics, so if the developer needs to use more than 5 topics, he/ she will need to make changes in the Paho code (&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:16;184:15&#34;&gt;MAX_MESSAGE_HANDLERS&lt;/i&gt;) too.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;timeperiod-for-ack&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:7;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:7;184:15&#34;&gt;Timeperiod for ACK&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:7;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:30;184:15&#34;&gt;The number of seconds the MQTT system service will wait for the ACK to come – CONACK, or SUBACK, or PUBACK, or UNSUBACK is currently 5 seconds. The developer can increase or decrease this time by modifying the value of SYS_MQTT_PERIOIDC_TIMEOUT.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;external-apis&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:8;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:8;184:15&#34;&gt;External APIs&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:8;184:15&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-connect-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:9;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:9;184:15&#34;&gt;SYS_MQTT_Connect ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:9;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:31;184:15&#34;&gt;Description: The API is used for connecting an MQTT client to the server. The user needs to register a callback function via this API. The registered callback lets the user know the operational status change or when data is received on the topic subscribed to. One of the advantages of this API is that the user can call this API without bothering about the operational state of the underlying layers, and the service shall take care of all the complexity in such cases.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-4DDC7B8C-4099-4E7D-8EC7-22765B77C9BB-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:3;184:15&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:3;184:15&#34;&gt;resized1_SYS_MQTT_Connect&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-disconnect-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:10;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:10;184:15&#34;&gt;SYS_MQTT_Disconnect ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:10;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:32;184:15&#34;&gt;Description: The API is used for disconnecting the MQTT client from the server.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-1DE2847D-D9A4-4735-9A6C-FE9655004009-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:4;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:4;184:15&#34;&gt;resized_SYS_MQTT_Disconnect&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-publish-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:11;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:11;184:15&#34;&gt;SYS_MQTT_Publish ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:11;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:33;184:15&#34;&gt;Description: The API is used for publishing a message onto a topic.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-FAEB1BDD-06EC-4866-8A0D-284291251855-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:5;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:5;184:15&#34;&gt;resized_SYS_MQTT_Publish&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-subscribe-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:12;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:12;184:15&#34;&gt;SYS_MQTT_Subscribe ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:12;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:34;184:15&#34;&gt;Description: The API is used for subscribing to a topic.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-5EA92DC3-9FDF-408C-88D1-514375199113-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:6;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:6;184:15&#34;&gt;resized_SYS_MQTT_Subscribe&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-unsubscribe-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:13;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:13;184:15&#34;&gt;SYS_MQTT_Unsubscribe ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:13;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:35;184:15&#34;&gt;Description: The API is used for unsubscribing from a topic.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-E453B37F-50D8-42E6-8869-60A3F4451AA9-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:7;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:7;184:15&#34;&gt;resized_SYS_MQTT_Unsubscribe&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;handling-of-the-messages-received-for-a-topic&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:14;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:14;184:15&#34;&gt;Handling of the messages received for a Topic&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:14;184:15&#34;&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-8BACF68E-F989-427C-B4A2-D05AB0026A7A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:8;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:8;184:15&#34;&gt;resized_ReceiveMsgOnTopic&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;handling-of-keepalive-messages-after-the-mqtt-connection-is-up&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:15;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:15;184:15&#34;&gt;Handling of KeepAlive messages after the MQTT connection is UP&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:15;184:15&#34;&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-2D692EFB-55B6-4BCF-B2BB-99DC5E76C516-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:9;184:15&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:9;184:15&#34;&gt;resized1_KeepAlive&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-task-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:16;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:16;184:15&#34;&gt;SYS_MQTT_Task ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:16;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:36;184:15&#34;&gt;Description: This API is used for smooth functioning of the state machine of the MQTT system service**.** The application needs to call this API periodically. Also, this API takes as parameter the handle returned when we connect to server via the SYS_MQTT_Connect() call.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;sys-mqtt-initialize--sys-mqtt-deinitialize-&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:17;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:17;184:15&#34;&gt;SYS_MQTT_Initialize ()/ SYS_MQTT_Deinitialize ()&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:17;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:37;184:15&#34;&gt;Description: These functions are used for initializing/ deinitializing the data structures of the MQTT system service. The SYS_MQTT_Initialize() function is called from within the System Task. &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:5;184:15&#34;&gt;Users can modify these functions in case they want to take some additional actions during the initialization of the service.&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;cli-commands&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:18;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:18;184:15&#34;&gt;CLI Commands&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:18;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:38;184:15&#34;&gt;The details of the cli commands supported by MQTT system service can be found under &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:6;184:15&#34;&gt;MQTT System Service Usage&lt;/b&gt;.The CLI commands are implemented using the function &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:17;184:15&#34;&gt;SysMqtt_Command_Process()&lt;/i&gt;. &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;b:7;184:15&#34;&gt;The users can modify any of the commands – configuration or get as per their needs by modifying the above function.&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;code-location&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:19;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:19;184:15&#34;&gt;Code location&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:19;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:39;184:15&#34;&gt;The base code for the MQTT system service can be found in the &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:18;184:15&#34;&gt;wireless_system_pic32mzw1_wfi32e01\system\mqtt&lt;/i&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:40;184:15&#34;&gt;The same shall be copied to the following location after the code for the application is generated – &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:19;184:15&#34;&gt;my_application\firmware\src\config\pic32mz_w1_curiosity\system\mqtt&lt;/i&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:41;184:15&#34;&gt;The code has 4 files:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;ol:4;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:19;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:42;184:15&#34;&gt;Header file: &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:20;184:15&#34;&gt;sys_mqtt.h&lt;/i&gt; and &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:21;184:15&#34;&gt;sys_paho_mqtt.h&lt;/i&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;li:20;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:43;184:15&#34;&gt;Source file: &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:22;184:15&#34;&gt;src/sys_mqtt.c&lt;/i&gt; and &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;i:23;184:15&#34;&gt;src/sys_paho_mqtt.c&lt;/i&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:44;184:15&#34;&gt;Since the above files could see modifications across releases, hence the users would need to take care of merging the changes they did in these files with the ones which were done in the new release by Microchip Team. For this the user needs to take care of this while generating the code via the MHC:&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-34EF9F0D-50D1-45BB-BCCB-3F7E5B59B947-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:10;184:15&#34; dita-ot:image-width=&#34;626&#34; dita-ot:image-height=&#34;643&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:10;184:15&#34;&gt;MhcMergeStrategy&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:45;184:15&#34;&gt;While generating the code the user should use the Merge Strategy as “USER_ALL”, and press “Generate”. In case there are changes done by user in any of the files, the MHC shall prompt the user about it:&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-22EE92B3-1E60-4407-8985-CA469AFB0574-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;image:11;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;alt:11;184:15&#34;&gt;resized_MhcMergeWindow&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;p:46;184:15&#34;&gt;The user can merge his changes with the the latest changes done in the services using the above window.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;reference&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;topic:20;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;title:20;184:15&#34;&gt;Reference&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;body:20;184:15&#34;&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;table:1;184:15&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;tgroup:1;184:15&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;colspec:1;184:15&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;colspec:2;184:15&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;thead:1;184:15&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;row:1;184:15&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:1;184:15&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;S. No&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:2;184:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;Name&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;tbody:1;184:15&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;row:2;184:15&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:3;184:15&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:4;184:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;MQTT system service Usage&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;row:3;184:15&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:5;184:15&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:6;184:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;MQTT system service Interface&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;row:4;184:15&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:7;184:15&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md&#34; xtrc=&#34;entry:8;184:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;NET system service Interface&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/dita&gt;"/><meta name="wh-source-relpath" content="GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.md"/><meta name="wh-out-relpath" content="GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="MPLAB Harmony PIC32MZW1/WFI32 wireless system services &#xA;    "/></a>
                    <div class=" wh_publication_title "><a href="index.html">MPLAB Harmony PIC32MZW1/WFI32 wireless system services 
    </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services"><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div></li><li><div class="topicref" data-id="mqtt-system-service"><div class="title"><a href="GUID-6D4A7590-A5FE-418D-8A39-4F13DF7618BD.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
MQTT System Service</a></div></div></li><li class="active"><div class="topicref" data-id="mqtt-system-service-developers-guide"><div class="title"><a href="GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2.4</ph>
MQTT System Service Developer's Guide</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            <div class="row" style="margin-top: -1em;"><div class="col-lg-7 col-md-7 col-sm-12 offset-lg-3 offset-md-3 text-right border-bottom mb-1"><h2 class="text-dark header_title">
    </h2></div></div>
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="true"><div data-tocid="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11" class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html" id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="app-debug-system-service-d1416e19" class="topicref" data-id="app-debug-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action app-debug-system-service-d1416e19-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-172B28B0-8A47-4C93-8023-8886A08BCD06.html" id="app-debug-system-service-d1416e19-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
App Debug System Service</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="mqtt-system-service-d1416e204" class="topicref" data-id="mqtt-system-service" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mqtt-system-service-d1416e204-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6D4A7590-A5FE-418D-8A39-4F13DF7618BD.html" id="mqtt-system-service-d1416e204-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
MQTT System Service</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="mqtt-system-service-usage-d1416e212" class="topicref" data-id="mqtt-system-service-usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-0B818BAA-AF92-41F7-B4C1-7516ADA6F4A5.html" id="mqtt-system-service-usage-d1416e212-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2.1</ph>
MQTT System Service Usage</a></div></div></li><li role="treeitem"><div data-tocid="mqtt-system-service-configuration-d1416e220" class="topicref" data-id="mqtt-system-service-configuration" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-226069A1-E832-4560-8457-6363E3A0EB83.html" id="mqtt-system-service-configuration-d1416e220-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2.2</ph>
MQTT System Service Configuration</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="mqtt-system-service-interface-d1416e228" class="topicref" data-id="mqtt-system-service-interface" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action mqtt-system-service-interface-d1416e228-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-B5FCF623-E7FF-4626-AA04-20BCC3916E44.html" id="mqtt-system-service-interface-d1416e228-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2.3</ph>
MQTT System Service Interface</a></div></div></li><li role="treeitem" class="active"><div data-tocid="mqtt-system-service-developers-guide-d1416e405" class="topicref" data-id="mqtt-system-service-developers-guide" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-114BB7C8-BE5C-46B0-84F4-6A459FC0A9A7.html" id="mqtt-system-service-developers-guide-d1416e405-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2.4</ph>
MQTT System Service Developer's Guide</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="net-system-service-d1416e413" class="topicref" data-id="net-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action net-system-service-d1416e413-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-F15AF9B8-740F-41C4-BFC2-850D793F858B.html" id="net-system-service-d1416e413-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.3</ph>
Net System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-system-service-d1416e695" class="topicref" data-id="wi-fi-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-system-service-d1416e695-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6EA44F54-91D8-42F6-A226-793CA7D06695.html" id="wi-fi-system-service-d1416e695-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4</ph>
Wi-Fi System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-provisioning-system-service-d1416e872" class="topicref" data-id="wi-fi-provisioning-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-provisioning-system-service-d1416e872-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6C1BB28E-7F9B-4582-8E74-E301F89C58AC.html" id="wi-fi-provisioning-system-service-d1416e872-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.5</ph>
Wi-Fi provisioning System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="over-the-air-ota-firmware-update-system-service-d1416e1025" class="topicref" data-id="over-the-air-ota-firmware-update-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action over-the-air-ota-firmware-update-system-service-d1416e1025-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-AF87F0BB-E319-4436-A302-357BFA7E193E.html" id="over-the-air-ota-firmware-update-system-service-d1416e1025-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6</ph>
Over The Air (OTA) firmware update System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="web-socket-server-wss-system-service-d1416e1154" class="topicref" data-id="web-socket-server-wss-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action web-socket-server-wss-system-service-d1416e1154-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-097A4209-8474-480E-A141-6C8FC60A7671.html" id="web-socket-server-wss-system-service-d1416e1154-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.7</ph>
Web Socket Server (WSS) System Service</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388" class="topicref backmatter backmatter_parent" data-id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B.html" id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link">Microchip Information</a></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><article class="nested0" aria-labelledby="ariaid-title1" id="mqtt-system-service-developers-guide"><h1 class="- topic/title title topictitle1" id="ariaid-title1" style="">1.2.4 MQTT System Service Developer's Guide</h1><div class="- topic/body body"><p class="- topic/p p">The purpose of this document is to explain the MQTT system service design to enable the developer to make changes in the service code as per his/ her requirements if the need be.</p></div></article><article class="- topic/topic topic nested0" aria-labelledby="ariaid-title2" id="overview"><h1 class="- topic/title title topictitle1" id="ariaid-title2" style=""> Overview</h1><div class="- topic/body body"><p class="- topic/p p">MQTT system service Library provides an application programming interface (API) to manage MQTT Protocol functionalities. The MQTT system service uses the third party software Paho APIs for achieving these functionalities. It supports key features like client mode for MQTT connectivity, TLS for MQTT connection, Self-Healing, etc.</p><div class=""><img class="- topic/image image break break" src="GUID-2A1CA2CB-A522-4B65-8F8D-5C462048B748-low.png" alt="Stack"/></div><p class="- topic/p p">Though the application developer is free to use the third party software directly to manage the MQTT functionalities, the use of MQTT system service eases the work of the developer by reducing the state machine that the application needs to maintain while also reducing the amount of bookkeeping that otherwise is needed.</p></div></article><article class="- topic/topic topic nested0" aria-labelledby="ariaid-title3" id="detailed-design"><h1 class="- topic/title title topictitle1" id="ariaid-title3" style=""> Detailed Design</h1><div class="- topic/body body"><p class="- topic/p p">MQTT system service is a background service that runs in the context of the application task. The idea of the MQTT system service is to reduce the code size for the application and simplifying the state machine that the application may need to maintain by abstracting out the complexity in the system service. The system service achieves this by maintaining a state machine of its own and any bookkeeping that may be needed.</p><p class="- topic/p p">The MQTT system service supports only client mode. Also, the service supports secured connections for its MQTT connection with the server.</p><p class="- topic/p p">The MQTT system service also supports Self-Healing, or ‘Auto-Reconnect’. In case there is an interruption in the connection due to the underlying lower layer or when the peer disconnects, the service tries to reconnect again without making the application to bother about retriggering the connection.</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title4" id="state-machine"><h2 class="- topic/title title topictitle2" id="ariaid-title4" style=""> State Machine</h2><div class="- topic/body body"><p class="- topic/p p">The various states of the MQTT system service are of the enum type <strong class="+ topic/ph hi-d/b ph b">SYS_MQTT_STATUS</strong>. The application is expected to call <strong class="+ topic/ph hi-d/b ph b">SYS_MQTT_Task()</strong> periodically from its own task context. This function ensures that the MQTT system service state machine receives sufficient execution cycles to process pending packets in the network stack.</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="mqtt-client-state-machine"><h3 class="- topic/title title topictitle3" id="ariaid-title5" style=""> MQTT Client State Machine</h3><div class="- topic/body body"><p class="- topic/p p">The MQTT system service runs a finite state machine with the following states:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_IDLE</em>: Initial State of the MQTT system service, at the initialization.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_LOWER_LAYER_DOWN</em>:</p><ol class="- topic/ol ol" type="a"><li class="- topic/li li"><p class="- topic/p p">State the MQTT system service enters after initialization.</p></li><li class="- topic/li li"><p class="- topic/p p">In this state, the MQTT system service opens the TCP socket using NET system service without bothering if the lower layer is UP or DOWN. This offloads the application’s burden to poll the link before communicating over the network.</p></li></ol></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_SOCK_CLIENT_CONNECTING</em>: In this state, the service opens a socket to connect to the MQTT server using NET system service, and waits for the connection to get established.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_SOCK_CONNECTED</em>: TCP connection between the client the MQTT server established; client triggers MQTT ‘Connect’ to the server via the Paho APIs.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_SOCK_OPEN_FAILED</em>: Opening the Socket failed. Failure is conveyed to the application via the <strong class="+ topic/ph hi-d/b ph b">callback</strong> registered with the service.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_MQTT_CONNECTED</em>: Client connected to the MQTT server; Connection status is conveyed to the application via the registered callback. In this state, the service is waiting to receive data on topic(s).</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_MQTT_DISCONNECTING</em>: Client comes into this state whenever there is either of the following:</p><ol class="- topic/ol ol" type="a"><li class="- topic/li li"><p class="- topic/p p">A failure to connect to the server (tcp or mqtt connection), or</p></li><li class="- topic/li li"><p class="- topic/p p">Timeout occurs on not receiving expected response, or</p></li><li class="- topic/li li"><p class="- topic/p p">Failure in case of publishing a message or subscribing to a topic. In this state, the client reinitializes the data w.r.t subscriptions topics.</p></li><li class="- topic/li li"><p class="- topic/p p">Paho API to connect to MQTT server failed.</p></li></ol></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_MQTT_DISCONNECTED</em>: Client disconnected from the server. ‘Disconnection’ is conveyed to the application via the registered callback.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_WAIT_FOR_MQTT_CONACK</em>: Client waits for the reply ‘CONACK’ from the MQTT server in response to his ‘CONNECT’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_WAIT_FOR_MQTT_SUBACK</em>: Client waits for the reply ‘SUBACK’ from the MQTT server in response to his ‘SUBSCRIBE’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_WAIT_FOR_MQTT_PUBACK</em>: Client waits for the reply ‘PUBACK’ from the MQTT server in response to his ‘PUBLISH’ message in case it was sent with Qos as 1 or 2, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.</p></li><li class="- topic/li li"><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS_WAIT_FOR_MQTT_UNSUBACK</em>: Client waits for the reply ‘UNSUBACK’ from the MQTT server in response to his ‘UNSUBSCRIBE’ message, for SYS_MQTT_PERIOIDC_TIMEOUT seconds.</p></li></ol><div class=""><img class="- topic/image image break break" src="GUID-9C789DB1-E2FB-4440-AB9F-8BD124732BFB-low.png" alt="StateMachine"/></div><p class="- topic/p p">The above state machine has been implemented in the function <em class="+ topic/ph hi-d/i ph i">SYS_MQTT_Paho_Task().</em> The statme machine figure has been broken into two, so as to make it simpler to understand, and hence both the above state machine figures should be seen in conjection.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">In case the user wants to add or remove a state or modify the action to be done in an existing state (for instance, adding a timer for a time-bound result), one would need to modify the function <em class="+ topic/ph hi-d/i ph i">SYS_MQTT_Paho_Task()</em> along with the enum <em class="+ topic/ph hi-d/i ph i">SYS_MQTT_STATUS</em>.</strong></p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="number-of-subscription-topics-supported"><h2 class="- topic/title title topictitle2" id="ariaid-title6" style=""> Number of Subscription Topics Supported</h2><div class="- topic/body body"><p class="- topic/p p">The number of subscription topics supported by MQTT system service currently is 2. **The same can be increased by changing the value of the macro *SYS_MQTT_SUB_MAX_TOPICS. ***Also note, that the underlying third party software Paho supports 5 subscription topics, so if the developer needs to use more than 5 topics, he/ she will need to make changes in the Paho code (<em class="+ topic/ph hi-d/i ph i">MAX_MESSAGE_HANDLERS</em>) too.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title7" id="timeperiod-for-ack"><h2 class="- topic/title title topictitle2" id="ariaid-title7" style=""> Timeperiod for ACK</h2><div class="- topic/body body"><p class="- topic/p p">The number of seconds the MQTT system service will wait for the ACK to come – CONACK, or SUBACK, or PUBACK, or UNSUBACK is currently 5 seconds. The developer can increase or decrease this time by modifying the value of SYS_MQTT_PERIOIDC_TIMEOUT.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="external-apis"><h2 class="- topic/title title topictitle2" id="ariaid-title8" style=""> External APIs</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="sys-mqtt-connect-"><h3 class="- topic/title title topictitle3" id="ariaid-title9" style=""> SYS_MQTT_Connect ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: The API is used for connecting an MQTT client to the server. The user needs to register a callback function via this API. The registered callback lets the user know the operational status change or when data is received on the topic subscribed to. One of the advantages of this API is that the user can call this API without bothering about the operational state of the underlying layers, and the service shall take care of all the complexity in such cases.</p><div class=""><img class="- topic/image image break break" src="GUID-4DDC7B8C-4099-4E7D-8EC7-22765B77C9BB-low.png" alt="resized1_SYS_MQTT_Connect"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="sys-mqtt-disconnect-"><h3 class="- topic/title title topictitle3" id="ariaid-title10" style=""> SYS_MQTT_Disconnect ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: The API is used for disconnecting the MQTT client from the server.</p><div class=""><img class="- topic/image image break break" src="GUID-1DE2847D-D9A4-4735-9A6C-FE9655004009-low.png" alt="resized_SYS_MQTT_Disconnect"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="sys-mqtt-publish-"><h3 class="- topic/title title topictitle3" id="ariaid-title11" style=""> SYS_MQTT_Publish ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: The API is used for publishing a message onto a topic.</p><div class=""><img class="- topic/image image break break" src="GUID-FAEB1BDD-06EC-4866-8A0D-284291251855-low.png" alt="resized_SYS_MQTT_Publish"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="sys-mqtt-subscribe-"><h3 class="- topic/title title topictitle3" id="ariaid-title12" style=""> SYS_MQTT_Subscribe ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: The API is used for subscribing to a topic.</p><div class=""><img class="- topic/image image break break" src="GUID-5EA92DC3-9FDF-408C-88D1-514375199113-low.png" alt="resized_SYS_MQTT_Subscribe"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="sys-mqtt-unsubscribe-"><h3 class="- topic/title title topictitle3" id="ariaid-title13" style=""> SYS_MQTT_Unsubscribe ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: The API is used for unsubscribing from a topic.</p><div class=""><img class="- topic/image image break break" src="GUID-E453B37F-50D8-42E6-8869-60A3F4451AA9-low.png" alt="resized_SYS_MQTT_Unsubscribe"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="handling-of-the-messages-received-for-a-topic"><h3 class="- topic/title title topictitle3" id="ariaid-title14" style=""> Handling of the messages received for a Topic</h3><div class="- topic/body body"><div class=""><img class="- topic/image image break break" src="GUID-8BACF68E-F989-427C-B4A2-D05AB0026A7A-low.png" alt="resized_ReceiveMsgOnTopic"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="handling-of-keepalive-messages-after-the-mqtt-connection-is-up"><h3 class="- topic/title title topictitle3" id="ariaid-title15" style=""> Handling of KeepAlive messages after the MQTT connection is UP</h3><div class="- topic/body body"><div class=""><img class="- topic/image image break break" src="GUID-2D692EFB-55B6-4BCF-B2BB-99DC5E76C516-low.png" alt="resized1_KeepAlive"/></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="sys-mqtt-task-"><h3 class="- topic/title title topictitle3" id="ariaid-title16" style=""> SYS_MQTT_Task ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: This API is used for smooth functioning of the state machine of the MQTT system service**.** The application needs to call this API periodically. Also, this API takes as parameter the handle returned when we connect to server via the SYS_MQTT_Connect() call.</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="sys-mqtt-initialize--sys-mqtt-deinitialize-"><h3 class="- topic/title title topictitle3" id="ariaid-title17" style=""> SYS_MQTT_Initialize ()/ SYS_MQTT_Deinitialize ()</h3><div class="- topic/body body"><p class="- topic/p p">Description: These functions are used for initializing/ deinitializing the data structures of the MQTT system service. The SYS_MQTT_Initialize() function is called from within the System Task. <strong class="+ topic/ph hi-d/b ph b">Users can modify these functions in case they want to take some additional actions during the initialization of the service.</strong></p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title18" id="cli-commands"><h2 class="- topic/title title topictitle2" id="ariaid-title18" style=""> CLI Commands</h2><div class="- topic/body body"><p class="- topic/p p">The details of the cli commands supported by MQTT system service can be found under <strong class="+ topic/ph hi-d/b ph b">MQTT System Service Usage</strong>.The CLI commands are implemented using the function <em class="+ topic/ph hi-d/i ph i">SysMqtt_Command_Process()</em>. <strong class="+ topic/ph hi-d/b ph b">The users can modify any of the commands – configuration or get as per their needs by modifying the above function.</strong></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title19" id="code-location"><h2 class="- topic/title title topictitle2" id="ariaid-title19" style=""> Code location</h2><div class="- topic/body body"><p class="- topic/p p">The base code for the MQTT system service can be found in the <em class="+ topic/ph hi-d/i ph i">wireless_system_pic32mzw1_wfi32e01\system\mqtt</em></p><p class="- topic/p p">The same shall be copied to the following location after the code for the application is generated – <em class="+ topic/ph hi-d/i ph i">my_application\firmware\src\config\pic32mz_w1_curiosity\system\mqtt</em></p><p class="- topic/p p">The code has 4 files:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Header file: <em class="+ topic/ph hi-d/i ph i">sys_mqtt.h</em> and <em class="+ topic/ph hi-d/i ph i">sys_paho_mqtt.h</em></p></li><li class="- topic/li li"><p class="- topic/p p">Source file: <em class="+ topic/ph hi-d/i ph i">src/sys_mqtt.c</em> and <em class="+ topic/ph hi-d/i ph i">src/sys_paho_mqtt.c</em></p></li></ol><p class="- topic/p p">Since the above files could see modifications across releases, hence the users would need to take care of merging the changes they did in these files with the ones which were done in the new release by Microchip Team. For this the user needs to take care of this while generating the code via the MHC:</p><div class=""><img class="- topic/image image break break" src="GUID-34EF9F0D-50D1-45BB-BCCB-3F7E5B59B947-low.png" alt="MhcMergeStrategy"/></div><p class="- topic/p p">While generating the code the user should use the Merge Strategy as “USER_ALL”, and press “Generate”. In case there are changes done by user in any of the files, the MHC shall prompt the user about it:</p><div class=""><img class="- topic/image image break break" src="GUID-22EE92B3-1E60-4407-8985-CA469AFB0574-low.png" alt="resized_MhcMergeWindow"/></div><p class="- topic/p p">The user can merge his changes with the the latest changes done in the services using the above window.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title20" id="reference"><h2 class="- topic/title title topictitle2" id="ariaid-title20" style=""> Reference</h2><div class="- topic/body body"><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="reference__entry__1">S. No</th><th class="- topic/entry entry colsep-0 rowsep-0" id="reference__entry__2">Name</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__1">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__2">MQTT system service Usage</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__1">2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__2">MQTT system service Interface</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__1">3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="reference__entry__2">NET system service Interface</td></tr></tbody></table></div></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">On this page</div><ul><li class="topic-item"><a href="#state-machine" data-tocid="state-machine"> State Machine</a><ul><li class="topic-item"><a href="#mqtt-client-state-machine" data-tocid="mqtt-client-state-machine"> MQTT Client State Machine</a></li></ul></li><li class="topic-item"><a href="#number-of-subscription-topics-supported" data-tocid="number-of-subscription-topics-supported"> Number of Subscription Topics Supported</a></li><li class="topic-item"><a href="#timeperiod-for-ack" data-tocid="timeperiod-for-ack"> Timeperiod for ACK</a></li><li class="topic-item"><a href="#external-apis" data-tocid="external-apis"> External APIs</a><ul><li class="topic-item"><a href="#sys-mqtt-connect-" data-tocid="sys-mqtt-connect-"> SYS_MQTT_Connect ()</a></li><li class="topic-item"><a href="#sys-mqtt-disconnect-" data-tocid="sys-mqtt-disconnect-"> SYS_MQTT_Disconnect ()</a></li><li class="topic-item"><a href="#sys-mqtt-publish-" data-tocid="sys-mqtt-publish-"> SYS_MQTT_Publish ()</a></li><li class="topic-item"><a href="#sys-mqtt-subscribe-" data-tocid="sys-mqtt-subscribe-"> SYS_MQTT_Subscribe ()</a></li><li class="topic-item"><a href="#sys-mqtt-unsubscribe-" data-tocid="sys-mqtt-unsubscribe-"> SYS_MQTT_Unsubscribe ()</a></li><li class="topic-item"><a href="#handling-of-the-messages-received-for-a-topic" data-tocid="handling-of-the-messages-received-for-a-topic"> Handling of the messages received for a Topic</a></li><li class="topic-item"><a href="#handling-of-keepalive-messages-after-the-mqtt-connection-is-up" data-tocid="handling-of-keepalive-messages-after-the-mqtt-connection-is-up"> Handling of KeepAlive messages after the MQTT connection is UP</a></li><li class="topic-item"><a href="#sys-mqtt-task-" data-tocid="sys-mqtt-task-"> SYS_MQTT_Task ()</a></li><li class="topic-item"><a href="#sys-mqtt-initialize--sys-mqtt-deinitialize-" data-tocid="sys-mqtt-initialize--sys-mqtt-deinitialize-"> SYS_MQTT_Initialize ()/ SYS_MQTT_Deinitialize ()</a></li></ul></li><li class="topic-item"><a href="#cli-commands" data-tocid="cli-commands"> CLI Commands</a></li><li class="topic-item"><a href="#code-location" data-tocid="code-location"> Code location</a></li><li class="topic-item"><a href="#reference" data-tocid="reference"> Reference</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
  
  <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
  <script type="text/javascript" src="mchp-js/prepend.js"></script><!-- Package for viewing PDFs on mobile devices -->
  
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
       
        </body>
</html>