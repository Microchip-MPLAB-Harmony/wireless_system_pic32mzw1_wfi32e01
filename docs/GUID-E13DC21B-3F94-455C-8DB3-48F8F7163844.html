<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="The OTA System Service provides simple APIs to enable Over the Air system firmware image upgrade. While using the service, the application does not have to handle low level states of a TCP/IP ..."/><meta name="copyright" content="(C) Copyright 2024"/><meta name="generator" content="DITA-OT"/><title>1.6.1 OTA System Service Usage</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /D:\InfoShare\Data\Publish\Data\4z4pndcjubb\work\temp?&gt;&lt;?workdir-uri file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/temp/?&gt;&lt;?path2project?&gt;&lt;?path2project-uri ./?&gt;&lt;?path2rootmap-uri ./?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;ota-system-service-usage&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:1;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:1;184:15&#34;&gt;OTA System Service Usage&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:1;184:15&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;GUID-467967A5-7B76-4A1E-A884-DAA8F4B7AA2B&#34; xtrc=&#34;topicref:2;6:245&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-BCD37AC0-D5B0-48A5-8880-67AA3E30E5EA.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-AF87F0BB-E319-4436-A302-357BFA7E193E.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;6:99&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-BCD37AC0-D5B0-48A5-8880-67AA3E30E5EA.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;Over The Air (OTA) firmware update System Service&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;description&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:2;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:2;184:15&#34;&gt;Description&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:1;184:15&#34;&gt;The OTA System Service provides simple APIs to enable Over the Air system firmware image upgrade. While using the service, the application does not have to handle low level states of a TCP/IP Connection, periodic update check triggers, file integrity checks etc. since the service internally takes care of that. The user also does not required extensive Security domain knowledge to establish a secured connection via the application using OTA System Service library.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:2;184:15&#34;&gt;The user would need to configure the Home AP credentials (like SSID and security items). The Wi-Fi service will use the credentials to connect to the Home AP and acquire an IP address. Once the IP address is obtained OTA service will perform OTA update process based on user configuration in MHC.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-65F5D2E9-64F2-4D9B-9542-BDD5DD323EC6-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:1;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:1;184:15&#34;&gt;resized_wifi_sta_http_server_1&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:3;184:15&#34;&gt;The service state-machine will try to connect with a pre-defined OTA manifest server address and download the new image when a version higher than the version being currently executed is identified. The downloaded image will be stored in the external SPI flash initially. Upon reset, the image will be transferred to the internal flash (NVM) by the OTA bootloader. Once the image is successfully programmed, the updated image from the server will be executed.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:4;184:15&#34;&gt;The OTA service has two major components:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:5;184:15&#34;&gt;1.The OTA service task state-machine that will be integrated into the customer application. This task is responsible for polling for an update image, downloading and verifying an image when an update is detected, and resetting the system to apply the newly downloaded image.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:6;184:15&#34;&gt;2.The OTA bootloader that is responsible for identifying the presence of an updated image in the external flash filesystem and transferring it to the program flash memory (NVM).&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:7;184:15&#34;&gt;A &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:1;184:15&#34;&gt;factory image&lt;/codeph&gt; is a unified application image that contains the bootloader and the application in a single file that can be programmed into the device using an external programmer. To create a factory image, it is required to load the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:2;184:15&#34;&gt;ota_bootloader&lt;/codeph&gt; project located in the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:3;184:15&#34;&gt;apps&lt;/codeph&gt; folder of &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:4;184:15&#34;&gt;wireless_apps_pic32mzw1_wfi32e01&lt;/codeph&gt; repo into the application project. A unified hex file will be created at the end of the compilation process. Internally, this step uses the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:5;184:15&#34;&gt;Hexmate&lt;/codeph&gt; tool after compiling the application project and the bootloader project independently. More details about this can be found in &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:1;184:15&#34;&gt;OTA System Service Configuration&lt;/b&gt; section of this manual.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:8;184:15&#34;&gt;OTA service uses the file system component from MHC (MPLAB® Harmony Configurator) and is configured to use an external SPI flash by default. However, this can be modified to use a different medium without major changes since the OTA service uses the file system abstraction to talk to the external storage medium.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:9;184:15&#34;&gt;An OTA image database is maintained by the service in the filesystem. It contains details about the downloaded images (image name, image status,image version, digest key), which will be used by bootloader and OTA service.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-71F4624D-82FD-4F4D-A93E-96C7D650E35A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:2;184:15&#34; dita-ot:image-width=&#34;628&#34; dita-ot:image-height=&#34;203&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:2;184:15&#34;&gt;SPI_com&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;ota-service-framework-architecture-overview&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:3;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:3;184:15&#34;&gt;OTA Service Framework Architecture Overview&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:10;184:15&#34;&gt;Over the Air (OTA) firmware upgrade feature is designed with a two step process, Image Downloading and Image Programming process.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:11;184:15&#34;&gt;Image Downloading is processed by the OTA service.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:12;184:15&#34;&gt;Image Programming is processed by the OTA bootloader.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:13;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:2;184:15&#34;&gt;OTA service&lt;/b&gt; is a Harmony component which includes the system level logic implementation and uses &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:6;184:15&#34;&gt;OTA core&lt;/codeph&gt; APIs. This harmony component will provide some user configurable parameters, based on which service level code will be generated with the corresponding logic. Please follow &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:7;184:15&#34;&gt;Figure-1&lt;/codeph&gt; and &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:8;184:15&#34;&gt;Figure-2&lt;/codeph&gt; for better understanding of this flow.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-6AC0F0AC-4BCC-4127-9824-FA380BF43526-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:3;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;761&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:3;184:15&#34;&gt;system_layers&lt;/alt&gt;&lt;/image&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-B35E3E1A-CF6F-4E22-B6EE-70E4FB9E1F2C-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:4;184:15&#34; dita-ot:image-width=&#34;698&#34; dita-ot:image-height=&#34;515&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:4;184:15&#34;&gt;top_to_bottom_layers&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;abstraction-model&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:4;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:4;184:15&#34;&gt;Abstraction model&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:4;184:15&#34;&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-C3774287-8825-420A-8CE8-44E839E49B4B-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:5;184:15&#34; dita-ot:image-width=&#34;743&#34; dita-ot:image-height=&#34;622&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:5;184:15&#34;&gt;abstraction_model&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:14;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:3;184:15&#34;&gt;User Application:&lt;/b&gt; This is where the customer application logic is built.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:15;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:4;184:15&#34;&gt;OTA Service:&lt;/b&gt; This layer includes the service level logic implementation. This is a Harmony component which provides certain user configurable parameters(ex- Version, Periodic update check etc.) . Based on user configuration, generated code will be activated with required functionalities.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-8EE6C3F9-C5A7-48CB-8A10-8C5FD4F449EE-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:6;184:15&#34; dita-ot:image-width=&#34;624&#34; dita-ot:image-height=&#34;261&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:6;184:15&#34;&gt;ota_service_component&lt;/alt&gt;&lt;/image&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-AA5F6DB3-4183-4E04-BB42-3757E0704D58-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:7;184:15&#34; dita-ot:image-width=&#34;707&#34; dita-ot:image-height=&#34;360&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:7;184:15&#34;&gt;ota_service_conf&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:16;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:5;184:15&#34;&gt;OTA software platform / OTA Core :&lt;/b&gt; This is the platform layer that consist of the main OTA logic implementation. When OTA process is triggered , this layer will communicate with the transport layer to connect to OTA server. If new image is available , it will initiate download using transport layer. If successfully downloaded, it will store the new image into the File System .&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:17;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:6;184:15&#34;&gt;File System :&lt;/b&gt; The architecture is designed to provide flexibility for the customer to choose the storage medium (ex- SST26 SPI flash, SD card, USB MSD in host mode etc.). Any medium supported by the Harmony3 file system can be used with the OTA service.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:18;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:7;184:15&#34;&gt;Bootloader :&lt;/b&gt; This layer consists of the logic to safely program images from the file system (external) into the program memory (NVM) of the device. At device boot, the bootloader will check if a new image is available in the external image store and transfer it to the NVM.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;ota-server-json-manifest&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:5;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:5;184:15&#34;&gt;OTA server JSON manifest&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:19;184:15&#34;&gt;The OTA service expects the HTTP based OTA server to provide metadata of images available in the server in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:9;184:15&#34;&gt;json&lt;/codeph&gt; format. During periodic update checks, the OTA service task will download and parse this manifest file. Each entry in the manifest file should include the following fields :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:2;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:20;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:8;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:10;184:15&#34;&gt;Version&lt;/codeph&gt;&lt;/b&gt; indicates the application version number. It is a integer value.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:21;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:9;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:11;184:15&#34;&gt;URL&lt;/codeph&gt;&lt;/b&gt; contains the image path from which the application image can be downloaded. It is a string variable.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:22;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:10;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:12;184:15&#34;&gt;Digest&lt;/codeph&gt;&lt;/b&gt; contain the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:13;184:15&#34;&gt;SHA256&lt;/codeph&gt; digest of image to be downloaded. It is a 64 byte string variable and should not include whitespaces&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:23;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:11;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:14;184:15&#34;&gt;EraseVer&lt;/codeph&gt;&lt;/b&gt; This &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;i:1;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:12;184:15&#34;&gt;optional&lt;/b&gt;&lt;/i&gt; field provides a capability to trigger an erase of an version which was downloaded earlier. Customer may want to remove an image from the image store due to various reasons, application with bug, may be one of them. It is a bool variable.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:3;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:7;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:24;184:15&#34;&gt;If user configures this field as &#34;true&#34;, OTA service will delete image version mentioned in &#34;Version&#34; field.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:8;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:25;184:15&#34;&gt;If user configures this field as &#34;false&#34;, OTA service will follow image downwload logic.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:9;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:26;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:13;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:15;184:15&#34;&gt;Patch&lt;/codeph&gt;&lt;/b&gt; This &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;i:2;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:14;184:15&#34;&gt;optional&lt;/b&gt;&lt;/i&gt; field provides a facility to support patch functionality. If &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:15;184:15&#34;&gt;patch&lt;/b&gt; functionality-option is enabled in the project, application will try to fetch below fields&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:4;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:10;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:27;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:16;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:16;184:15&#34;&gt;BaseVersion&lt;/codeph&gt;&lt;/b&gt; This is base image version against which patch will be applied. Application will check the presence of this base image version, in OTA DB, present in external flash.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:11;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:28;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:17;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:17;184:15&#34;&gt;BaseVerDigest&lt;/codeph&gt;&lt;/b&gt; Base image digest must be provided by user, which will be used by application to verify correct Base image. This digest will be compared against the digest (stored inside OTA DB) of base version.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:12;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:29;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:18;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:18;184:15&#34;&gt;PatchURL&lt;/codeph&gt;&lt;/b&gt; URL-path of patch image.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:13;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:30;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:19;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:19;184:15&#34;&gt;PatchDigest&lt;/codeph&gt;&lt;/b&gt; Digest of Patch image . This is used by the application in the device to verify downloaded patch image.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:14;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:31;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:20;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:20;184:15&#34;&gt;TargetDigest&lt;/codeph&gt;&lt;/b&gt; Digest of the Target image obtained after applying Patch . This is used by the application in the device to verify target image obtained after applying patch functionality.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:32;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:21;184:15&#34;&gt;Sample JSON&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;json&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeblock:1;184:15&#34;&gt; { &#34;ota&#34;: [ { &#34;Version&#34;: 5, &#34;URL&#34;: &#34;http://192.168.0.101:8000/wifi_ota_app_upgrade_ver2.bin&#34;, &#34;Digest&#34;: &#34;aff0d6d02fabf6a8cc96f762eb71f54f3687ce7d8605dd814055c17eface0b1d&#34;, &#34;EraseVer&#34;: false, &#34;Patch&#34; : [ { &#34;BaseVersion&#34;: 1, &#34;BaseVerDigest&#34;: &#34;aff0d6d02fabf6a8cc96f762eb71f54f3687ce7d8605dd814055c17eface0b1d&#34;, &#34;PatchURL&#34;: &#34;http://192.168.0.101:8000/wifi_ota_app_upgrade_patch.patch&#34;, &#34;PatchDigest&#34;: &#34;266008c4a6150d7033e370a48621ecd44985b3d0418cdf13bbb6efa6fae43823&#34;, &#34;TargetDigest&#34;: &#34;beac75ef53f0159cae0645c32f58a9705d237823607c6e65267ca61793dfcb08&#34; } ] } ] }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:33;184:15&#34;&gt;If the user enables &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:21;184:15&#34;&gt;Enable File Download&lt;/codeph&gt; option, then the below JSON file format should be used.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:5;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:15;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:34;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:22;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:22;184:15&#34;&gt;Files&lt;/codeph&gt;&lt;/b&gt; This field is optional if the user wants to add file download functionality to the OTA Service. It contains an array of elements which holds the information about images/files. If File Download option is enabled in the project, the application will try to fetch the below fields. This field can have up to 3 elements.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:6;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:16;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:35;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:23;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:23;184:15&#34;&gt;Slot Number&lt;/codeph&gt;&lt;/b&gt; This indicates the slot number to which the specific certificate/file should be downloaded. It starts from 0 to (number of slots – 1).&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:17;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:36;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:24;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:24;184:15&#34;&gt;Length&lt;/codeph&gt;&lt;/b&gt; This length field provides the exact size of the certificate/file&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:18;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:37;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:25;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:25;184:15&#34;&gt;URL&lt;/codeph&gt;&lt;/b&gt; This field contains the certificate/file path from which the files are downloaded. It is a string variable&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:19;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:38;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:26;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:26;184:15&#34;&gt;Digest&lt;/codeph&gt;&lt;/b&gt; This field contains the calculated digest of the file/certificate. It is a string variable.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:20;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:39;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:27;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:27;184:15&#34;&gt;Public Key&lt;/codeph&gt;&lt;/b&gt; This field is needed if the user wants to verify the above file with signature. It contains the details of the public key needed to verify signature. The file format should be &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:28;184:15&#34;&gt;der&lt;/codeph&gt;.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:40;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:28;184:15&#34;&gt;Sample JSON for File Download&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeblock:2;184:15&#34;&gt;{ &#34;ota&#34;: [ { &#34;files&#34; : [ { &#34;slot_number&#34;:0, &#34;length&#34;:16968, &#34;URL&#34;:&#34;http://192.168.0.237:8000/test_app.bin&#34;, &#34;digest&#34;:&#34;1601B47A0DEE36196B1056B3E04AEF7CA1744DD6E18F63CB95E798C1C739AAB9&#34;, &#34;Signature&#34;:&#34;Et59Glludsj0OalTHKB9y90dEsLwtAVJhMRWqWdAB8VW3vrtClVETfnh6ILWIpf3kaUYsV4wjZrPys6BZjG6Xg==&#34;, &#34;public_key&#34; : [ { &#34;slot_number&#34;:1, &#34;length&#34;:91, &#34;URL&#34;:&#34;http://192.168.0.237:8000/public_key.der&#34;, &#34;digest&#34;:&#34;AC7395DE5A1E328BFF0EBD53E1F55332F78186F388A8B8B85FD8E10AB56EB176&#34; } ] }, { &#34;slot_number&#34;:2, &#34;length&#34;:1415, &#34;URL&#34;:&#34;http://192.168.0.237:8000/ca_cert.crt&#34;, &#34;digest&#34;:&#34;0578CC171C82068A45344DA4D867F72CDB6CF823EBC73541DE4CDAC675B116F0&#34; } ] }, { &#34;Version&#34;: 1, &#34;URL&#34;: &#34;http://192.168.214.36:8000/wifi_ota_app_upgrade_ver2.bin&#34;, &#34;Digest&#34;: &#34;f6f981386e630d6f69dddd7052d06dcdf7c59b9095e5912eccf6fd0bc627db50&#34;, &#34;Signature&#34;: &#34;2+2R/43x3FvNoV8anNW2M5ndo+JlFNzHSjJ+iwL68w1v5XMcBPMx4+3u5lBFejUNU/MLLoP13zxwd45f6MCySQ==&#34;, &#34;EraseVer&#34;: false } ] }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:41;184:15&#34;&gt;OTA service will download json file from server first when OTA process is triggered, try to fetch information and proceed further as per below logic:&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-53B6B309-A93C-4F7A-B4E1-55452A440E5D-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:8;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:8;184:15&#34;&gt;resized_json_parse_logic&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;factory-image-structure&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:6;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:6;184:15&#34;&gt;Factory Image Structure&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:42;184:15&#34;&gt;The program memory of an application that include the OTA service will be organized as shown in the image below.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-ECFFE880-ABC1-404E-99B3-B77DDDCD1E7A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:9;184:15&#34; dita-ot:image-width=&#34;624&#34; dita-ot:image-height=&#34;283&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:9;184:15&#34;&gt;Application_Image3&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;application-header-structure-boot-control-area&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:7;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:7;184:15&#34;&gt;Application Header Structure (boot control area)&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:7;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:43;184:15&#34;&gt;A boot control area of size 4 KB is maintained in internal flash area of device as a shared memory between the application and the bootloader. This area will contain fields as shown in figure below.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-638A782B-60C4-4ECE-A459-2517B31F1C56-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:10;184:15&#34; dita-ot:image-width=&#34;605&#34; dita-ot:image-height=&#34;251&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:10;184:15&#34;&gt;ota_header&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;image-download-process&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:8;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:8;184:15&#34;&gt;Image download process&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:8;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:44;184:15&#34;&gt;1.The OTA service task identifies that the server manifest includes an image with a version number numerically higher than the current version being executed in the system. Image version number is a C macro that can be defined in MHC.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:45;184:15&#34;&gt;2.The transport layer starts downloading the image using the link in the URL. If the URL starts with an &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:29;184:15&#34;&gt;https://&lt;/codeph&gt; TLS is automatically used.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:46;184:15&#34;&gt;3.Once the download is completed successfully, the OTA framework verifies the image by checking the SHA-256 hash, once transport layer finished receiving all data.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:47;184:15&#34;&gt;If download fails, system will go to &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:30;184:15&#34;&gt;IDLE&lt;/codeph&gt;. If &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:31;184:15&#34;&gt;Auto Update&lt;/codeph&gt; is enabled, user need to reset the device to initiate OTA again.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:48;184:15&#34;&gt;4.If image digest verification is failed, user will be notified using user registered callback.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:49;184:15&#34;&gt;If image digest verification is passed, OTA framework will create an entry in OTA database present in external filesystem. OTA database is maintained in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:32;184:15&#34;&gt;csv&lt;/codeph&gt; format.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:50;184:15&#34;&gt;Each entry in the OTA database will contain following information:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:51;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:29;184:15&#34;&gt;a. image name:&lt;/b&gt; name of downloaded image.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:52;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:30;184:15&#34;&gt;b. image status:&lt;/b&gt; This will be set as &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:31;184:15&#34;&gt;0xFE&lt;/b&gt;, for newly downloaded image.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:53;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:32;184:15&#34;&gt;c. version number:&lt;/b&gt; Version number of image obtained from JSON manifest.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:54;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:33;184:15&#34;&gt;d. image digest:&lt;/b&gt; Image digest obtained from JSON manifest.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:55;184:15&#34;&gt;5.Once entry is made successfully, OTA framework updates &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:33;184:15&#34;&gt;Boot-Control-header&lt;/codeph&gt;, status field of the current application to &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:34;184:15&#34;&gt;Disabled&lt;/b&gt; 0xF0.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:56;184:15&#34;&gt;User will be notified about successful OTA process via user registered callback and wait for system reset or trigger auto system reset based on MHC configuration to load new image into the program flash memory.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;blockflow-diagram&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:9;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:9;184:15&#34;&gt;Block/Flow Diagram&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:9;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:57;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:35;184:15&#34;&gt;a. OTA Service:&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-8703A25E-0F5F-4352-863A-C91C5A658D77-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:11;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:11;184:15&#34;&gt;resized_otaservice_flowchart&lt;/alt&gt;&lt;/image&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:7;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:21;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:58;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:36;184:15&#34;&gt;OTA Start:&lt;/b&gt; OTA process can be triggered using various methods :&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:59;184:15&#34;&gt;Periodically : System will communicate with OTA server periodically (configured by user) to check if any new image is available and initiate OTA process accordingly.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:60;184:15&#34;&gt;Manually : OTA can be triggerred by the application by calling an API.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:61;184:15&#34;&gt;Other sources : User may configure/implement any other means of source like MQTT server to trigger OTA. This is a subset of the manual triggers.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:22;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:62;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:37;184:15&#34;&gt;Download JSON manifest file and check for version :&lt;/b&gt; JSON file will be downloaded from server first , once OTA process is initiated. JSON file will have version number along with other details. Now system will try to compare the extracted version number from JSON file with currently running application version number and decide accordingly the next step :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:8;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:23;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:63;184:15&#34;&gt;If version number is same abort the OTA process because new image is not available.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:24;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:64;184:15&#34;&gt;If version number is different and higher than the current application version number, then system will continue with OTA process.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:25;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:65;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:38;184:15&#34;&gt;Patch Functionality :&lt;/b&gt; If patch functionality is enabled in the application , it will try fetch relative information from JSON manifest and proceed accordingly.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:26;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:66;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:39;184:15&#34;&gt;Initiating image Download process :&lt;/b&gt; Based on user configuration system will go for image downloading or will wait for download trigger by user.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:27;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:67;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:40;184:15&#34;&gt;Digest verify :&lt;/b&gt; SHA-256 verification will be done for downloaded image.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:28;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:68;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:41;184:15&#34;&gt;Update OTA database file system :&lt;/b&gt; If digest verification is successful , OTA database will be updated in file system for new image.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:29;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:69;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:42;184:15&#34;&gt;Storing image in the external flash and wait :&lt;/b&gt; If downloaded successfully, the image will be stored in the external flash using standard FS present in Harmony. Afterwards system will perform following steps depending upon user configuration :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:9;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:30;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:70;184:15&#34;&gt;reset automatically if Auto reset option is enabled .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:31;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:71;184:15&#34;&gt;wait till user application triggers reset.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:72;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:43;184:15&#34;&gt;b. Image Programming:&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-6CEDAF97-6147-4C6F-9FE0-CDA600B31D9A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:12;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:12;184:15&#34;&gt;resized_bootloader_flowchart&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:73;184:15&#34;&gt;1.During each system boot-up, bootloader checks if it needs to program any new, valid image from the external flash. Bootloader goes to program mode, if-&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:74;184:15&#34;&gt;1.any newly downloaded image present in the external flash.&lt;?linebreak?&gt;2.if the already present image in the program flash is not &#34;validated&#34; during previous boot.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:75;184:15&#34;&gt;There are two conditions :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:10;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:32;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:76;184:15&#34;&gt;whether the Application Image in Program-Flash area is valid (indicated by the STATUS field, value of 0xF8 in image boot control area of internal flash), and&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:33;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:77;184:15&#34;&gt;whether it has been confirmed that no errors were present during the previous boot (indicated by the STATUS field of image Database in the external flash, value of 0xF8 ).&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:78;184:15&#34;&gt;According to bootloader logic if these two conditions are satisfied it will not go to &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:34;184:15&#34;&gt;Program Mode&lt;/codeph&gt; and the bootloader immediately jumps to the application image present in the program-flash area of the device.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:79;184:15&#34;&gt;2.If two conditions mentioned in the step 1 are not satisfied, the bootloader switches to Image Program Mode. In Image Program Mode bootloader follows Image Programming sequence, which finds the highest ranked image in Image-Store(external flash), erases the Program-Flash area and copies the selected image to the Program-Flash area if the image is successfully verified. As the newly downloaded image with highest version is set as the highest ranked, during the first boot time after the Image-downloading, the bootloader attempts to load the newly downloaded image at the first try.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:80;184:15&#34;&gt;The bootloader choses the highest ranked image to boot. The images are ranked in following order:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeblock:3;184:15&#34;&gt;1.The downloaded , valid Image with highest version. &amp;#xD; &amp;#xD; 2.The next valid, higher version image. &amp;#xD; &amp;#xD; 3.The next known valid, higher version image. &amp;#xD; &amp;#xD; .&amp;#xD; &amp;#xD; .&amp;#xD; &amp;#xD; .&amp;#xD; &amp;#xD; 4.Default (Golden/Factory) image.&amp;#xD;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:81;184:15&#34;&gt;3.If the image is not valid, the bootloader invalidates the image by setting “Invalidate” &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:35;184:15&#34;&gt;0xF0&lt;/codeph&gt; in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:36;184:15&#34;&gt;STATUS&lt;/codeph&gt; field of image in OTA database present in the external flash and restarts the Image-Programming sequence.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:82;184:15&#34;&gt;4.If image is verified successfully, bootloader updates &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:37;184:15&#34;&gt;STATUS&lt;/codeph&gt; field of boot control area in internal flash as &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:38;184:15&#34;&gt;Unbooted (0xFC)&lt;/codeph&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;patch-functionality&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:10;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:10;184:15&#34;&gt;Patch functionality&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:10;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:83;184:15&#34;&gt;OTA service provides facility of patch OTA . User can configure &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:39;184:15&#34;&gt;PATCH&lt;/codeph&gt; functionality using MHC menu ,for more details on configuration please follow - &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:44;184:15&#34;&gt;OTA System Service Configuration&lt;/b&gt; section. Patching is a concept using which , user can generate a binary file, that contains only the difference between the current image and base image version. For generating diff file user can download utility(jojodiff07) and follow instructions from &lt;xref class=&#34;- topic/xref &#34; href=&#34;https://github.com/MicrochipTech/jojodiff&#34; format=&#34;html&#34; scope=&#34;external&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:1;184:15&#34;&gt;&lt;?ditaot usertext?&gt;here&lt;/xref&gt; . Other versions of the jojodiff utility may lead to compatiblity issues and may cause failure in the OTA patch update. Therefore it is recommended to use the jojodiff07 version for creating the diff file.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:84;184:15&#34;&gt;User can provide required parameters for patch in JSON file ( Please follow &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:40;184:15&#34;&gt;OTA server JSON manifest&lt;/codeph&gt; section , for more details ) . OTA Service will follow below steps during while processing &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:41;184:15&#34;&gt;patch functionality&lt;/codeph&gt; :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:11;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:34;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:85;184:15&#34;&gt;Check if base version is present in OTA DB&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:12;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:35;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:86;184:15&#34;&gt;If not present, sysetm will try to download full image from server .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:36;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:87;184:15&#34;&gt;If present, system will proceed with logic for patch functionality.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:37;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:88;184:15&#34;&gt;During patching system will at first verify downloaded patch image using SHA-256 .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:38;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:89;184:15&#34;&gt;If patch file is verified successfully , system will generate target binary image.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:39;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:90;184:15&#34;&gt;After successful generation of target image , SHA-256 verification will be done against target image .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:40;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:91;184:15&#34;&gt;If target image is verified successfully , same will be stored in OTA DB present in the external flash.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:41;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:92;184:15&#34;&gt;Finally new image will be applied by bootloader as per application logic.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-8A28BE3F-64CA-4262-896C-E8395A525496-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:13;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:13;184:15&#34;&gt;resized_patch_details&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;securing-ota-by-verifying-images-in-bootloader&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:11;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:11;184:15&#34;&gt;Securing OTA by verifying Images in Bootloader&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:11;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:93;184:15&#34;&gt;Images will be verified by using image's ECDSA signature on Bootloader. For this user need to provide image's signature , generated in R-S format to &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:42;184:15&#34;&gt;Signature&lt;/codeph&gt; field of JSON manifest file (Please follow &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:43;184:15&#34;&gt;Generating Signature&lt;/codeph&gt; section of this document). This &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:44;184:15&#34;&gt;Signature&lt;/codeph&gt; will be stored by application in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:45;184:15&#34;&gt;ota&lt;/codeph&gt; database present in external flash and bootlader will use the same for image verification.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:94;184:15&#34;&gt;We have implemented 2 configurations of OTA Bootloader to perform signature verification of images:&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ol:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:42;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:95;184:15&#34;&gt;In software using Wolfcrypt (ota_booloader_wolfcrypt.x).&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:43;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:96;184:15&#34;&gt;In Hardware using Trust Flex device (ota_booloader_trustflex.x).&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:97;184:15&#34;&gt;For more information on ota bootloader, please follow &lt;xref class=&#34;- topic/xref &#34; href=&#34;https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01/tree/v3.6.1/apps/ota_bootloader&#34; format=&#34;html&#34; scope=&#34;external&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:2;184:15&#34;&gt;&lt;?ditaot usertext?&gt;Bootloader document&lt;/xref&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:98;184:15&#34;&gt;User need to load the corresponding bootloader configuration as &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:46;184:15&#34;&gt;loadable&lt;/codeph&gt; component as per application requirement. Loading bootloader into application is required , only for generating &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:47;184:15&#34;&gt;factory&lt;/codeph&gt; image. For more information on configuring &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:48;184:15&#34;&gt;loadable project&lt;/codeph&gt; , please refer &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:49;184:15&#34;&gt;OTA System Service Configuration&lt;/codeph&gt; section of &lt;xref class=&#34;- topic/xref &#34; href=&#34;configuration.md#configuring-the-library&#34; format=&#34;html&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:3;184:15&#34;&gt;&lt;?ditaot usertext?&gt;Configuring the library&lt;/xref&gt;.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:99;184:15&#34;&gt;Whenever, user wants to apply successfully downloaded new &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:50;184:15&#34;&gt;ota&lt;/codeph&gt; image, bootloader will take the control. Bootloader will perform signature verification of the image :&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ol:2;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:44;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:100;184:15&#34;&gt;if signature verfication is failed;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:13;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:45;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:101;184:15&#34;&gt;Bootloader will try to load another version of OTA image if present in OTA database.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:46;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:102;184:15&#34;&gt;If bootloader can not find another image , it will load the factory image to the internal flash.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:47;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:103;184:15&#34;&gt;if signature verification is passed; bootloader will load the image after successfully verifying digest.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:104;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:45;184:15&#34;&gt;NOTE : Secure OTA is not supported, when &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:51;184:15&#34;&gt;PATCH&lt;/codeph&gt; functionality is enabled.&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;enabling-secure-ota&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:12;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:12;184:15&#34;&gt;Enabling Secure OTA&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:12;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:105;184:15&#34;&gt;By default, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:52;184:15&#34;&gt;secure ota&lt;/codeph&gt; option will be disabled. To enable it , user need to follow below steps.&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ol:3;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:48;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:106;184:15&#34;&gt;Enable &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:53;184:15&#34;&gt;Secure OTA Functionality&lt;/codeph&gt; as described in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:54;184:15&#34;&gt;configure Advances Configuration&lt;/codeph&gt; section of &lt;xref class=&#34;- topic/xref &#34; href=&#34;configuration.md#configuring-the-library&#34; format=&#34;html&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:4;184:15&#34;&gt;&lt;?ditaot usertext?&gt;Configuring the library&lt;/xref&gt;.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:49;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:107;184:15&#34;&gt;Define &#34;SYS_OTA_SECURE_BOOT_ENABLED&#34; in bootloader project. For more details please follow &lt;xref class=&#34;- topic/xref &#34; href=&#34;https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01/tree/v3.6.1/apps/ota_bootloader&#34; format=&#34;html&#34; scope=&#34;external&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:5;184:15&#34;&gt;&lt;?ditaot usertext?&gt;Bootloader document&lt;/xref&gt;.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;verification-of-factory-image&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:13;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:13;184:15&#34;&gt;Verification of factory image&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:13;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:108;184:15&#34;&gt;For verification of factory image user need to follow below steps :&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ol:4;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:50;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:109;184:15&#34;&gt;User need to create &#34;.bin&#34; format of HEX image, created while building factory image using MPLABX . User need to use following command:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:110;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:55;184:15&#34;&gt;python hex2bin.py -i &#34;path of hex image&#34; -o &#34;path of bin file&#34; -f 0&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:111;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:56;184:15&#34;&gt;example : python hex2bin.py -i &#34;E:\ota_new_festeure\factory_image_verification\hex2bin\factory_image.hex&#34; -o &#34;E:\ota_new_festeure\factory_image_verification\hex2bin\factory_image1.bin&#34; -f 0&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:112;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:57;184:15&#34;&gt;hex2bin.py&lt;/codeph&gt; file can be found in the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:58;184:15&#34;&gt;tools&lt;/codeph&gt; folder of your project. This folder will be created when you generate MHC code with the OTA service included in your project.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:51;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:113;184:15&#34;&gt;Generate signature, by followinf &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:59;184:15&#34;&gt;Generating Signature&lt;/codeph&gt; section of this document .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:52;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:114;184:15&#34;&gt;Store the generated signature in target system using following console command (Factory image should already be loaded in the system and factory image should be running):&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:115;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:60;184:15&#34;&gt;sysota set factory sign &#34;signature&#34;&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:116;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:61;184:15&#34;&gt;example : sysota set factory sign &#34;FkV6dJ9kMqJrJypp/0/V8MdIV4Y6ocNX5NVb5zvwDa2ygXJsVHDQZGCNR/L0lp13xroX9biwMBbpi/ZqJi1Erw==&#34;&lt;/codeph&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:117;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:46;184:15&#34;&gt;NOTE :&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:118;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:47;184:15&#34;&gt;1. It is recommended to perform above mentioned steps and store signature in target device as soon as application runs for the first time. This will ensure safe and successful loading of &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:62;184:15&#34;&gt;factory image&lt;/codeph&gt; in the system , whenever required. This is one time activity&lt;/b&gt;&lt;?linebreak?&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:48;184:15&#34;&gt;2. If &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:63;184:15&#34;&gt;factory reset&lt;/codeph&gt; is triggered without storing signature of &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:64;184:15&#34;&gt;factory image&lt;/codeph&gt;, system will unable to load image and run.&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;generating-public-key-and-private-key&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:14;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:14;184:15&#34;&gt;Generating Public Key and Private Key&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:14;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:119;184:15&#34;&gt;To generate private key : &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:65;184:15&#34;&gt;openssl ecparam -genkey -name prime256v1 -noout -out ECC_prime256v1.key&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:120;184:15&#34;&gt;To extract public key from certificate : &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:66;184:15&#34;&gt;openssl.exe ec -in ECC_prime256v1.key -pubout -out ECC_prime256v1.pub&lt;/codeph&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;generating-signature&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:15;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:15;184:15&#34;&gt;Generating Signature&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:15;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:121;184:15&#34;&gt;User need to generate signature in R-S format and provide it in manifest file. To generate R-S format of &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:67;184:15&#34;&gt;image signature&lt;/codeph&gt;, user may take any approach; example: using openssl library etc.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:122;184:15&#34;&gt;Alternately, user may use python script &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:68;184:15&#34;&gt;ecdsaSign.py&lt;/codeph&gt; present in the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:69;184:15&#34;&gt;tools&lt;/codeph&gt; folder of project. This folder will be created when user generates MHC code with the OTA service included in project.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:123;184:15&#34;&gt;User may use below command, for generating signature :&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:124;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:70;184:15&#34;&gt;python ecdsaSign.py -f [image file name] -k [private key file name]&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:125;184:15&#34;&gt;Example : &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:71;184:15&#34;&gt;python sign.py -f image.bin -k ECC_prime256v1.key&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:126;184:15&#34;&gt;image.bin -&amp;gt; image file name.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:127;184:15&#34;&gt;ECC_prime256v1.key -&amp;gt; private key file name.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;providing-signature-in-manifest-file&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:16;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:16;184:15&#34;&gt;Providing Signature in Manifest file:&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:16;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:128;184:15&#34;&gt;User need to mention &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:72;184:15&#34;&gt;Signature&lt;/codeph&gt; in Manifest file, by introducing &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:73;184:15&#34;&gt;Signature&lt;/codeph&gt; field in the file as shown below:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;json&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeblock:4;184:15&#34;&gt;{ &#34;ota&#34;: [ { &#34;Version&#34;: 2, &#34;URL&#34;: &#34;http://192.168.43.173:8000/wifi_ota_app_upgrade_ver2.bin&#34;, &#34;Digest&#34;: &#34;d6f951e9ad5af844068a3ce1cc25e86ac945fa371791ca3e493f91672d95a2d4&#34;, &#34;Signature&#34;: &#34;pra2wlOiZO/zjzqaP9DZGe9dmm0aC4gx4r0yoyI7DU3sVpkdJ034v5XoiN5jdpeuLRge4RjsB/KSrVho8pwC2w==&#34;, &#34;EraseVer&#34;: false } ] } &lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;provisioning-trustflex-parts-for-ota-fw-verification&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:17;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:17;184:15&#34;&gt;Provisioning TrustFlex parts for OTA FW Verification&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:17;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:129;184:15&#34;&gt;ATECC608 based Trustflex can be used to perform secure firmware verification. The steps to provision it using TPDS2 is documented here.&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ol:5;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:53;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:130;184:15&#34;&gt;Setup TPDS V2&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:131;184:15&#34;&gt;Setup TPDSV2 following the steps at https://www.microchip.com/en-us/product/SW-TPDSV2&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:132;184:15&#34;&gt;Make sure that you update TPDS after installation.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:54;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:133;184:15&#34;&gt;Hardware Setup&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:14;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:55;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:134;184:15&#34;&gt;Plug in the DT100104 click board into the microbus interface.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:56;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:135;184:15&#34;&gt;Make sure that you flip all DIP switches other than SW1:2 in click board to OFF position. This will configure the board to expose the TrustFlex device over the I2C Bus.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-533D0E3F-0F37-4594-9E4F-1A1FAF0AA03A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:14;184:15&#34; dita-ot:image-width=&#34;765&#34; dita-ot:image-height=&#34;478&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:14;184:15&#34;&gt;trust_flex_image1&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:57;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:136;184:15&#34;&gt;Device Firmware&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:137;184:15&#34;&gt;TPDS talks to the trust elements using the KitProtocol. So, before using TPDS to provision TrustFlex with the Rio2 device , we need to flash the &lt;xref class=&#34;- topic/xref &#34; href=&#34;https://github.com/MicrochipTech/PIC32MZW1_Projects/tree/main/pic32mzw1_kitprotocol&#34; format=&#34;html&#34; scope=&#34;external&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;xref:6;184:15&#34;&gt;&lt;?ditaot usertext?&gt;KitProtocol firmware&lt;/xref&gt; into the dev-board.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:15;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:58;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:138;184:15&#34;&gt;To update the kit-protocol firmware to use I2C1 instead of the default I2C2 (connected to the onboard TnG module), change HAL_I2C_I2C2 defined in hal_i2c_harmony.h file of the kit protocol project to HAL_I2C_I2C1.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:59;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:139;184:15&#34;&gt;When the firmware boots-up, the UART console (15008N1) will display the devices detected.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-9D236600-5063-4EEB-B546-5994E9CD5836-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:15;184:15&#34; dita-ot:image-width=&#34;673&#34; dita-ot:image-height=&#34;320&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:15;184:15&#34;&gt;trust_flex_image2&lt;/alt&gt;&lt;/image&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-AFC59CF8-F404-49B9-A1B5-1F3ACCD8457A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:16;184:15&#34; dita-ot:image-width=&#34;679&#34; dita-ot:image-height=&#34;294&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:16;184:15&#34;&gt;trust_flex_image3&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:60;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:140;184:15&#34;&gt;Loading the Public Key for FW verification (Provisioning)&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:16;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:61;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:141;184:15&#34;&gt;Open TPDS and select ATECC608-TFXTLS configurator under the &#34;Configurators&#34; Tab.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-C314C285-63A0-4EFA-A619-2DB83436B49A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:17;184:15&#34; dita-ot:image-width=&#34;774&#34; dita-ot:image-height=&#34;602&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:17;184:15&#34;&gt;SelectTrustFlexConfigurator&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:62;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:142;184:15&#34;&gt;Select the Firmware Validation (Secure Boot) usecase from the next screen&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-07CD1833-D8E2-40B5-8236-22A2799E5571-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:18;184:15&#34; dita-ot:image-width=&#34;905&#34; dita-ot:image-height=&#34;477&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:18;184:15&#34;&gt;trust_flex_image5&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:63;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:143;184:15&#34;&gt;Load the public key into Slot 15&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-D1BA4250-68ED-4018-A2F3-65ED86AA763A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:19;184:15&#34; dita-ot:image-width=&#34;787&#34; dita-ot:image-height=&#34;477&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:19;184:15&#34;&gt;trust_flex_image6&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:64;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:144;184:15&#34;&gt;Generate a provisioning package and use it to provision the sample.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:17;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:65;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:145;184:15&#34;&gt;The attached kit with the trustFlex device mounted on it will be automatically detected and provisioned. &lt;image class=&#34;- topic/image &#34; href=&#34;GUID-3A8E3532-9296-42FF-80B5-BA4090816965-low.png&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:20;184:15&#34; dita-ot:image-width=&#34;935&#34; dita-ot:image-height=&#34;424&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:20;184:15&#34;&gt;trust_flex_image7&lt;/alt&gt;&lt;/image&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-10D67F6B-6F86-4403-B66B-230F2DEAAFBF-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:21;184:15&#34; dita-ot:image-width=&#34;371&#34; dita-ot:image-height=&#34;152&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:21;184:15&#34;&gt;trust_flex_image8&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:66;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:146;184:15&#34;&gt;You can now use the device to verify image signatures in the bootloader.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;configuration-fuses&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:18;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:18;184:15&#34;&gt;Configuration fuses&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:18;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:147;184:15&#34;&gt;Due to the way configuration fuses are stored in the device, they cannot be modified by the bootloader at runtime. Consequently, when the bootloader loads the application, the config fuses set in the bootloader (using &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:74;184:15&#34;&gt;#pragma&lt;/codeph&gt; in the bootloader code) will be retained.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:148;184:15&#34;&gt;Unlike most of the other PIC32MZ devices, some of the configuration values of PCI32MZW1 / WFI32 can be overridden at runtime. These are marked as loadable configurations in the datasheet. Please refer to the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:75;184:15&#34;&gt;Configuration Bits&lt;/codeph&gt; section of the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:76;184:15&#34;&gt;SPECIAL FEATURES&lt;/codeph&gt; chapter of the PIC32MZW1 datasheet to see a list of loadable configurations and how to apply them. These loadable configs can be applied at runtime from the application.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;generating-the-ota-image&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:19;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:19;184:15&#34;&gt;Generating the OTA image&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:19;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:149;184:15&#34;&gt;Images that are downloaded from the server as part of the OTA process should be stored in &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:77;184:15&#34;&gt;.bin&lt;/codeph&gt; format as opposed to the Intel Hex format that is generated by MPLABX.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:150;184:15&#34;&gt;To convert the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:78;184:15&#34;&gt;hex&lt;/codeph&gt; file to &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:79;184:15&#34;&gt;bin&lt;/codeph&gt; format, you can use the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:80;184:15&#34;&gt;hex2bin&lt;/codeph&gt; tool in the &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:81;184:15&#34;&gt;tools&lt;/codeph&gt; folder of your project. This folder will be created when you generate MHC code with the OTA service included in your project.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:18;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:67;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:151;184:15&#34;&gt;In case of a windows machine, you can execute the command &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:82;184:15&#34;&gt;hex2bin.exe -i &amp;lt;path to hex file in the dist folder&amp;gt;&lt;/codeph&gt;. In case your development environment is based on a non-Windows OS, you can execute the python script with the same arguments. Make sure that you have python3 installed in your machine.&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:68;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:152;184:15&#34;&gt;User may execute &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:83;184:15&#34;&gt;hex2bin&lt;/codeph&gt; tool directly from &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:84;184:15&#34;&gt;tools&lt;/codeph&gt; folder without any argument. In that case, tool will search for &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:85;184:15&#34;&gt;hex&lt;/codeph&gt; file in default path &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:86;184:15&#34;&gt;&#34;..\project.X\dist\project\production&#34;&lt;/codeph&gt; and generate &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:87;184:15&#34;&gt;bin&lt;/codeph&gt; file .&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:69;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:153;184:15&#34;&gt;User may also execute post build command &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:88;184:15&#34;&gt;../../tools/hex2bin/hex2bin.exe&lt;/codeph&gt; from MPLABx project itself :&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:19;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:70;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:154;184:15&#34;&gt;Right click on the project and click on properties.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-5BBFBE7A-316E-4134-B169-E8C5303F32AD-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:22;184:15&#34; dita-ot:image-width=&#34;471&#34; dita-ot:image-height=&#34;647&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:22;184:15&#34;&gt;project_loading&lt;/alt&gt;&lt;/image&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:20;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:71;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:155;184:15&#34;&gt;Select &#34;building&#34;, insert below command and click &#34;OK&#34;:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:156;184:15&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:89;184:15&#34;&gt;../../tools/hex2bin/hex2bin.exe &lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:157;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:49;184:15&#34;&gt;Note&lt;/b&gt;: python should be present in the system variable path.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-98F6D44F-52D2-47A0-A7A4-3A832C870C06-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:23;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:23;184:15&#34;&gt;resized_post_build&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;ota-server&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:20;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:20;184:15&#34;&gt;OTA server&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:20;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:158;184:15&#34;&gt;Any standard http/https server can be used as OTA server as long as it hosts a manifest file with the mandatory fields.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:21;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:72;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:159;184:15&#34;&gt;For testing the service, you may also use a simple python command to create a local &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:50;184:15&#34;&gt;HTTP&lt;/b&gt; server using below steps:&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;ul:22;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:73;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:160;184:15&#34;&gt;Open command prompt and change directory to the folder where json file/ota image is present.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-BA709067-E54C-48AF-91E4-0263108E8CD9-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:24;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:24;184:15&#34;&gt;resized_Change_dir&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;li:74;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:161;184:15&#34;&gt;Use below python command in command prompt:&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; outputclass=&#34;python&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeblock:5;184:15&#34;&gt; python -m SimpleHTTPServer 8000&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-3433357A-1585-4518-99C6-CB513BDE9A86-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:25;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:25;184:15&#34;&gt;resized_http_server&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;integrating-bootloader&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:21;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:21;184:15&#34;&gt;Integrating bootloader&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:21;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:162;184:15&#34;&gt;It is required to integrate the bootloader and OTA application image to create a single unified HEX file. To integrate 2 images we can use hexmate tool, which is readily available with MPLABX package as part of the standard installation. To combine the hex files - please follow steps mentioned in configuration page &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;b:51;184:15&#34;&gt;OTA System Service Configuration&lt;/b&gt;.&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;resolving-data-conflict--compilation-error&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;topic:22;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;title:22;184:15&#34;&gt;Resolving &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:90;184:15&#34;&gt;Data Conflict &lt;/codeph&gt; Compilation error&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;body:22;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;p:163;184:15&#34;&gt;During compilation if user is facing &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:91;184:15&#34;&gt;Data conflict at address..&lt;/codeph&gt; compilation error , please check if there is any mismatch of configuration ( &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:92;184:15&#34;&gt;#pragma &lt;/codeph&gt;) between bootloader and application. User may simply compare &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;codeph:93;184:15&#34;&gt;initialization.c&lt;/codeph&gt; files of both the projects to check mismatch.&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-80EAA68A-0040-4390-81BF-3A5A6C6BBB6A-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;image:26;184:15&#34; dita-ot:image-width=&#34;700&#34; dita-ot:image-height=&#34;400&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/4z4pndcjubb/work/3/en-US/GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md&#34; xtrc=&#34;alt:26;184:15&#34;&gt;resized_pragma_mismatch&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.md"/><meta name="wh-out-relpath" content="GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body id="ota-system-service-usage" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="MPLAB Harmony PIC32MZW1/WFI32 wireless system services &#xA;    "/></a>
                    <div class=" wh_publication_title "><a href="index.html">MPLAB Harmony PIC32MZW1/WFI32 wireless system services 
    </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services"><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div></li><li><div class="topicref" data-id="over-the-air-ota-firmware-update-system-service"><div class="title"><a href="GUID-AF87F0BB-E319-4436-A302-357BFA7E193E.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6</ph>
Over The Air (OTA) firmware update System Service</a></div></div></li><li class="active"><div class="topicref" data-id="ota-system-service-usage"><div class="title"><a href="GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6.1</ph>
OTA System Service Usage</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            <div class="row" style="margin-top: -1em;"><div class="col-lg-7 col-md-7 col-sm-12 offset-lg-3 offset-md-3 text-right border-bottom mb-1"><h2 class="text-dark header_title">
    </h2></div></div>
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="true"><div data-tocid="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11" class="topicref" data-id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-653E183F-71C9-4BD2-9698-4D4BB2A2992A.html" id="mplab-harmony-3-pic32mzw1wfi32-wireless-system-services-d1416e11-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 PIC32MZW1/WFI32 wireless system services</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="app-debug-system-service-d1416e19" class="topicref" data-id="app-debug-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action app-debug-system-service-d1416e19-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-172B28B0-8A47-4C93-8023-8886A08BCD06.html" id="app-debug-system-service-d1416e19-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
App Debug System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="mqtt-system-service-d1416e204" class="topicref" data-id="mqtt-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action mqtt-system-service-d1416e204-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6D4A7590-A5FE-418D-8A39-4F13DF7618BD.html" id="mqtt-system-service-d1416e204-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
MQTT System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="net-system-service-d1416e413" class="topicref" data-id="net-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action net-system-service-d1416e413-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-F15AF9B8-740F-41C4-BFC2-850D793F858B.html" id="net-system-service-d1416e413-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.3</ph>
Net System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-system-service-d1416e695" class="topicref" data-id="wi-fi-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-system-service-d1416e695-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6EA44F54-91D8-42F6-A226-793CA7D06695.html" id="wi-fi-system-service-d1416e695-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4</ph>
Wi-Fi System Service</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="wi-fi-provisioning-system-service-d1416e872" class="topicref" data-id="wi-fi-provisioning-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action wi-fi-provisioning-system-service-d1416e872-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-6C1BB28E-7F9B-4582-8E74-E301F89C58AC.html" id="wi-fi-provisioning-system-service-d1416e872-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.5</ph>
Wi-Fi provisioning System Service</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="over-the-air-ota-firmware-update-system-service-d1416e1025" class="topicref" data-id="over-the-air-ota-firmware-update-system-service" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action over-the-air-ota-firmware-update-system-service-d1416e1025-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-AF87F0BB-E319-4436-A302-357BFA7E193E.html" id="over-the-air-ota-firmware-update-system-service-d1416e1025-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6</ph>
Over The Air (OTA) firmware update System Service</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" class="active"><div data-tocid="ota-system-service-usage-d1416e1033" class="topicref" data-id="ota-system-service-usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-E13DC21B-3F94-455C-8DB3-48F8F7163844.html" id="ota-system-service-usage-d1416e1033-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6.1</ph>
OTA System Service Usage</a></div></div></li><li role="treeitem"><div data-tocid="ota-system-service-configuration-d1416e1041" class="topicref" data-id="ota-system-service-configuration" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-44230E49-6079-4901-9D7C-F71412C3B9EA.html" id="ota-system-service-configuration-d1416e1041-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6.2</ph>
OTA System Service Configuration</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="ota-system-service-interface-d1416e1049" class="topicref" data-id="ota-system-service-interface" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ota-system-service-interface-d1416e1049-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-F8A21576-2DFD-406F-9736-CEFDE7AD5207.html" id="ota-system-service-interface-d1416e1049-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6.3</ph>
OTA System Service Interface</a></div></div></li><li role="treeitem"><div data-tocid="ota-system-service-developers-guide-d1416e1146" class="topicref" data-id="ota-system-service-developers-guide" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-C340E1A4-6E08-4399-8480-E07BA98EDFB2.html" id="ota-system-service-developers-guide-d1416e1146-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.6.4</ph>
OTA System Service Developer's Guide</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="web-socket-server-wss-system-service-d1416e1154" class="topicref" data-id="web-socket-server-wss-system-service" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action web-socket-server-wss-system-service-d1416e1154-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-097A4209-8474-480E-A141-6C8FC60A7671.html" id="web-socket-server-wss-system-service-d1416e1154-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.7</ph>
Web Socket Server (WSS) System Service</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388" class="topicref backmatter backmatter_parent" data-id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B.html" id="GUID-0FB3F908-88EE-45CE-94F5-E97AF9049C9B-d1416e1388-link">Microchip Information</a></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1" style="">1.6.1 OTA System Service Usage</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="description"><h2 class="- topic/title title topictitle2" id="ariaid-title2" style=""> Description</h2><div class="- topic/body body"><p class="- topic/p p">The OTA System Service provides simple APIs to enable Over the Air system firmware image upgrade. While using the service, the application does not have to handle low level states of a TCP/IP Connection, periodic update check triggers, file integrity checks etc. since the service internally takes care of that. The user also does not required extensive Security domain knowledge to establish a secured connection via the application using OTA System Service library.</p><p class="- topic/p p">The user would need to configure the Home AP credentials (like SSID and security items). The Wi-Fi service will use the credentials to connect to the Home AP and acquire an IP address. Once the IP address is obtained OTA service will perform OTA update process based on user configuration in MHC.</p><div class=""><img class="- topic/image image break break" src="GUID-65F5D2E9-64F2-4D9B-9542-BDD5DD323EC6-low.png" alt="resized_wifi_sta_http_server_1"/></div><p class="- topic/p p">The service state-machine will try to connect with a pre-defined OTA manifest server address and download the new image when a version higher than the version being currently executed is identified. The downloaded image will be stored in the external SPI flash initially. Upon reset, the image will be transferred to the internal flash (NVM) by the OTA bootloader.  Once the image is successfully programmed, the updated image from the server will be executed.</p><p class="- topic/p p">The OTA service has two major components:</p><p class="- topic/p p">1.The OTA service task state-machine that will be integrated into the customer application. This task is responsible for polling for an update image, downloading and verifying an image when an update is detected, and resetting the system to apply the newly downloaded image.</p><p class="- topic/p p">2.The OTA bootloader that is responsible for identifying the presence of an updated image in the external flash filesystem and transferring it to the program flash memory (NVM).</p><p class="- topic/p p">A <code class="+ topic/ph pr-d/codeph ph codeph">factory image</code> is a unified application image that contains the bootloader and the application in a single file that can be programmed into the device using an external programmer. To create a factory image, it is required to load the <code class="+ topic/ph pr-d/codeph ph codeph">ota_bootloader</code> project located in the <code class="+ topic/ph pr-d/codeph ph codeph">apps</code> folder of <code class="+ topic/ph pr-d/codeph ph codeph">wireless_apps_pic32mzw1_wfi32e01</code> repo into the application project. A unified hex file will be created at the end of the compilation process. Internally, this step uses the <code class="+ topic/ph pr-d/codeph ph codeph">Hexmate</code> tool after compiling the application project and the bootloader project independently. More details about this can be found in <strong class="+ topic/ph hi-d/b ph b">OTA System Service Configuration</strong> section of this manual.</p><p class="- topic/p p">OTA service uses the file system component from MHC (MPLAB® Harmony Configurator) and is configured to use an external SPI flash by default. However, this can be modified to use a different medium without major changes since the OTA service uses the file system abstraction to talk to the external storage medium.</p><p class="- topic/p p">An OTA image database is maintained by the service in the filesystem. It contains details about the downloaded images (image name, image status,image version, digest key), which will be used by bootloader and OTA service.</p><div class=""><img class="- topic/image image break break" src="GUID-71F4624D-82FD-4F4D-A93E-96C7D650E35A-low.png" alt="SPI_com"/></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="ota-service-framework-architecture-overview"><h2 class="- topic/title title topictitle2" id="ariaid-title3" style=""> OTA Service Framework Architecture Overview</h2><div class="- topic/body body"><p class="- topic/p p">Over the Air (OTA) firmware upgrade feature is designed with a two step process, Image Downloading and Image Programming process.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Image Downloading is processed by the OTA service.</p></li><li class="- topic/li li"><p class="- topic/p p">Image Programming is processed by the OTA bootloader.</p></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA service</strong> is a Harmony component which includes the system level logic implementation and uses <code class="+ topic/ph pr-d/codeph ph codeph">OTA core</code> APIs. This harmony component will provide some user configurable parameters, based on which service level code will be generated with the corresponding logic.  Please follow <code class="+ topic/ph pr-d/codeph ph codeph">Figure-1</code> and <code class="+ topic/ph pr-d/codeph ph codeph">Figure-2</code> for better understanding of this flow.</p><div class=""><img class="- topic/image image break break" src="GUID-6AC0F0AC-4BCC-4127-9824-FA380BF43526-low.png" alt="system_layers"/></div><div class=""><img class="- topic/image image break break" src="GUID-B35E3E1A-CF6F-4E22-B6EE-70E4FB9E1F2C-low.png" alt="top_to_bottom_layers"/></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title4" id="abstraction-model"><h2 class="- topic/title title topictitle2" id="ariaid-title4" style=""> Abstraction model</h2><div class="- topic/body body"><div class=""><img class="- topic/image image break break" src="GUID-C3774287-8825-420A-8CE8-44E839E49B4B-low.png" alt="abstraction_model"/></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">User Application:</strong> This is where the customer application logic is built.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA Service:</strong> This layer includes the service level logic implementation. This is a Harmony component which provides certain user configurable parameters(ex- Version, Periodic update check etc.) . Based on user configuration, generated code will be activated with required functionalities.</p><div class=""><img class="- topic/image image break break" src="GUID-8EE6C3F9-C5A7-48CB-8A10-8C5FD4F449EE-low.png" alt="ota_service_component"/></div><div class=""><img class="- topic/image image break break" src="GUID-AA5F6DB3-4183-4E04-BB42-3757E0704D58-low.png" alt="ota_service_conf"/></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA software platform / OTA Core :</strong> This is the platform layer that consist of the main OTA logic implementation. When OTA process is triggered , this layer will communicate with the transport layer to connect to OTA server. If new image is available , it will initiate download using transport layer. If successfully downloaded, it will store the new image into the File System .</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">File System :</strong>  The architecture is designed to provide flexibility for the customer to choose the storage medium (ex- SST26 SPI flash, SD card, USB MSD in host mode etc.). Any medium supported by the Harmony3 file system can be used with the OTA service.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Bootloader :</strong> This layer consists of the logic to safely program images from the file system (external) into the program memory (NVM) of the device. At device boot, the bootloader will check if a new image is available in the external image store and transfer it to the NVM.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title5" id="ota-server-json-manifest"><h2 class="- topic/title title topictitle2" id="ariaid-title5" style=""> OTA server JSON manifest</h2><div class="- topic/body body"><p class="- topic/p p">The OTA service expects the HTTP based OTA server to provide metadata of images available in the server in <code class="+ topic/ph pr-d/codeph ph codeph">json</code> format. During periodic update checks, the OTA service task will download and parse this manifest file. Each entry in the manifest file should include the following fields :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Version</code></strong> indicates the application version number. It is a integer value.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">URL</code></strong> contains the image path from which the application image can be downloaded. It is a string variable.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Digest</code></strong>  contain the <code class="+ topic/ph pr-d/codeph ph codeph">SHA256</code> digest of image to be downloaded. It is a 64 byte string variable and should not include whitespaces</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">EraseVer</code></strong> This <em class="+ topic/ph hi-d/i ph i"><strong class="+ topic/ph hi-d/b ph b">optional</strong></em> field provides a capability to trigger an erase of an version which was downloaded earlier. Customer may want to remove an image from the image store due to various reasons, application with bug, may be one of them. It is a bool variable.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">If user configures this field as "true", OTA service will delete image version mentioned in "Version" field.</p></li><li class="- topic/li li"><p class="- topic/p p">If user configures this field as "false", OTA service will follow image downwload logic.</p></li></ul></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Patch</code></strong> This <em class="+ topic/ph hi-d/i ph i"><strong class="+ topic/ph hi-d/b ph b">optional</strong></em> field provides a facility to support patch functionality. If <strong class="+ topic/ph hi-d/b ph b">patch</strong> functionality-option is enabled in the project, application will try to fetch below fields</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">BaseVersion</code></strong> This is base image version against which patch will be applied. Application will check the presence of this base image version, in OTA DB, present in external flash.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">BaseVerDigest</code></strong> Base image digest must be provided by user, which will be used by application to verify correct Base image. This digest will be compared against the digest (stored inside OTA DB) of base version.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">PatchURL</code></strong> URL-path of patch image.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">PatchDigest</code></strong> Digest of Patch image . This is used by the application in the device to verify downloaded patch image.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">TargetDigest</code></strong> Digest of the Target image obtained after applying Patch . This is used by the application in the device to verify target image obtained after applying patch functionality.</p></li></ul></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Sample JSON</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock json">    {
    <span class="hl-json_key">"ota"</span>: [
            {
                <span class="hl-json_key">"Version"</span>: <span class="hl-number">5</span>,
                <span class="hl-json_key">"URL"</span>: <span class="hl-string">"http://192.168.0.101:8000/wifi_ota_app_upgrade_ver2.bin"</span>,
                <span class="hl-json_key">"Digest"</span>: <span class="hl-string">"aff0d6d02fabf6a8cc96f762eb71f54f3687ce7d8605dd814055c17eface0b1d"</span>,
                <span class="hl-json_key">"EraseVer"</span>: false,
                <span class="hl-json_key">"Patch"</span> : [
                              {
                                <span class="hl-json_key">"BaseVersion"</span>: <span class="hl-number">1</span>,
                                <span class="hl-json_key">"BaseVerDigest"</span>: <span class="hl-string">"aff0d6d02fabf6a8cc96f762eb71f54f3687ce7d8605dd814055c17eface0b1d"</span>,
                                <span class="hl-json_key">"PatchURL"</span>: <span class="hl-string">"http://192.168.0.101:8000/wifi_ota_app_upgrade_patch.patch"</span>,
                                <span class="hl-json_key">"PatchDigest"</span>: <span class="hl-string">"266008c4a6150d7033e370a48621ecd44985b3d0418cdf13bbb6efa6fae43823"</span>,
                                <span class="hl-json_key">"TargetDigest"</span>: <span class="hl-string">"beac75ef53f0159cae0645c32f58a9705d237823607c6e65267ca61793dfcb08"</span>
                              }
                          ]
            }
           ]
    }</pre><p class="- topic/p p">If the user enables <code class="+ topic/ph pr-d/codeph ph codeph">Enable File Download</code> option, then the below JSON file format should be used.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Files</code></strong> This field is optional if the user wants to add file download functionality to the OTA Service. It contains an array of elements which holds the information about images/files. If File Download option is enabled in the project, the application will try to fetch the below fields. This field can have up to 3 elements.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Slot Number</code></strong> This indicates the slot number to which the specific certificate/file should be downloaded. It starts from 0 to (number of slots – 1).</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Length</code></strong> This length field provides the exact size of the certificate/file</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">URL</code></strong> This field contains the certificate/file path from which the files are downloaded. It is a string variable</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Digest</code></strong> This field contains the calculated digest of the file/certificate. It is a string variable.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b"><code class="+ topic/ph pr-d/codeph ph codeph">Public Key</code></strong> This field is needed if the user wants to verify the above file with signature. It contains the details of the public key needed to verify signature. The file format should be <code class="+ topic/ph pr-d/codeph ph codeph">der</code>.</p></li></ul></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Sample JSON for File Download</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "ota": [
			{
				"files" : [		
							{
								"slot_number":0,
								"length":16968,
								"URL":"http://192.168.0.237:8000/test_app.bin",
								"digest":"1601B47A0DEE36196B1056B3E04AEF7CA1744DD6E18F63CB95E798C1C739AAB9",
								"Signature":"Et59Glludsj0OalTHKB9y90dEsLwtAVJhMRWqWdAB8VW3vrtClVETfnh6ILWIpf3kaUYsV4wjZrPys6BZjG6Xg==",
								"public_key" : [
												{
													"slot_number":1,
													"length":91,
													"URL":"http://192.168.0.237:8000/public_key.der",
													"digest":"AC7395DE5A1E328BFF0EBD53E1F55332F78186F388A8B8B85FD8E10AB56EB176"
												}	
											]
							},
							{
								"slot_number":2,
								"length":1415,
								"URL":"http://192.168.0.237:8000/ca_cert.crt",
								"digest":"0578CC171C82068A45344DA4D867F72CDB6CF823EBC73541DE4CDAC675B116F0"
							}
						]
			},
  			{
                "Version": 1,
                "URL": "http://192.168.214.36:8000/wifi_ota_app_upgrade_ver2.bin",
                "Digest": "f6f981386e630d6f69dddd7052d06dcdf7c59b9095e5912eccf6fd0bc627db50",
				"Signature": "2+2R/43x3FvNoV8anNW2M5ndo+JlFNzHSjJ+iwL68w1v5XMcBPMx4+3u5lBFejUNU/MLLoP13zxwd45f6MCySQ==",
                "EraseVer": false
            }
		]
}</code></pre><p class="- topic/p p">OTA service will download json file from server first when OTA process is triggered, try to fetch information and proceed further as per below logic:</p><div class=""><img class="- topic/image image break break" src="GUID-53B6B309-A93C-4F7A-B4E1-55452A440E5D-low.png" alt="resized_json_parse_logic"/></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="factory-image-structure"><h2 class="- topic/title title topictitle2" id="ariaid-title6" style=""> Factory Image Structure</h2><div class="- topic/body body"><p class="- topic/p p">The program memory of an application that include the OTA service will be organized as shown in the image below.</p><div class=""><img class="- topic/image image break break" src="GUID-ECFFE880-ABC1-404E-99B3-B77DDDCD1E7A-low.png" alt="Application_Image3"/></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="application-header-structure-boot-control-area"><h3 class="- topic/title title topictitle3" id="ariaid-title7" style=""> Application Header Structure (boot control area)</h3><div class="- topic/body body"><p class="- topic/p p">A boot control area of size 4 KB is maintained in internal flash area of device as a shared memory between the application and the bootloader. This area will contain fields as shown in figure below.</p><div class=""><img class="- topic/image image break break" src="GUID-638A782B-60C4-4ECE-A459-2517B31F1C56-low.png" alt="ota_header"/></div></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="image-download-process"><h2 class="- topic/title title topictitle2" id="ariaid-title8" style=""> Image download process</h2><div class="- topic/body body"><p class="- topic/p p">1.The OTA service task identifies that the server manifest includes an image with a version number numerically higher than the current version being executed in the system. Image version number is a C macro that can be defined in MHC.</p><p class="- topic/p p">2.The transport layer starts downloading the image using the link in the URL. If the URL starts with an <code class="+ topic/ph pr-d/codeph ph codeph">https://</code> TLS is automatically used.</p><p class="- topic/p p">3.Once the download is completed successfully, the OTA framework verifies the image by checking the SHA-256 hash, once transport layer finished receiving all data.</p><p class="- topic/p p">If download fails, system will go to <code class="+ topic/ph pr-d/codeph ph codeph">IDLE</code>. If <code class="+ topic/ph pr-d/codeph ph codeph">Auto Update</code> is enabled,  user need to reset the device to initiate OTA again.</p><p class="- topic/p p">4.If image digest verification is failed, user will be notified using user registered callback.</p><p class="- topic/p p">If image digest verification is passed, OTA framework will create an entry in OTA database present in external filesystem. OTA database is maintained in <code class="+ topic/ph pr-d/codeph ph codeph">csv</code> format.</p><p class="- topic/p p">Each entry in the OTA database will contain following information:</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">a. image name:</strong> name of downloaded image.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">b. image status:</strong> This will be set as <strong class="+ topic/ph hi-d/b ph b">0xFE</strong>, for newly downloaded image.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">c. version number:</strong> Version number of image obtained from JSON manifest.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">d. image digest:</strong> Image digest obtained from JSON manifest.</p><p class="- topic/p p">5.Once entry is made successfully, OTA framework updates <code class="+ topic/ph pr-d/codeph ph codeph">Boot-Control-header</code>, status field of the current application to <strong class="+ topic/ph hi-d/b ph b">Disabled</strong> 0xF0.</p><p class="- topic/p p">User will be notified about successful OTA process via user registered callback and wait for system reset or trigger auto system reset based on MHC configuration to load new image into the program flash memory.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title9" id="blockflow-diagram"><h2 class="- topic/title title topictitle2" id="ariaid-title9" style=""> Block/Flow Diagram</h2><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">a. OTA Service:</strong></p><div class=""><img class="- topic/image image break break" src="GUID-8703A25E-0F5F-4352-863A-C91C5A658D77-low.png" alt="resized_otaservice_flowchart"/></div><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA Start:</strong> OTA process can be triggered using various methods :</p><p class="- topic/p p">Periodically : System will communicate with OTA server periodically (configured by user) to check if any new image is available and initiate OTA process accordingly.</p><p class="- topic/p p">Manually : OTA can be triggerred by the application by calling an API.</p><p class="- topic/p p">Other sources : User may configure/implement any other means of source like MQTT server to trigger OTA. This is a subset of the manual triggers.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Download JSON manifest file and check for version :</strong> JSON file will be downloaded from server first , once OTA process is initiated. JSON file will have version number along with other details. Now system will try to compare the extracted version number from JSON file with currently running application version number and decide accordingly the next step :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">If version number is same abort the OTA process because new image is not available.</p></li><li class="- topic/li li"><p class="- topic/p p">If version number is different and higher than the current application version number, then system will continue with OTA process.</p></li></ul></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Patch Functionality :</strong> If patch functionality is enabled in the application , it will try fetch relative information from JSON manifest and proceed accordingly.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Initiating image Download process :</strong> Based on user configuration system will go for image downloading or will wait for download trigger by user.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Digest verify :</strong> SHA-256 verification will be done for downloaded image.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Update OTA database file system :</strong> If digest verification is successful , OTA database will be updated in file system for new image.</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Storing image in the external flash and wait :</strong> If downloaded successfully, the image will be stored in the external flash using standard FS present in Harmony. Afterwards system will perform following steps depending upon user configuration :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">reset automatically if Auto reset option is enabled .</p></li><li class="- topic/li li"><p class="- topic/p p">wait till user application triggers reset.</p></li></ul></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">b. Image Programming:</strong></p><div class=""><img class="- topic/image image break break" src="GUID-6CEDAF97-6147-4C6F-9FE0-CDA600B31D9A-low.png" alt="resized_bootloader_flowchart"/></div><p class="- topic/p p">1.During each system boot-up, bootloader checks if it needs to program any new, valid image from the external flash. Bootloader goes to program mode, if-</p><p class="- topic/p p">1.any newly downloaded image present in the external flash.2.if the already present image in the program flash is not "validated" during previous boot.</p><p class="- topic/p p">There are two conditions :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">whether the Application Image in Program-Flash area is valid (indicated by the STATUS field, value of 0xF8 in image boot control area of internal flash), and</p></li><li class="- topic/li li"><p class="- topic/p p">whether it has been confirmed that no errors were present during the previous boot (indicated by the STATUS field of image Database in the external flash, value of 0xF8 ).</p><p class="- topic/p p">According to bootloader logic if these two conditions are satisfied it will not go to <code class="+ topic/ph pr-d/codeph ph codeph">Program Mode</code> and the bootloader immediately jumps to the application image present in the program-flash area of the device.</p></li></ul><p class="- topic/p p">2.If two conditions mentioned in the step 1 are not satisfied, the bootloader switches to Image Program Mode. In Image Program Mode bootloader follows Image Programming sequence, which finds the highest ranked image in Image-Store(external flash), erases the Program-Flash area and copies the selected image to the Program-Flash area if the image is successfully verified. As the newly downloaded image with highest version is set as the highest ranked, during the first boot time after the Image-downloading, the bootloader attempts to load the newly downloaded image at the first try.</p><p class="- topic/p p">The bootloader choses the highest ranked image to boot. The images are ranked in following order:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>1.The downloaded , valid Image with highest version.  &#xD;
&#xD;
2.The next valid, higher version image.  &#xD;
&#xD;
3.The next known valid, higher version image.  &#xD;
&#xD;
  .&#xD;
&#xD;
  .&#xD;
&#xD;
  .&#xD;
&#xD;
4.Default (Golden/Factory) image.&#xD;</code></pre><p class="- topic/p p">3.If the image is not valid, the bootloader invalidates the image by setting “Invalidate” <code class="+ topic/ph pr-d/codeph ph codeph">0xF0</code> in <code class="+ topic/ph pr-d/codeph ph codeph">STATUS</code> field of image in OTA database present in the external flash and restarts the Image-Programming sequence.</p><p class="- topic/p p">4.If image is verified successfully, bootloader updates <code class="+ topic/ph pr-d/codeph ph codeph">STATUS</code> field of boot control area in internal flash as <code class="+ topic/ph pr-d/codeph ph codeph">Unbooted (0xFC)</code></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title10" id="patch-functionality"><h2 class="- topic/title title topictitle2" id="ariaid-title10" style=""> Patch functionality</h2><div class="- topic/body body"><p class="- topic/p p">OTA service provides facility of patch OTA . User can configure <code class="+ topic/ph pr-d/codeph ph codeph">PATCH</code> functionality using MHC menu ,for more details on configuration please follow - <strong class="+ topic/ph hi-d/b ph b">OTA System Service Configuration</strong> section. Patching is a concept using which , user can generate a binary file, that contains only the difference between the current image and base image version. For generating diff file user can download utility(jojodiff07) and follow instructions from <a class="- topic/xref xref" href="https://github.com/MicrochipTech/jojodiff" target="_blank" rel="external noopener">here</a> . Other versions of the jojodiff utility may lead to compatiblity issues and may cause failure in the OTA patch update. Therefore it is recommended to use the  jojodiff07 version for creating the diff file.</p><p class="- topic/p p">User can provide required parameters for patch in JSON file ( Please follow <code class="+ topic/ph pr-d/codeph ph codeph">OTA server JSON manifest</code> section , for more details ) . OTA Service will follow below steps during while processing <code class="+ topic/ph pr-d/codeph ph codeph">patch functionality</code> :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Check if base version is present in OTA DB</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">If not present, sysetm will try to download full image from server .</p></li><li class="- topic/li li"><p class="- topic/p p">If present, system will proceed with logic for patch functionality.</p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">During patching system will at first verify downloaded patch image using SHA-256 .</p></li><li class="- topic/li li"><p class="- topic/p p">If patch file is verified successfully , system will generate target binary image.</p></li><li class="- topic/li li"><p class="- topic/p p">After successful generation of target image , SHA-256 verification will be done against target image .</p></li><li class="- topic/li li"><p class="- topic/p p">If target image is verified successfully , same will be stored in OTA DB present in the external flash.</p></li><li class="- topic/li li"><p class="- topic/p p">Finally new image will be applied by bootloader as per application logic.</p></li></ul><div class=""><img class="- topic/image image break break" src="GUID-8A28BE3F-64CA-4262-896C-E8395A525496-low.png" alt="resized_patch_details"/></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title11" id="securing-ota-by-verifying-images-in-bootloader"><h2 class="- topic/title title topictitle2" id="ariaid-title11" style=""> Securing OTA by verifying Images in Bootloader</h2><div class="- topic/body body"><p class="- topic/p p">Images will be verified by using image's ECDSA signature on Bootloader. For this user need to provide image's signature , generated in R-S format to <code class="+ topic/ph pr-d/codeph ph codeph">Signature</code> field of JSON manifest file (Please follow <code class="+ topic/ph pr-d/codeph ph codeph">Generating Signature</code> section of this document). This <code class="+ topic/ph pr-d/codeph ph codeph">Signature</code> will be stored by application in <code class="+ topic/ph pr-d/codeph ph codeph">ota</code> database present in external flash and bootlader will use the same for image verification.</p><p class="- topic/p p">We have implemented 2 configurations of OTA Bootloader to perform signature verification of images:</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">In software using Wolfcrypt (ota_booloader_wolfcrypt.x).</p></li><li class="- topic/li li"><p class="- topic/p p">In Hardware using Trust Flex device (ota_booloader_trustflex.x).</p></li></ol><p class="- topic/p p">For more information on ota bootloader, please follow <a class="- topic/xref xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01/tree/v3.6.1/apps/ota_bootloader" target="_blank" rel="external noopener">Bootloader document</a></p><p class="- topic/p p">User need to load the corresponding bootloader configuration as <code class="+ topic/ph pr-d/codeph ph codeph">loadable</code> component as per application requirement. Loading bootloader into application is required , only for generating <code class="+ topic/ph pr-d/codeph ph codeph">factory</code> image. For more information on configuring <code class="+ topic/ph pr-d/codeph ph codeph">loadable project</code> , please refer <code class="+ topic/ph pr-d/codeph ph codeph">OTA System Service Configuration</code> section of <a class="- topic/xref xref" href="configuration.md#configuring-the-library">Configuring the library</a>.</p><p class="- topic/p p">Whenever, user wants to apply successfully downloaded new <code class="+ topic/ph pr-d/codeph ph codeph">ota</code> image, bootloader will take the control. Bootloader will perform signature verification of the image :</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">if signature verfication is failed;</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Bootloader will try to load another version of OTA image if present in OTA database.</p></li><li class="- topic/li li"><p class="- topic/p p">If bootloader can not find another image , it will load the factory image to the internal flash.</p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">if signature verification is passed; bootloader will load the image after successfully verifying digest.</p></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">NOTE : Secure OTA is not supported, when <code class="+ topic/ph pr-d/codeph ph codeph">PATCH</code> functionality is enabled.</strong></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title12" id="enabling-secure-ota"><h2 class="- topic/title title topictitle2" id="ariaid-title12" style=""> Enabling Secure OTA</h2><div class="- topic/body body"><p class="- topic/p p">By default, <code class="+ topic/ph pr-d/codeph ph codeph">secure ota</code> option will be disabled. To enable it , user need to follow below steps.</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Enable <code class="+ topic/ph pr-d/codeph ph codeph">Secure OTA Functionality</code> as described in <code class="+ topic/ph pr-d/codeph ph codeph">configure Advances Configuration</code> section of <a class="- topic/xref xref" href="configuration.md#configuring-the-library">Configuring the library</a>.</p></li><li class="- topic/li li"><p class="- topic/p p">Define "SYS_OTA_SECURE_BOOT_ENABLED" in bootloader project. For more details please follow <a class="- topic/xref xref" href="https://github.com/Microchip-MPLAB-Harmony/wireless_apps_pic32mzw1_wfi32e01/tree/v3.6.1/apps/ota_bootloader" target="_blank" rel="external noopener">Bootloader document</a>.</p></li></ol></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title13" id="verification-of-factory-image"><h2 class="- topic/title title topictitle2" id="ariaid-title13" style=""> Verification of factory image</h2><div class="- topic/body body"><p class="- topic/p p">For verification of factory image user need to follow below steps :</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">User need to create ".bin" format of HEX image, created while building factory image using MPLABX . User need to use following command:</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">python hex2bin.py -i "path of hex image" -o "path of bin file" -f 0</code></p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">example : python hex2bin.py -i "E:\ota_new_festeure\factory_image_verification\hex2bin\factory_image.hex" -o "E:\ota_new_festeure\factory_image_verification\hex2bin\factory_image1.bin" -f 0</code></p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">hex2bin.py</code> file can be found in the <code class="+ topic/ph pr-d/codeph ph codeph">tools</code> folder of your project. This folder will be created when you generate MHC code with the OTA service included in your project.</p></li><li class="- topic/li li"><p class="- topic/p p">Generate signature, by followinf <code class="+ topic/ph pr-d/codeph ph codeph">Generating Signature</code> section of this document .</p></li><li class="- topic/li li"><p class="- topic/p p">Store the generated signature in target system using following console command (Factory image should already be loaded in the system and factory image should be running):</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">sysota set factory sign "signature"</code></p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">example : sysota set factory sign "FkV6dJ9kMqJrJypp/0/V8MdIV4Y6ocNX5NVb5zvwDa2ygXJsVHDQZGCNR/L0lp13xroX9biwMBbpi/ZqJi1Erw=="</code></p></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">NOTE :</strong></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">1. It is recommended to perform above mentioned steps and store signature in target device as soon as application runs for the first time. This will ensure safe and successful loading of <code class="+ topic/ph pr-d/codeph ph codeph">factory image</code> in the system , whenever required. This is one time activity</strong><strong class="+ topic/ph hi-d/b ph b">2. If <code class="+ topic/ph pr-d/codeph ph codeph">factory reset</code> is triggered without storing signature of <code class="+ topic/ph pr-d/codeph ph codeph">factory image</code>, system will unable to load image and run.</strong></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="generating-public-key-and-private-key"><h2 class="- topic/title title topictitle2" id="ariaid-title14" style=""> Generating Public Key and Private Key</h2><div class="- topic/body body"><p class="- topic/p p">To generate private key :
<code class="+ topic/ph pr-d/codeph ph codeph">openssl ecparam -genkey -name prime256v1 -noout -out ECC_prime256v1.key</code></p><p class="- topic/p p">To extract public key from certificate :
<code class="+ topic/ph pr-d/codeph ph codeph">openssl.exe ec -in ECC_prime256v1.key -pubout -out ECC_prime256v1.pub</code></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="generating-signature"><h2 class="- topic/title title topictitle2" id="ariaid-title15" style=""> Generating Signature</h2><div class="- topic/body body"><p class="- topic/p p">User need to generate signature in R-S format and provide it in manifest file. To generate R-S format of <code class="+ topic/ph pr-d/codeph ph codeph">image signature</code>, user may take any approach; example: using openssl library etc.</p><p class="- topic/p p">Alternately, user may use python script <code class="+ topic/ph pr-d/codeph ph codeph">ecdsaSign.py</code> present in the <code class="+ topic/ph pr-d/codeph ph codeph">tools</code> folder of project. This folder will be created when user generates MHC code with the OTA service included in project.</p><p class="- topic/p p">User may use below command, for generating signature :</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">python ecdsaSign.py -f [image file name] -k [private key file name]</code></p><p class="- topic/p p">Example : <code class="+ topic/ph pr-d/codeph ph codeph">python sign.py -f image.bin -k ECC_prime256v1.key</code></p><p class="- topic/p p">image.bin -&gt; image file name.</p><p class="- topic/p p">ECC_prime256v1.key -&gt; private key file name.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title16" id="providing-signature-in-manifest-file"><h2 class="- topic/title title topictitle2" id="ariaid-title16" style=""> Providing Signature in Manifest file:</h2><div class="- topic/body body"><p class="- topic/p p">User need to mention <code class="+ topic/ph pr-d/codeph ph codeph">Signature</code> in Manifest file, by introducing <code class="+ topic/ph pr-d/codeph ph codeph">Signature</code> field in the file as shown below:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock json">{
    <span class="hl-json_key">"ota"</span>: [
            {
                <span class="hl-json_key">"Version"</span>: <span class="hl-number">2</span>,
                <span class="hl-json_key">"URL"</span>: <span class="hl-string">"http://192.168.43.173:8000/wifi_ota_app_upgrade_ver2.bin"</span>,
                <span class="hl-json_key">"Digest"</span>: <span class="hl-string">"d6f951e9ad5af844068a3ce1cc25e86ac945fa371791ca3e493f91672d95a2d4"</span>,
                <span class="hl-json_key">"Signature"</span>: <span class="hl-string">"pra2wlOiZO/zjzqaP9DZGe9dmm0aC4gx4r0yoyI7DU3sVpkdJ034v5XoiN5jdpeuLRge4RjsB/KSrVho8pwC2w=="</span>,
                <span class="hl-json_key">"EraseVer"</span>: false
            }
           ]
}
</pre></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title17" id="provisioning-trustflex-parts-for-ota-fw-verification"><h2 class="- topic/title title topictitle2" id="ariaid-title17" style=""> Provisioning TrustFlex parts for OTA FW Verification</h2><div class="- topic/body body"><p class="- topic/p p">ATECC608 based Trustflex can be used to perform secure firmware verification. The steps to provision it using TPDS2 is documented here.</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Setup TPDS V2</p><p class="- topic/p p">Setup TPDSV2 following the steps at https://www.microchip.com/en-us/product/SW-TPDSV2</p><p class="- topic/p p">Make sure that you update TPDS after installation.</p></li><li class="- topic/li li"><p class="- topic/p p">Hardware Setup</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Plug in the DT100104 click board into the microbus interface.</p></li><li class="- topic/li li"><p class="- topic/p p">Make sure that you flip all DIP switches other than SW1:2 in click board to OFF position. This will configure the board to expose the TrustFlex device over the I2C Bus.</p><div class=""><img class="- topic/image image break break" src="GUID-533D0E3F-0F37-4594-9E4F-1A1FAF0AA03A-low.png" alt="trust_flex_image1"/></div></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Device Firmware</p><p class="- topic/p p">TPDS talks to the trust elements using the KitProtocol. So, before using TPDS to provision TrustFlex with the Rio2 device , we need to flash the <a class="- topic/xref xref" href="https://github.com/MicrochipTech/PIC32MZW1_Projects/tree/main/pic32mzw1_kitprotocol" target="_blank" rel="external noopener">KitProtocol firmware</a> into the dev-board.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">To update the kit-protocol firmware to use I2C1 instead of the default I2C2 (connected to the onboard TnG module), change HAL_I2C_I2C2 defined in hal_i2c_harmony.h file of the kit protocol project to HAL_I2C_I2C1.</p></li><li class="- topic/li li"><p class="- topic/p p">When the firmware boots-up, the UART console (15008N1) will display the devices detected.</p><div class=""><img class="- topic/image image break break" src="GUID-9D236600-5063-4EEB-B546-5994E9CD5836-low.png" alt="trust_flex_image2"/></div><div class=""><img class="- topic/image image break break" src="GUID-AFC59CF8-F404-49B9-A1B5-1F3ACCD8457A-low.png" alt="trust_flex_image3"/></div></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Loading the Public Key for FW verification (Provisioning)</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Open TPDS  and select ATECC608-TFXTLS configurator under the "Configurators" Tab.</p><div class=""><img class="- topic/image image break break" src="GUID-C314C285-63A0-4EFA-A619-2DB83436B49A-low.png" alt="SelectTrustFlexConfigurator"/></div></li><li class="- topic/li li"><p class="- topic/p p">Select the Firmware Validation (Secure Boot) usecase from the next screen</p><div class=""><img class="- topic/image image break break" src="GUID-07CD1833-D8E2-40B5-8236-22A2799E5571-low.png" alt="trust_flex_image5"/></div></li><li class="- topic/li li"><p class="- topic/p p">Load the public key into Slot 15</p><div class=""><img class="- topic/image image break break" src="GUID-D1BA4250-68ED-4018-A2F3-65ED86AA763A-low.png" alt="trust_flex_image6"/></div></li><li class="- topic/li li"><p class="- topic/p p">Generate a provisioning package and use it to provision the sample.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">The attached kit with the trustFlex device mounted on it will be automatically detected and provisioned.
<div class=""><img class="- topic/image image" src="GUID-3A8E3532-9296-42FF-80B5-BA4090816965-low.png" alt="trust_flex_image7"/></div></p></li></ul></li></ul><div class=""><img class="- topic/image image break break" src="GUID-10D67F6B-6F86-4403-B66B-230F2DEAAFBF-low.png" alt="trust_flex_image8"/></div></li><li class="- topic/li li"><p class="- topic/p p">You can now use the device to verify image signatures in the bootloader.</p></li></ol></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title18" id="configuration-fuses"><h2 class="- topic/title title topictitle2" id="ariaid-title18" style=""> Configuration fuses</h2><div class="- topic/body body"><p class="- topic/p p">Due to the way configuration fuses are stored in the device, they cannot be modified by the bootloader at runtime. Consequently, when the bootloader loads the application, the config fuses set in the bootloader (using <code class="+ topic/ph pr-d/codeph ph codeph">#pragma</code> in the bootloader code) will be retained.</p><p class="- topic/p p">Unlike most of the other PIC32MZ devices, some of the configuration values of PCI32MZW1 / WFI32 can be overridden at runtime. These are marked as loadable configurations in the datasheet. Please refer to the <code class="+ topic/ph pr-d/codeph ph codeph">Configuration Bits</code> section of the <code class="+ topic/ph pr-d/codeph ph codeph">SPECIAL FEATURES</code> chapter of the PIC32MZW1 datasheet to see a list of loadable configurations and how to apply them. These loadable configs can be applied at runtime from the application.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title19" id="generating-the-ota-image"><h2 class="- topic/title title topictitle2" id="ariaid-title19" style=""> Generating the OTA image</h2><div class="- topic/body body"><p class="- topic/p p">Images that are downloaded from the server as part of the OTA process should be stored in <code class="+ topic/ph pr-d/codeph ph codeph">.bin</code> format as opposed to the Intel Hex format that is generated by MPLABX.</p><p class="- topic/p p">To convert the <code class="+ topic/ph pr-d/codeph ph codeph">hex</code> file to <code class="+ topic/ph pr-d/codeph ph codeph">bin</code> format, you can use the <code class="+ topic/ph pr-d/codeph ph codeph">hex2bin</code> tool in the <code class="+ topic/ph pr-d/codeph ph codeph">tools</code> folder of your project. This folder will be created when you generate MHC code with the OTA service included in your project.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">In case of a windows machine, you can execute the command <code class="+ topic/ph pr-d/codeph ph codeph">hex2bin.exe -i &lt;path to hex file in the dist folder&gt;</code>. In case your development environment is based on a non-Windows OS, you can execute the python script with the same arguments. Make sure that you have python3 installed in your machine.</p></li><li class="- topic/li li"><p class="- topic/p p">User may execute <code class="+ topic/ph pr-d/codeph ph codeph">hex2bin</code> tool directly from <code class="+ topic/ph pr-d/codeph ph codeph">tools</code> folder without any argument. In that case, tool will search for <code class="+ topic/ph pr-d/codeph ph codeph">hex</code> file in default path <code class="+ topic/ph pr-d/codeph ph codeph">"..\project.X\dist\project\production"</code> and generate <code class="+ topic/ph pr-d/codeph ph codeph">bin</code> file .</p></li><li class="- topic/li li"><p class="- topic/p p">User may also execute post build command <code class="+ topic/ph pr-d/codeph ph codeph">../../tools/hex2bin/hex2bin.exe</code> from MPLABx project itself :</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Right click on the project and click on properties.</p></li></ul></li></ul><div class=""><img class="- topic/image image break break" src="GUID-5BBFBE7A-316E-4134-B169-E8C5303F32AD-low.png" alt="project_loading"/></div><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Select "building", insert below command and click "OK":</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">../../tools/hex2bin/hex2bin.exe </code></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Note</strong>: python should be present in the system variable path.</p><div class=""><img class="- topic/image image break break" src="GUID-98F6D44F-52D2-47A0-A7A4-3A832C870C06-low.png" alt="resized_post_build"/></div></li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title20" id="ota-server"><h2 class="- topic/title title topictitle2" id="ariaid-title20" style=""> OTA server</h2><div class="- topic/body body"><p class="- topic/p p">Any standard http/https server can be used as OTA server as long as it hosts a manifest file with the mandatory fields.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">For testing the service, you may also use a simple python command to create a local <strong class="+ topic/ph hi-d/b ph b">HTTP</strong> server using below steps:</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Open command prompt and change directory to the folder where json file/ota image is present.</p><div class=""><img class="- topic/image image break break" src="GUID-BA709067-E54C-48AF-91E4-0263108E8CD9-low.png" alt="resized_Change_dir"/></div></li><li class="- topic/li li"><p class="- topic/p p">Use below python command in command prompt:</p></li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock python">  python -m SimpleHTTPServer <span class="hl-number">8000</span></pre><div class=""><img class="- topic/image image break break" src="GUID-3433357A-1585-4518-99C6-CB513BDE9A86-low.png" alt="resized_http_server"/></div></li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title21" id="integrating-bootloader"><h2 class="- topic/title title topictitle2" id="ariaid-title21" style=""> Integrating bootloader</h2><div class="- topic/body body"><p class="- topic/p p">It is required to integrate the bootloader and OTA application image to create a single unified HEX file. To integrate 2 images we can use hexmate tool, which is readily available with MPLABX package as part of the standard installation. To combine the hex files - please follow steps mentioned in configuration page <strong class="+ topic/ph hi-d/b ph b">OTA System Service Configuration</strong>.</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title22" id="resolving-data-conflict--compilation-error"><h2 class="- topic/title title topictitle2" id="ariaid-title22" style=""> Resolving <code class="+ topic/ph pr-d/codeph ph codeph">Data Conflict </code> Compilation error</h2><div class="- topic/body body"><p class="- topic/p p">During compilation if user is facing <code class="+ topic/ph pr-d/codeph ph codeph">Data conflict at address..</code> compilation error , please check if there is any mismatch of configuration ( <code class="+ topic/ph pr-d/codeph ph codeph">#pragma </code>) between bootloader and application. User may simply compare <code class="+ topic/ph pr-d/codeph ph codeph">initialization.c</code> files of both the projects to check mismatch.</p><div class=""><img class="- topic/image image break break" src="GUID-80EAA68A-0040-4390-81BF-3A5A6C6BBB6A-low.png" alt="resized_pragma_mismatch"/></div></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">On this page</div><ul><li class="topic-item"><a href="#description" data-tocid="description"> Description</a></li><li class="topic-item"><a href="#ota-service-framework-architecture-overview" data-tocid="ota-service-framework-architecture-overview"> OTA Service Framework Architecture Overview</a></li><li class="topic-item"><a href="#abstraction-model" data-tocid="abstraction-model"> Abstraction model</a></li><li class="topic-item"><a href="#ota-server-json-manifest" data-tocid="ota-server-json-manifest"> OTA server JSON manifest</a></li><li class="topic-item"><a href="#factory-image-structure" data-tocid="factory-image-structure"> Factory Image Structure</a><ul><li class="topic-item"><a href="#application-header-structure-boot-control-area" data-tocid="application-header-structure-boot-control-area"> Application Header Structure (boot control area)</a></li></ul></li><li class="topic-item"><a href="#image-download-process" data-tocid="image-download-process"> Image download process</a></li><li class="topic-item"><a href="#blockflow-diagram" data-tocid="blockflow-diagram"> Block/Flow Diagram</a></li><li class="topic-item"><a href="#patch-functionality" data-tocid="patch-functionality"> Patch functionality</a></li><li class="topic-item"><a href="#securing-ota-by-verifying-images-in-bootloader" data-tocid="securing-ota-by-verifying-images-in-bootloader"> Securing OTA by verifying Images in Bootloader</a></li><li class="topic-item"><a href="#enabling-secure-ota" data-tocid="enabling-secure-ota"> Enabling Secure OTA</a></li><li class="topic-item"><a href="#verification-of-factory-image" data-tocid="verification-of-factory-image"> Verification of factory image</a></li><li class="topic-item"><a href="#generating-public-key-and-private-key" data-tocid="generating-public-key-and-private-key"> Generating Public Key and Private Key</a></li><li class="topic-item"><a href="#generating-signature" data-tocid="generating-signature"> Generating Signature</a></li><li class="topic-item"><a href="#providing-signature-in-manifest-file" data-tocid="providing-signature-in-manifest-file"> Providing Signature in Manifest file:</a></li><li class="topic-item"><a href="#provisioning-trustflex-parts-for-ota-fw-verification" data-tocid="provisioning-trustflex-parts-for-ota-fw-verification"> Provisioning TrustFlex parts for OTA FW Verification</a></li><li class="topic-item"><a href="#configuration-fuses" data-tocid="configuration-fuses"> Configuration fuses</a></li><li class="topic-item"><a href="#generating-the-ota-image" data-tocid="generating-the-ota-image"> Generating the OTA image</a></li><li class="topic-item"><a href="#ota-server" data-tocid="ota-server"> OTA server</a></li><li class="topic-item"><a href="#integrating-bootloader" data-tocid="integrating-bootloader"> Integrating bootloader</a></li><li class="topic-item"><a href="#resolving-data-conflict--compilation-error" data-tocid="resolving-data-conflict--compilation-error"> Resolving <code class="+ topic/ph pr-d/codeph ph codeph">Data Conflict </code> Compilation error</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
  
  <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
  <script type="text/javascript" src="mchp-js/prepend.js"></script><!-- Package for viewing PDFs on mobile devices -->
  
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
       
        </body>
</html>